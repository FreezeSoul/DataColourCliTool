#!/usr/bin/env node

const a0_0x1a51=['Y3JlYXRl','cmVzb2x2ZQ==','aW5pdCA8bmFtZT4=','c3JjL3dpZGdldHMvd2lkZ2V0','c3JjL3dpZGdldHMv','ZW5hYmxl','LOWQjeensDo=','aHR0cDovLzEyNy4wLjAuMTo4MDg4Lw==','ZXJyb3I=','6K+36L6T5YWlV2lkZ2V055qE5qCH6K+G77yM6KaB5rGC6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/','5byA5aeL5bu656uL5pyN5Yqh5Zmo6L+e5o6lLi4u','ZXhlY1N5bmM=','dXNl','ZXhwcmVzcw==','dGhlbg==','aGFuZGxlYmFycw==','6K+36L6T5YWlV2lkZ2V055qE5o+P6L+w77yM6KaB5rGC566A55+t55qE5Lit5paH5o+P6L+w5L+h5oGv','V2luZG93OiAiQzpQcm9ncmFtIEZpbGVzICh4ODYpR29vZ2xlQ2hyb21lQXBwbGljYXRpb25jaHJvbWUuZXhlIiAtLWRpc2FibGUtd2ViLXNlY3VyaXR5IC0tdXNlci1kYXRhLWRpcj1+L2Nocm9tZV90bXA=','6aG555uu5Yid5aeL5YyW5a6M5oiQ','bWF0Y2g=','d2hpdGU=','ZXhpc3RzU3luYw==','Y2hhbGs=','Y29tbWFuZA==','Y2hkaXI=','Y3JlYXRlV3JpdGVTdHJlYW0=','5qCH6K+GOg==','aW5oZXJpdA==','5Yib5bu65LiA5LiqV2lkZ2V0','ZGVzY3JpcHRpb24=','cmVhZHk=','5ZG95Luk6KGM5ZCv5Yqo5rWP6KeI5Zmo56S65L6L77ya','cHV0','cHJvbXB0','ZGF0YWNvbG91cg==','5bey5a2Y5Zyo','6K+36L6T5YWlV2lkZ2V055qE5ZCN56ew77yM6KaB5rGC566A55+t55qE5Lit5paH5ZCN56ew5a6a5LmJ','cnVu','5YiX5Ye65omA5pyJV2lkZ2V0','6K+36L6T5YWl5L2c6ICF5ZCN56ew77yM5aaC77yaRnJlZXplU291bDxmcmVlemVzb3VsQGdtYWlsLmNvbT4=','bmFtZQ==','cmF3bGlzdA==','5a6M5oiQ5Yib5bu6V2lkZ2V0Og==','L3dpZGdldHM=','cGF0aA==','RnJlZXplU291bC9EYXRhQ29sb3VyV2lkZ2V0VGVtcGxhdGUjbWFzdGVy','cGFjaw==','cHVibGlzaA==','aHR0cC1wcm94eS1taWRkbGV3YXJl','d2lkZ2V0cw==','YWN0aW9u','aW5mbw==','Y2hpbGRfcHJvY2Vzcw==','cGFyc2U=','TGludXg6IC9vcHQvZ29vZ2xlL2Nocm9tZS9jaHJvbWUgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9L3RtcC9jaHJvbWVfdG1w','cmVwbGFjZQ==','T1NYOiBvcGVuIC1uIC1hIC9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSAtLWFyZ3MgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9Ii90bXAvY2hyb21lX3RtcCI=','aHR0cDovLzEwMy4yNTQuNzAuMjExOjE4MDgw','5LiN5a2Y5Zyo','5bey57uP5a2Y5ZyoV2lkZ2V0Og==','6YOo5Lu25q2j5Zyo5Y+R5biD5LitLi4u','6K+35o+Q5L6b5a6M5pW055qEV2lkZ2V05L+h5oGv','5a6M5oiQ5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','V2lkZ2V05qih5p2/5paH5Lu25aS55LiN5a2Y5Zyo','5Y+R5biD5LiA5LiqV2lkZ2V0','aW5xdWlyZXI=','c3RhcnQ=','c3VjY2VlZA==','dmVyc2lvbg==','cmVk','bG9n','6K+36YCJ5oup6KaB6LCD6K+V55qEV2lkZ2V0','dG9GaXhlZA==','bGlzdGVu','c3Rkb3V0','c3luYw==','LS0gLS1uYW1lPQ==','Li4u','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','5byA5aeL5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','Ymx1ZQ==','d3JpdGVGaWxlU3luYw==','Y29tbWFuZGVy','6YOo5Lu25bey5oiQ5Yqf5Y+R5biDLi4u','6K+36YCJ5oup6KaB5p6E5bu655qEV2lkZ2V0','LnRhcg==','ZG93bmxvYWQtZ2l0LXJlcG8=','Y29ubmVjdA==','5q2j5Zyo5Yib5bu6V2lkZ2V0Og==','c3RhcnQtd2lkZ2V0','cmVhZEZpbGVTeW5j','cGFja2FnZS5qc29u','5Yid5aeL5YyWV2lkZ2V06aG555uu','c3VjY2Vzcw==','dG9TdHJpbmc=','bnBt','ZGF0YQ==','cHVzaA==','6K+75Y+W5aSx6LSl','Z3JlZW4=','cGlwZQ==','bGlzdA==','c3Bhd24=','bnBtIHJ1biBidWlsZC13aWRnZXQ6cHJvIC0tIC0tbmFtZT0=','YXJndg==','6LCD6K+V5LiA5LiqV2lkZ2V0','LOeJiOacrDo=','bGVuZ3Ro','5p6E5bu65LiA5LiqV2lkZ2V0','ZmFpbA==','5Luj55CG5pyN5Yqh5Zmo5bey5ZCv5YqoLi4u','MTczLjI0Mi4xMjAuMjUw','d2lkZ2V0cy5qc29u6K+75Y+W5aSx6LSl','6K+36YCJ5oup6KaB5Y+R5biD55qEV2lkZ2V0','c2l6ZQ==','6YOo5Lu25q2j5Zyo5Y+R5biD5LitLi4uCQ==','c3RyaW5naWZ5','dGV4dA==','V2lkZ2V0Og==','6K+35Y+N6aaI5Y+R5biD5bqP5Y+3Og==','L21hbmlmZXN0Lmpzb24=','V2lkZ2V05Yib5bu65oiQ5Yqf','5Yid5aeL5YyW5LiA5LiqV2lkZ2V0','bG9nLXN5bWJvbHM=','YXV0aG9y','c3RhdFN5bmM=','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','b3Jh'];(function(_0x550ad9,_0x1e7828){const _0x18abbd=function(_0x4a3766){while(--_0x4a3766){_0x550ad9['push'](_0x550ad9['shift']());}};_0x18abbd(++_0x1e7828);}(a0_0x1a51,0xe2));const a0_0x3e84=function(_0x550ad9,_0x1e7828){_0x550ad9=_0x550ad9-0x0;let _0x18abbd=a0_0x1a51[_0x550ad9];if(a0_0x3e84['sjVPau']===undefined){(function(){let _0x48dd98;try{const _0x191bf8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x48dd98=_0x191bf8();}catch(_0x5a98fe){_0x48dd98=window;}const _0x2c3fd8='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x48dd98['atob']||(_0x48dd98['atob']=function(_0x1032b8){const _0x1eb0da=String(_0x1032b8)['replace'](/=+$/,'');let _0xde707a='';for(let _0x1e5b9c=0x0,_0x239c8d,_0x208be1,_0x1d84a2=0x0;_0x208be1=_0x1eb0da['charAt'](_0x1d84a2++);~_0x208be1&&(_0x239c8d=_0x1e5b9c%0x4?_0x239c8d*0x40+_0x208be1:_0x208be1,_0x1e5b9c++%0x4)?_0xde707a+=String['fromCharCode'](0xff&_0x239c8d>>(-0x2*_0x1e5b9c&0x6)):0x0){_0x208be1=_0x2c3fd8['indexOf'](_0x208be1);}return _0xde707a;});}());a0_0x3e84['ZDmQnr']=function(_0x2895e5){const _0x2c4b39=atob(_0x2895e5);let _0x1233c0=[];for(let _0x1f23b9=0x0,_0x49b7b1=_0x2c4b39['length'];_0x1f23b9<_0x49b7b1;_0x1f23b9++){_0x1233c0+='%'+('00'+_0x2c4b39['charCodeAt'](_0x1f23b9)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1233c0);};a0_0x3e84['URlSfa']={};a0_0x3e84['sjVPau']=!![];}const _0x4a3766=a0_0x3e84['URlSfa'][_0x550ad9];if(_0x4a3766===undefined){_0x18abbd=a0_0x3e84['ZDmQnr'](_0x18abbd);a0_0x3e84['URlSfa'][_0x550ad9]=_0x18abbd;}else{_0x18abbd=_0x4a3766;}return _0x18abbd;};const fs=require('fs');const path=require(a0_0x3e84('0x4a'));const ora=require(a0_0x3e84('0x1d'));const tar=require('tar-fs');const Client=require('ftp');const chalk=require(a0_0x3e84('0x34'));const express=require(a0_0x3e84('0x2b'));const copydir=require('copy-dir');const program=require(a0_0x3e84('0x70'));const inquirer=require(a0_0x3e84('0x5f'));const symbols=require(a0_0x3e84('0x19'));const handlebars=require(a0_0x3e84('0x2d'));const proxy=require(a0_0x3e84('0x4e'));const download=require(a0_0x3e84('0x74'));const child_process=require(a0_0x3e84('0x52'));const githublink=a0_0x3e84('0x4b');const dcServerAddress=a0_0x3e84('0x57');const widgetDebugUrl=a0_0x3e84('0x25');const ftpServerAddress=a0_0x3e84('0xd');const ftpServerUserName='datacolour';const ftpServerPassword=a0_0x3e84('0x40');const proxyServerPort=0x270f;try{const packagePath=path[a0_0x3e84('0x1f')](__dirname,a0_0x3e84('0x79'));if(fs[a0_0x3e84('0x33')](packagePath)){const pjson=require(packagePath);const version=pjson[a0_0x3e84('0x62')];program[a0_0x3e84('0x62')](version,'-v,\x20--version');}}catch(a0_0x4fdcd3){}program[a0_0x3e84('0x35')](a0_0x3e84('0x20'))[a0_0x3e84('0x3b')](a0_0x3e84('0x7a'))['action'](_0x2d19d8=>{if(!fs[a0_0x3e84('0x33')](_0x2d19d8)){console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk['white'](a0_0x3e84('0x7a')));const _0x41eedf=ora('正在下载Widget模板...');_0x41eedf[a0_0x3e84('0x60')]();download(githublink,_0x2d19d8,{'clone':![]},_0x37530d=>{if(_0x37530d){_0x41eedf[a0_0x3e84('0xb')]();console[a0_0x3e84('0x64')](symbols['error'],chalk[a0_0x3e84('0x63')](_0x37530d));}else{_0x41eedf[a0_0x3e84('0x61')]();process[a0_0x3e84('0x36')](_0x2d19d8);console['log'](symbols[a0_0x3e84('0x51')],chalk[a0_0x3e84('0x32')](a0_0x3e84('0x6d')));child_process[a0_0x3e84('0x29')]('npm\x20install',{'stdio':a0_0x3e84('0x39')});console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk[a0_0x3e84('0x32')](a0_0x3e84('0x5c')));console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk['white'](a0_0x3e84('0x18')));inquirer[a0_0x3e84('0x3f')]([{'name':'id','message':a0_0x3e84('0x27')},{'name':'name','message':a0_0x3e84('0x42')},{'name':'description','message':a0_0x3e84('0x2e')},{'name':a0_0x3e84('0x1a'),'message':a0_0x3e84('0x45')}])['then'](_0x2ad490=>{try{const _0x3c0b98=_0x2ad490['id'];const _0x423685=_0x2ad490['name'];const _0x579cc6=_0x2ad490[a0_0x3e84('0x3b')];const _0x4287cd=_0x2ad490[a0_0x3e84('0x1a')];const _0x52d953=createWidget(_0x3c0b98,_0x423685,_0x579cc6,_0x4287cd);if(_0x52d953){console['log'](symbols[a0_0x3e84('0x7b')],chalk[a0_0x3e84('0x1')](a0_0x3e84('0x30')));}}catch(_0x3d7bf3){console['log'](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')](_0x3d7bf3));}});}});}else{console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')]('项目'+_0x2d19d8+a0_0x3e84('0x41')));}});program[a0_0x3e84('0x35')](a0_0x3e84('0x3'))[a0_0x3e84('0x3b')](a0_0x3e84('0x44'))['action'](()=>{try{const _0x158649='src/widgets/widgets.json';if(fs[a0_0x3e84('0x33')](_0x158649)){const _0x4ceb4b=fs[a0_0x3e84('0x78')](_0x158649)[a0_0x3e84('0x7c')]();const _0x269698=JSON[a0_0x3e84('0x53')](_0x4ceb4b);for(let _0x55a85c of _0x269698[a0_0x3e84('0x4f')]){const _0x3c3cbf=a0_0x3e84('0x22')+_0x55a85c[a0_0x3e84('0x4a')];const _0x13dfe9=_0x3c3cbf+a0_0x3e84('0x16');if(fs[a0_0x3e84('0x33')](_0x13dfe9)){let _0xdb8a9d=fs['readFileSync'](_0x13dfe9)[a0_0x3e84('0x7c')]();const _0x124861=JSON['parse'](_0xdb8a9d);console['log'](symbols[a0_0x3e84('0x51')],chalk[a0_0x3e84('0x32')](a0_0x3e84('0x38')+_0x124861['id']+a0_0x3e84('0x24')+_0x124861['name']+a0_0x3e84('0x8')+_0x124861[a0_0x3e84('0x62')]));}}}}catch(_0x298a45){console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk['red'](_0x298a45));}});program[a0_0x3e84('0x35')](a0_0x3e84('0x1e'))[a0_0x3e84('0x3b')](a0_0x3e84('0x3a'))[a0_0x3e84('0x50')](()=>{inquirer[a0_0x3e84('0x3f')]([{'name':'id','message':a0_0x3e84('0x27')},{'name':a0_0x3e84('0x46'),'message':a0_0x3e84('0x42')},{'name':a0_0x3e84('0x3b'),'message':a0_0x3e84('0x2e')},{'name':'author','message':a0_0x3e84('0x45')}])['then'](_0xf30925=>{try{const _0x35d584=_0xf30925['id'];const _0x5d40ed=_0xf30925[a0_0x3e84('0x46')];const _0x3eb3ee=_0xf30925[a0_0x3e84('0x3b')];const _0x489bd7=_0xf30925[a0_0x3e84('0x1a')];const _0x10202d='src/widgets/'+_0x35d584;if(!fs[a0_0x3e84('0x33')](_0x10202d)){const _0x44be4d=createWidget(_0x35d584,_0x5d40ed,_0x3eb3ee,_0x489bd7);if(_0x44be4d){console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x7b')],chalk[a0_0x3e84('0x1')](a0_0x3e84('0x17')));}}else{console['log'](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')](a0_0x3e84('0x59')+_0x35d584));}}catch(_0x527de2){console['log'](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')](_0x527de2));}});});program[a0_0x3e84('0x35')]('debug')[a0_0x3e84('0x3b')](a0_0x3e84('0x7'))[a0_0x3e84('0x50')](()=>{inquirer['prompt']([{'name':'id','message':a0_0x3e84('0x65'),'type':a0_0x3e84('0x47'),'choices':getWidgetIdList()}])['then'](_0x4a1750=>{try{const _0x34474b=_0x4a1750['id'];const _0x4a32da=a0_0x3e84('0x22')+_0x34474b+'/manifest.json';if(fs[a0_0x3e84('0x33')](_0x4a32da)){const _0x7ec289=a0_0x3e84('0x6c');let _0x19bd4a=fs[a0_0x3e84('0x78')](_0x7ec289)[a0_0x3e84('0x7c')]();const _0x1f80f6=JSON[a0_0x3e84('0x53')](_0x19bd4a);_0x1f80f6[a0_0x3e84('0x62')]=getNextVersion(_0x1f80f6['version']);for(let _0xdc0c24 of _0x1f80f6['widgets']){_0xdc0c24['enable']=_0xdc0c24[a0_0x3e84('0x4a')]===_0x34474b;}_0x19bd4a=JSON['stringify'](_0x1f80f6,null,0x2);fs[a0_0x3e84('0x6f')](_0x7ec289,_0x19bd4a);let _0x182f18=fs[a0_0x3e84('0x78')](_0x4a32da)['toString']();const _0x2cb13b=JSON[a0_0x3e84('0x53')](_0x182f18);_0x2cb13b[a0_0x3e84('0x62')]=getNextVersion(_0x2cb13b[a0_0x3e84('0x62')]);_0x182f18=JSON[a0_0x3e84('0x12')](_0x2cb13b,null,0x2);fs['writeFileSync'](_0x4a32da,_0x182f18);console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk[a0_0x3e84('0x32')]('当前Widget版本号：'+_0x2cb13b[a0_0x3e84('0x62')]));startProxyServer(dcServerAddress,function(){const _0x2b8c52=child_process[a0_0x3e84('0x4')](a0_0x3e84('0x7d'),[a0_0x3e84('0x43'),a0_0x3e84('0x77'),a0_0x3e84('0x6a')+_0x34474b],{'shell':!![]});_0x2b8c52[a0_0x3e84('0x68')]['on'](a0_0x3e84('0x7e'),function(_0x290e07){console[a0_0x3e84('0x64')](_0x290e07[a0_0x3e84('0x7c')]());});_0x2b8c52['stderr']['on'](a0_0x3e84('0x7e'),function(_0x1b748f){console[a0_0x3e84('0x64')](_0x1b748f[a0_0x3e84('0x7c')]());});});}else{console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')](a0_0x3e84('0x14')+_0x34474b+a0_0x3e84('0x58')));}}catch(_0x5cbc66){console[a0_0x3e84('0x64')](symbols['error'],chalk[a0_0x3e84('0x63')](_0x5cbc66));}});});program[a0_0x3e84('0x35')]('build')[a0_0x3e84('0x3b')](a0_0x3e84('0xa'))[a0_0x3e84('0x50')](()=>{inquirer[a0_0x3e84('0x3f')]([{'name':'id','message':a0_0x3e84('0x72'),'type':a0_0x3e84('0x47'),'choices':getWidgetIdList()}])[a0_0x3e84('0x2c')](_0x369de5=>{try{const _0x1b473f=_0x369de5['id'];const _0x300f88=a0_0x3e84('0x22')+_0x1b473f+a0_0x3e84('0x16');if(fs[a0_0x3e84('0x33')](_0x300f88)){let _0x2921d2=fs[a0_0x3e84('0x78')](_0x300f88)[a0_0x3e84('0x7c')]();const _0x318d5c=JSON[a0_0x3e84('0x53')](_0x2921d2);_0x318d5c['version']=getNextVersion(_0x318d5c['version']);_0x2921d2=JSON[a0_0x3e84('0x12')](_0x318d5c,null,0x2);fs[a0_0x3e84('0x6f')](_0x300f88,_0x2921d2);console[a0_0x3e84('0x64')](symbols['info'],chalk[a0_0x3e84('0x32')](a0_0x3e84('0x1c')+_0x318d5c[a0_0x3e84('0x62')]));child_process[a0_0x3e84('0x29')](a0_0x3e84('0x5')+_0x1b473f,{'stdio':a0_0x3e84('0x39')});}else{console[a0_0x3e84('0x64')](symbols['error'],chalk[a0_0x3e84('0x63')]('Widget:'+_0x1b473f+'不存在'));}}catch(_0x520e45){console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk['red'](_0x520e45));}});});program['command'](a0_0x3e84('0x4d'))[a0_0x3e84('0x3b')](a0_0x3e84('0x5e'))['action'](()=>{inquirer['prompt']([{'name':'id','message':a0_0x3e84('0xf'),'type':a0_0x3e84('0x47'),'choices':getWidgetIdList()}])['then'](_0x74b4c3=>{try{const _0x126cd0=_0x74b4c3['id'];const _0x32b89b=a0_0x3e84('0x22')+_0x126cd0;const _0x597e4d=_0x32b89b+a0_0x3e84('0x16');const _0x30f09e=new Date()['toISOString']()[a0_0x3e84('0x55')](/T/,'')['replace'](/\..+/,'')[a0_0x3e84('0x55')](/-/g,'')['replace'](/:/g,'');const _0x49ec63=''+_0x126cd0+_0x30f09e;const _0xeb5466=_0x49ec63+a0_0x3e84('0x73');if(fs[a0_0x3e84('0x33')](_0x597e4d)){tar[a0_0x3e84('0x4c')](_0x32b89b)[a0_0x3e84('0x2')](fs[a0_0x3e84('0x37')](_0xeb5466));connectFtpServer(function(_0xa9c75e){const _0x11d131=ora(a0_0x3e84('0x5a'));_0x11d131['start']();const _0x1d5ab4=fs['createReadStream'](_0xeb5466);const _0x3661f5=fs[a0_0x3e84('0x1b')](_0xeb5466)[a0_0x3e84('0x10')];_0xa9c75e[a0_0x3e84('0x3e')](_0x1d5ab4,_0xeb5466,function(_0x2aa491){if(_0x2aa491){_0x11d131['fail']();console[a0_0x3e84('0x64')](symbols['error'],chalk[a0_0x3e84('0x63')](_0x2aa491));throw _0x2aa491;}_0xa9c75e['end']();_0x11d131[a0_0x3e84('0x61')](a0_0x3e84('0x5a'));console['log'](symbols[a0_0x3e84('0x7b')],chalk[a0_0x3e84('0x32')](a0_0x3e84('0x71')));console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk[a0_0x3e84('0x32')](a0_0x3e84('0x15')+_0x49ec63));});let _0x44d8c5=0x0;_0x1d5ab4['on'](a0_0x3e84('0x7e'),function(_0x30240a){_0x44d8c5+=_0x30240a[a0_0x3e84('0x9')];_0x11d131[a0_0x3e84('0x13')]=a0_0x3e84('0x11')+((_0x44d8c5/_0x3661f5*0x64)[a0_0x3e84('0x66')](0x2)+'%');});});}else{console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk['red'](a0_0x3e84('0x14')+_0x126cd0+a0_0x3e84('0x58')));}}catch(_0x291dab){console[a0_0x3e84('0x64')](symbols['error'],chalk[a0_0x3e84('0x63')](_0x291dab));}});});program[a0_0x3e84('0x53')](process[a0_0x3e84('0x6')]);function createWidget(_0x3da4f6,_0x3fa120,_0x37ab9f,_0x53414c){if(!_0x3da4f6||!_0x3fa120||!_0x37ab9f){console['log'](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')](a0_0x3e84('0x5b')));return![];}console[a0_0x3e84('0x64')](symbols['info'],chalk['white'](a0_0x3e84('0x76')+_0x3da4f6+a0_0x3e84('0x6b')));try{const _0x1516a3='src/widgets/'+_0x3da4f6;const _0x24cb84=a0_0x3e84('0x21');if(!fs[a0_0x3e84('0x33')](_0x24cb84)){console['log'](symbols['error'],chalk[a0_0x3e84('0x63')](a0_0x3e84('0x5d')));return![];}if(fs[a0_0x3e84('0x33')](_0x1516a3)){console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')]('Widget:'+_0x3da4f6+a0_0x3e84('0x41')));return![];}copydir[a0_0x3e84('0x69')](_0x24cb84,_0x1516a3);const _0x1ca295=_0x1516a3+'/manifest.json';let _0x57da06=fs[a0_0x3e84('0x78')](_0x1ca295)[a0_0x3e84('0x7c')]();const _0x302fe8=JSON[a0_0x3e84('0x53')](_0x57da06);_0x302fe8['id']=_0x3da4f6;_0x302fe8[a0_0x3e84('0x46')]=_0x3fa120;_0x302fe8[a0_0x3e84('0x3b')]=_0x37ab9f;_0x302fe8[a0_0x3e84('0x1a')]=_0x53414c;_0x57da06=JSON['stringify'](_0x302fe8,null,0x2);fs['writeFileSync'](_0x1ca295,_0x57da06);const _0x1ff670='src/widgets/widgets.json';let _0x2c16e0=fs[a0_0x3e84('0x78')](_0x1ff670)[a0_0x3e84('0x7c')]();const _0x44a9bf=JSON['parse'](_0x2c16e0);_0x44a9bf[a0_0x3e84('0x62')]=getNextVersion(_0x44a9bf[a0_0x3e84('0x62')]);for(let _0x3bc1ca of _0x44a9bf[a0_0x3e84('0x4f')]){_0x3bc1ca[a0_0x3e84('0x23')]=![];}_0x44a9bf[a0_0x3e84('0x4f')][a0_0x3e84('0x7f')]({'group':'测试','tag':'Test','path':_0x3da4f6,'enable':!![]});_0x2c16e0=JSON['stringify'](_0x44a9bf,null,0x2);fs[a0_0x3e84('0x6f')](_0x1ff670,_0x2c16e0);console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk[a0_0x3e84('0x32')](a0_0x3e84('0x48')+_0x3da4f6+a0_0x3e84('0x6b')));}catch(_0x31a482){console[a0_0x3e84('0x64')](symbols['error'],chalk[a0_0x3e84('0x63')](_0x31a482));}return!![];}function getNextVersion(_0x2c2b39){if(_0x2c2b39){const _0xe3191b=_0x2c2b39[a0_0x3e84('0x31')](/(.*\.)(\d+)$/);if(_0xe3191b&&_0xe3191b[0x1]&&_0xe3191b[0x2]){return''+_0xe3191b[0x1]+(parseInt(_0xe3191b[0x2])+0x1);}}return _0x2c2b39;}function getWidgetIdList(){const _0x2d135f=[];try{const _0x5964b1='src/widgets/widgets.json';if(fs[a0_0x3e84('0x33')](_0x5964b1)){const _0x2e7ad4=fs[a0_0x3e84('0x78')](_0x5964b1)[a0_0x3e84('0x7c')]();const _0x1d629a=JSON[a0_0x3e84('0x53')](_0x2e7ad4);for(let _0x4bf531 of _0x1d629a[a0_0x3e84('0x4f')]){try{const _0x3d6c26='src/widgets/'+_0x4bf531['path'];const _0x58bd76=_0x3d6c26+a0_0x3e84('0x16');if(fs[a0_0x3e84('0x33')](_0x58bd76)){let _0x530355=fs[a0_0x3e84('0x78')](_0x58bd76)[a0_0x3e84('0x7c')]();const _0x4775aa=JSON[a0_0x3e84('0x53')](_0x530355);_0x2d135f[a0_0x3e84('0x7f')]({'value':_0x4775aa['id'],'name':a0_0x3e84('0x38')+_0x4775aa['id']+a0_0x3e84('0x24')+_0x4775aa['name']+a0_0x3e84('0x8')+_0x4775aa[a0_0x3e84('0x62')]});}}catch(_0x255ac7){console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk['red'](_0x4bf531[a0_0x3e84('0x4a')]+a0_0x3e84('0x0')));console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')](_0x255ac7));}}}}catch(_0x41870c){console['log'](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')](a0_0x3e84('0xe')));console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')](_0x41870c));}return _0x2d135f;}function startProxyServer(_0x374990,_0x1588cb){console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk[a0_0x3e84('0x6e')]('正在启动代理服务...'));var _0x776eb6=express();_0x776eb6[a0_0x3e84('0x2a')]('/',proxy({'target':_0x374990,'changeOrigin':!![],'pathRewrite':{'/core/widgets':a0_0x3e84('0x49')},'router':{'/core/widgets':widgetDebugUrl}}));_0x776eb6[a0_0x3e84('0x67')](proxyServerPort,function(){console[a0_0x3e84('0x64')](symbols['info'],chalk['blue'](a0_0x3e84('0xc')));console['log'](symbols[a0_0x3e84('0x51')],chalk['green'](a0_0x3e84('0x3d')));console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk['green'](a0_0x3e84('0x2f')));console[a0_0x3e84('0x64')](symbols['info'],chalk['green'](a0_0x3e84('0x54')));console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk[a0_0x3e84('0x1')](a0_0x3e84('0x56')));if(_0x1588cb){_0x1588cb();}});}function connectFtpServer(_0x388a19){const _0x97eea3=new Client();const _0x17da0c=ora(a0_0x3e84('0x28'));_0x17da0c['start']();_0x97eea3['on'](a0_0x3e84('0x3c'),function(){_0x17da0c[a0_0x3e84('0x61')]();console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x51')],chalk[a0_0x3e84('0x32')]('服务器连接已建立...'));if(_0x388a19){_0x388a19(_0x97eea3);}});_0x97eea3['on'](a0_0x3e84('0x26'),function(_0x15fa67){_0x17da0c[a0_0x3e84('0xb')]();console[a0_0x3e84('0x64')](symbols[a0_0x3e84('0x26')],chalk[a0_0x3e84('0x63')](_0x15fa67));});_0x97eea3[a0_0x3e84('0x75')]({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}