#!/usr/bin/env node

const a0_0x3b1d=['dGFn','c3VjY2Vzcw==','ZXhwcmVzcw==','cmVwbGFjZQ==','dG9JU09TdHJpbmc=','dGV4dA==','c2l6ZQ==','cmF3bGlzdA==','Y2hyb21lLWxhdW5jaGVy','Y3JlYXRlUmVhZFN0cmVhbQ==','5q2j5Zyo5Yib5bu6V2lkZ2V0Og==','5Y+R5biD5LiA5LiqV2lkZ2V0','YnVpbGQv','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','ZW5hYmxl','LS1kaXNrLWNhY2hlLXNpemU9MQ==','dmVyc2lvbg==','bGlzdGVu','ZnMtZXh0cmE=','YXV0aG9y','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','Y2hkaXI=','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4uCQ==','YnVpbGQ=','c3RyaW5naWZ5','RnJlZXplU291bC9EYXRhQ29sb3VyV2lkZ2V0VGVtcGxhdGUjbWFzdGVy','cmVzb2x2ZQ==','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4u','cHJvbXB0','LS11c2VyLWRhdGEtZGlyPS4vY2hyb21lX3RtcA==','5q2j5Zyo5ZCv5Yqo5Luj55CG5pyN5YqhLi4u','aW5mbw==','L19fcGF0aF9fLnR4dA==','d2lkZ2V0cy5qc29u6K+75Y+W5aSx6LSl','b3Jh','cGFyc2U=','LOeJiOacrDo=','d2lkZ2V0cw==','aGFuZGxlYmFycw==','c3JjL3dpZGdldHMv','5Yid5aeL5YyWV2lkZ2V06aG555uu','Z3JlZW4=','6K+36L6T5YWl5bmz5Y+w5pyN5Yqh5Zyw5Z2A77yM6buY6K6k6LCD55So5YWs5YWx5pyN5Yqh','6LC35q2M5rWP6KeI5Zmo5ZCv5Yqo5oiQ5YqfLi4u','dW5vZmZpY2lhbA==','cmVhZEZpbGVTeW5j','cHVibGlzaEFsbA==','bWtkaXJTeW5j','YWN0aW9u','cmVhZHk=','5ZCv5Yqo6LC35q2M5rWP6KeI5Zmo6LCD6K+VLi4u','bGlzdA==','5qCH6K+GOg==','5LiN5a2Y5Zyo','ZnRw','c3Rkb3V0','6K+75Y+W5aSx6LSl','6K+36YCJ5oup6KaB5p6E5bu655qEV2lkZ2V0','LS1kaXNhYmxlLXdlYi1zZWN1cml0eQ==','aW5pdCA8bmFtZT4=','V2luZG93OiAiQzpQcm9ncmFtIEZpbGVzICh4ODYpR29vZ2xlQ2hyb21lQXBwbGljYXRpb25jaHJvbWUuZXhlIiAtLWRpc2FibGUtd2ViLXNlY3VyaXR5IC0tdXNlci1kYXRhLWRpcj1+L2Nocm9tZV90bXA=','aHR0cC1wcm94eS1taWRkbGV3YXJl','cGlwZQ==','ZXhpc3RzU3luYw==','5p6E5bu65LiA5LiqV2lkZ2V0','5a6M5oiQ5a6J6KOF5L6d6LWW57uE5Lu2Li4u','ZGlzdC93aWRnZXRzLw==','aHR0cDovLzEyNy4wLjAuMTo4MDg4Lw==','cHVzaA==','Y29tbWFuZA==','6K+36YCJ5oup6KaB6LCD6K+V55qEV2lkZ2V0','5q2j5Zyo5LiL6L29V2lkZ2V05qih5p2/Li4u','5YiX5Ye65omA5pyJV2lkZ2V0','dGhlbg==','dG9GaXhlZA==','V2lkZ2V0Og==','YnVpbGRBbGw=','cHV0','LXYsIC0tdmVyc2lvbg==','Li4u','ZmFpbA==','LS1tZWRpYS1jYWNoZS1zaXplPTE=','Q2hhcnQ=','cGFjaw==','d2hpdGU=','Y2hhbGs=','Y29weS1kaXI=','dGFyLWZz','cmVk','c3luYw==','ZGF0YQ==','Y3JlYXRlV3JpdGVTdHJlYW0=','L21hbmlmZXN0Lmpzb24=','6K+35Y+N6aaI5Y+R5biD5bqP5Y+3Og==','d3JpdGVGaWxlU3luYw==','T1NYOiBvcGVuIC1uIC1hIC9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSAtLWFyZ3MgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9Ii90bXAvY2hyb21lX3RtcCI=','6YOo5Lu25bey5oiQ5Yqf5o+Q5LqkLi4u','LnNyYy50YXI=','5pyN5Yqh5Zmo6L+e5o6l5bey5bu656uLLi4u','bnBt','Y29tbWFuZGVy','bG9n','Y3JlYXRl','dmFsdWU=','LmRpc3QudGFy','ZG93bmxvYWQtZ2l0LXJlcG8=','bnBtIGluc3RhbGw=','aG9zdA==','bGF1bmNo','5byA5aeL5a6J6KOF5L6d6LWW57uE5Lu2Li4u','6K+356Gu6K6k5piv5ZCm5aSH5Lu96Iez5YWs5YWx5o+S5Lu25Lit5b+D77yM6K+36L6T5YWleS9uKOm7mOiupG4p','5a6M5oiQ5Yib5bu6V2lkZ2V0Og==','ZGVzY3JpcHRpb24=','ZXJyb3I=','cGFja2FnZS5qc29u','LS0gLS1wYXRoPQ==','ZGF0YWNvbG91cg==','5Luj55CG5pyN5Yqh5Zmo5bey5ZCv5YqoLi4u','5Yib5bu65LiA5LiqV2lkZ2V0','Ymx1ZQ==','ZGVidWc=','cHVibGlzaC8=','bnBtIHJ1biBidWlsZC13aWRnZXQ6cHJvIC0tIC0tcGF0aD0=','bW92ZVN5bmM=','bmFtZQ==','dXNl','V2lkZ2V05Yib5bu65oiQ5Yqf','LOWQjeensDo=','L3dpZGdldHM=','aHR0cDovLzEyNy4wLjAuMTo=','ZXhlY1N5bmM=','5bey5a2Y5Zyo5a+55bqU55uu5b2V','6K+36YCJ5oup6KaB5Y+R5biD55qEV2lkZ2V0','aW5oZXJpdA==','bWF0Y2g=','6K+36L6T5YWlV2lkZ2V055qE5qCH6K+G77yM6KaB5rGC6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/','5a6M5oiQ6aG555uu5Yid5aeL5YyW77yM6K+35Yib5bu65LiA5LiqV2lkZ2V0','cnVu','c3VjY2VlZA==','5Y+R5biD5omA5pyJV2lkZ2V0cw==','c3JjL3dpZGdldHMvdGVtcGxhdGUvd2lkZ2V0','6K+36L6T5YWlV2lkZ2V055qE5o+P6L+w77yM6KaB5rGC566A55+t55qE5Lit5paH5o+P6L+w5L+h5oGv','aHR0cDovLzM5LjEwMS4xMzguNDM6ODA4MA==','c3RhcnQtd2lkZ2V0','5aaC5rWP6KeI5Zmo5ZCv5Yqo5aSx6LSl77yM6K+36YCa6L+H5aaC5LiL5ZG95Luk6KGM5omL5bel5ZCv5Yqo77ya','cGF0aA==','6K+36L6T5YWlV2lkZ2V05YiG57G75qCH562+77yM6KaB5rGC6Iux5paH5a2X5q+N77yM5aSa5Liq6YCX5Y+35YiG5Ymy','dG9TdHJpbmc=','cHVibGlzaA==','5b2T5YmNV2lkZ2V05qCH6K+G77ya','c3Bhd24=','V2lkZ2V05qih5p2/5paH5Lu25aS55LiN5a2Y5Zyo','bG9nLXN5bWJvbHM=','c3RkZXJy'];(function(_0x29b8b2,_0x45bceb){const _0x2b960d=function(_0x44aaaf){while(--_0x44aaaf){_0x29b8b2['push'](_0x29b8b2['shift']());}};_0x2b960d(++_0x45bceb);}(a0_0x3b1d,0x1c4));const a0_0x2896=function(_0x29b8b2,_0x45bceb){_0x29b8b2=_0x29b8b2-0x0;let _0x2b960d=a0_0x3b1d[_0x29b8b2];if(a0_0x2896['KuTmEg']===undefined){(function(){const _0x1ede87=function(){let _0x188ebf;try{_0x188ebf=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xdd895e){_0x188ebf=window;}return _0x188ebf;};const _0x1a822c=_0x1ede87();const _0x2d6578='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x1a822c['atob']||(_0x1a822c['atob']=function(_0x2d51e6){const _0x5c49a9=String(_0x2d51e6)['replace'](/=+$/,'');let _0x38dea7='';for(let _0x420619=0x0,_0x2de50f,_0x3bf4af,_0x530c60=0x0;_0x3bf4af=_0x5c49a9['charAt'](_0x530c60++);~_0x3bf4af&&(_0x2de50f=_0x420619%0x4?_0x2de50f*0x40+_0x3bf4af:_0x3bf4af,_0x420619++%0x4)?_0x38dea7+=String['fromCharCode'](0xff&_0x2de50f>>(-0x2*_0x420619&0x6)):0x0){_0x3bf4af=_0x2d6578['indexOf'](_0x3bf4af);}return _0x38dea7;});}());a0_0x2896['HvxRPf']=function(_0x3b6a1a){const _0x1a7cd0=atob(_0x3b6a1a);let _0x1bc654=[];for(let _0x16214c=0x0,_0x5522e5=_0x1a7cd0['length'];_0x16214c<_0x5522e5;_0x16214c++){_0x1bc654+='%'+('00'+_0x1a7cd0['charCodeAt'](_0x16214c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1bc654);};a0_0x2896['sDYHjL']={};a0_0x2896['KuTmEg']=!![];}const _0x44aaaf=a0_0x2896['sDYHjL'][_0x29b8b2];if(_0x44aaaf===undefined){_0x2b960d=a0_0x2896['HvxRPf'](_0x2b960d);a0_0x2896['sDYHjL'][_0x29b8b2]=_0x2b960d;}else{_0x2b960d=_0x44aaaf;}return _0x2b960d;};const fs=require('fs');const fse=require(a0_0x2896('0x1c'));const path=require(a0_0x2896('0x1'));const ora=require(a0_0x2896('0x2c'));const tar=require(a0_0x2896('0x61'));const Client=require(a0_0x2896('0x40'));const chalk=require(a0_0x2896('0x5f'));const express=require(a0_0x2896('0xc'));const copydir=require(a0_0x2896('0x60'));const program=require(a0_0x2896('0x6e'));const inquirer=require('inquirer');const symbols=require(a0_0x2896('0x8'));const handlebars=require(a0_0x2896('0x30'));const proxy=require(a0_0x2896('0x47'));const download=require(a0_0x2896('0x73'));const child_process=require('child_process');const ChromeLauncher=require(a0_0x2896('0x12'));const githublink=a0_0x2896('0x23');const dcServerAddress=a0_0x2896('0x98');const widgetDebugUrl=a0_0x2896('0x4d');const ftpServerAddress='ftp.datacolour.cn';const ftpServerUserName=a0_0x2896('0x7e');const ftpServerPassword=a0_0x2896('0x7e');const proxyServerPort=0x270f;try{const packagePath=path[a0_0x2896('0x24')](__dirname,a0_0x2896('0x7c'));if(fs['existsSync'](packagePath)){const pjson=require(packagePath);const version=pjson[a0_0x2896('0x1a')];program[a0_0x2896('0x1a')](version,a0_0x2896('0x58'));}}catch(a0_0x18a054){}program[a0_0x2896('0x4f')](a0_0x2896('0x45'))['description'](a0_0x2896('0x32'))['action'](_0x393949=>{if(!fs[a0_0x2896('0x49')](_0x393949)){console['log'](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x32')));const _0x36f134=ora(a0_0x2896('0x51'));_0x36f134['start']();download(githublink,_0x393949,{'clone':![]},_0x45901a=>{if(_0x45901a){_0x36f134[a0_0x2896('0x5a')]();console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk['red'](_0x45901a));}else{_0x36f134[a0_0x2896('0x94')]();process[a0_0x2896('0x1f')](_0x393949);console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk['white'](a0_0x2896('0x77')));child_process[a0_0x2896('0x8c')](a0_0x2896('0x74'),{'stdio':a0_0x2896('0x8f')});console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x4b')));console[a0_0x2896('0x6f')](symbols['info'],chalk[a0_0x2896('0x5e')](a0_0x2896('0x92')));}});}else{console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')]('项目'+_0x393949+'已存在'));}});program['command'](a0_0x2896('0x3d'))['description'](a0_0x2896('0x52'))[a0_0x2896('0x3a')](()=>{try{const _0x26f43b=a0_0x2896('0x17');if(fs[a0_0x2896('0x49')](_0x26f43b)){const _0x1e39b0=fs['readFileSync'](_0x26f43b)[a0_0x2896('0x3')]();const _0xdfbfc0=JSON[a0_0x2896('0x2d')](_0x1e39b0);for(let _0x4987a8 of _0xdfbfc0[a0_0x2896('0x2f')]){const _0x38f329=a0_0x2896('0x31')+_0x4987a8[a0_0x2896('0x1')];const _0x28bed8=_0x38f329+'/manifest.json';if(fs['existsSync'](_0x28bed8)){let _0x3f2b52=fs[a0_0x2896('0x37')](_0x28bed8)[a0_0x2896('0x3')]();const _0xe1e6a=JSON[a0_0x2896('0x2d')](_0x3f2b52);console['log'](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x3e')+_0xe1e6a['id']+a0_0x2896('0x89')+_0xe1e6a['name']+a0_0x2896('0x2e')+_0xe1e6a[a0_0x2896('0x1a')]));}}}}catch(_0x3a9245){console['log'](symbols['error'],chalk[a0_0x2896('0x62')](_0x3a9245));}});program[a0_0x2896('0x4f')](a0_0x2896('0x70'))[a0_0x2896('0x7a')](a0_0x2896('0x80'))[a0_0x2896('0x3a')](()=>{inquirer['prompt']([{'name':'id','message':a0_0x2896('0x91')},{'name':'name','message':'请输入Widget的名称，要求简短的中文名称定义'},{'name':'description','message':a0_0x2896('0x97')},{'name':'tag','message':a0_0x2896('0x2')},{'name':'author','message':'请输入Widget作者名称，如：FreezeSoul<freezesoul@gmail.com>'},{'name':a0_0x2896('0x1'),'message':'请输入Widget存储路径，默认路径unofficial，建议默认'}])['then'](_0x5ebc38=>{try{const _0x2142f6=_0x5ebc38['id'];const _0x49a379=_0x5ebc38['name'];const _0x22780a=_0x5ebc38[a0_0x2896('0x7a')];const _0x1c909c=_0x5ebc38[a0_0x2896('0x1d')];const _0x105d5d=_0x5ebc38[a0_0x2896('0xa')]?_0x5ebc38[a0_0x2896('0xa')]:a0_0x2896('0x5c');const _0x19a36f=_0x5ebc38[a0_0x2896('0x1')]?_0x5ebc38[a0_0x2896('0x1')][a0_0x2896('0xd')](/^\/+|\/+$/g,''):a0_0x2896('0x36');const _0x5800c4=createWidget(_0x2142f6,_0x49a379,_0x22780a,_0x1c909c,_0x105d5d,_0x19a36f);if(_0x5800c4){console[a0_0x2896('0x6f')](symbols[a0_0x2896('0xb')],chalk[a0_0x2896('0x33')](a0_0x2896('0x88')));}}catch(_0x45ea90){console['log'](symbols[a0_0x2896('0x7b')],chalk['red'](_0x45ea90));}});});program[a0_0x2896('0x4f')](a0_0x2896('0x82'))[a0_0x2896('0x7a')]('调试一个Widget')[a0_0x2896('0x3a')](()=>{inquirer['prompt']([{'name':'id','message':a0_0x2896('0x50'),'type':a0_0x2896('0x11'),'choices':getWidgetsList()},{'name':a0_0x2896('0x75'),'message':a0_0x2896('0x34')}])[a0_0x2896('0x53')](_0x4a36cb=>{try{const _0x48737d=_0x4a36cb['id'];const _0x18ae04=getWidgetPath(_0x48737d);const _0x52f4fe=_0x4a36cb[a0_0x2896('0x75')]?_0x4a36cb[a0_0x2896('0x75')]:dcServerAddress;const _0x2c5900=a0_0x2896('0x31')+_0x18ae04+'/manifest.json';if(fs['existsSync'](_0x2c5900)){const _0x3efb90=a0_0x2896('0x17');let _0x197a0a=fs[a0_0x2896('0x37')](_0x3efb90)[a0_0x2896('0x3')]();const _0x3d7987=JSON[a0_0x2896('0x2d')](_0x197a0a);_0x3d7987['version']=getNextVersion(_0x3d7987[a0_0x2896('0x1a')]);for(let _0x1458d7 of _0x3d7987[a0_0x2896('0x2f')]){_0x1458d7[a0_0x2896('0x18')]=_0x1458d7[a0_0x2896('0x1')]===_0x18ae04;}_0x197a0a=JSON[a0_0x2896('0x22')](_0x3d7987,null,0x2);fs['writeFileSync'](_0x3efb90,_0x197a0a);let _0x2d20b9=fs[a0_0x2896('0x37')](_0x2c5900)['toString']();const _0x45a57d=JSON[a0_0x2896('0x2d')](_0x2d20b9);_0x45a57d[a0_0x2896('0x1a')]=getNextVersion(_0x45a57d[a0_0x2896('0x1a')]);_0x2d20b9=JSON[a0_0x2896('0x22')](_0x45a57d,null,0x2);fs[a0_0x2896('0x68')](_0x2c5900,_0x2d20b9);console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')]('当前Widget版本号：'+_0x45a57d[a0_0x2896('0x1a')]));startProxyServer(_0x52f4fe,function(){const _0xed5e2b=child_process[a0_0x2896('0x6')](a0_0x2896('0x6d'),[a0_0x2896('0x93'),a0_0x2896('0x99'),a0_0x2896('0x7d')+_0x18ae04],{'shell':!![]});_0xed5e2b[a0_0x2896('0x41')]['on'](a0_0x2896('0x64'),function(_0x2d5a7e){console['log'](_0x2d5a7e[a0_0x2896('0x3')]());});_0xed5e2b[a0_0x2896('0x9')]['on'](a0_0x2896('0x64'),function(_0x314878){console[a0_0x2896('0x6f')](_0x314878[a0_0x2896('0x3')]());});});}else{console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](a0_0x2896('0x55')+_0x48737d+a0_0x2896('0x3f')));}}catch(_0x54d5bb){console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](_0x54d5bb));}});});program[a0_0x2896('0x4f')](a0_0x2896('0x21'))[a0_0x2896('0x7a')](a0_0x2896('0x4a'))['action'](()=>{inquirer[a0_0x2896('0x26')]([{'name':'id','message':a0_0x2896('0x43'),'type':a0_0x2896('0x11'),'choices':getWidgetsList()}])[a0_0x2896('0x53')](_0x4de903=>{try{const _0x4c8d0b=_0x4de903['id'];const _0x1dcad2=getWidgetPath(_0x4c8d0b);const _0x6c9002=a0_0x2896('0x31')+_0x1dcad2+a0_0x2896('0x66');if(fs[a0_0x2896('0x49')](_0x6c9002)){let _0x188583=fs['readFileSync'](_0x6c9002)[a0_0x2896('0x3')]();const _0x13470c=JSON[a0_0x2896('0x2d')](_0x188583);_0x13470c[a0_0x2896('0x1a')]=getNextVersion(_0x13470c[a0_0x2896('0x1a')]);_0x188583=JSON[a0_0x2896('0x22')](_0x13470c,null,0x2);fs['writeFileSync'](_0x6c9002,_0x188583);console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x1e')+_0x13470c['version']));child_process['execSync'](a0_0x2896('0x84')+_0x1dcad2,{'stdio':'inherit'});}else{console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](a0_0x2896('0x55')+_0x4c8d0b+a0_0x2896('0x3f')));}}catch(_0x369174){console[a0_0x2896('0x6f')](symbols['error'],chalk[a0_0x2896('0x62')](_0x369174));}});});program[a0_0x2896('0x4f')](a0_0x2896('0x56'))[a0_0x2896('0x7a')]('构建所有Widgets')[a0_0x2896('0x3a')](()=>{try{const _0x288dbd=getWidgetsList();for(let _0x359a14 of _0x288dbd){const _0x55b8df=_0x359a14[a0_0x2896('0x71')];const _0x289103=getWidgetPath(_0x55b8df);const _0x5ee2f5=a0_0x2896('0x31')+_0x289103+'/manifest.json';if(fs[a0_0x2896('0x49')](_0x5ee2f5)){let _0x12c0a2=fs[a0_0x2896('0x37')](_0x5ee2f5)[a0_0x2896('0x3')]();const _0x3497b8=JSON[a0_0x2896('0x2d')](_0x12c0a2);_0x3497b8[a0_0x2896('0x1a')]=getNextVersion(_0x3497b8[a0_0x2896('0x1a')]);_0x12c0a2=JSON[a0_0x2896('0x22')](_0x3497b8,null,0x2);fs[a0_0x2896('0x68')](_0x5ee2f5,_0x12c0a2);console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x5')+_0x55b8df));console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x1e')+_0x3497b8[a0_0x2896('0x1a')]));child_process[a0_0x2896('0x8c')]('npm\x20run\x20build-widget:pro\x20--\x20--path='+_0x289103,{'stdio':'inherit'});console[a0_0x2896('0x6f')](symbols[a0_0x2896('0xb')],chalk[a0_0x2896('0x33')]('完成构建Widget：'+_0x3497b8[a0_0x2896('0x1a')]));const _0x54a674=a0_0x2896('0x4c')+_0x289103;const _0x17845c=a0_0x2896('0x16')+_0x289103;if(!fs[a0_0x2896('0x49')](a0_0x2896('0x21'))){fs[a0_0x2896('0x39')](a0_0x2896('0x21'));}if(fs[a0_0x2896('0x49')](_0x54a674)){fse[a0_0x2896('0x85')](_0x54a674,_0x17845c);}}else{console['log'](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](a0_0x2896('0x55')+_0x55b8df+a0_0x2896('0x3f')));}}}catch(_0x4f6c65){console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk['red'](_0x4f6c65));}});program[a0_0x2896('0x4f')](a0_0x2896('0x4'))['description'](a0_0x2896('0x15'))[a0_0x2896('0x3a')](()=>{inquirer[a0_0x2896('0x26')]([{'name':'id','message':a0_0x2896('0x8e'),'type':a0_0x2896('0x11'),'choices':getWidgetsList()},{'name':a0_0x2896('0x40'),'message':a0_0x2896('0x78')}])[a0_0x2896('0x53')](_0xd10bf2=>{try{const _0x2efac9=_0xd10bf2['id'];const _0x53b4fa=getWidgetPath(_0x2efac9);const _0x587e7d=a0_0x2896('0x31')+_0x53b4fa;const _0x4288db=a0_0x2896('0x4c')+_0x53b4fa;const _0x4ba1bd=_0x587e7d+a0_0x2896('0x66');const _0x3c1226=new Date()[a0_0x2896('0xe')]()[a0_0x2896('0xd')](/T/,'')[a0_0x2896('0xd')](/\..+/,'')[a0_0x2896('0xd')](/-/g,'')[a0_0x2896('0xd')](/:/g,'');const _0x3a458e=_0x2efac9+'.'+_0x3c1226;const _0x2bfcc4=_0x3a458e+a0_0x2896('0x6b');const _0x16fbba=_0x3a458e+a0_0x2896('0x72');const _0x4e1b20=a0_0x2896('0x83')+_0x2bfcc4;const _0x14e623=a0_0x2896('0x83')+_0x16fbba;if(!fs[a0_0x2896('0x49')](a0_0x2896('0x4'))){fs[a0_0x2896('0x39')](a0_0x2896('0x4'));}if(fs[a0_0x2896('0x49')](_0x4ba1bd)){let _0x415dcc=fs['readFileSync'](_0x4ba1bd)[a0_0x2896('0x3')]();const _0x1dcf4a=JSON[a0_0x2896('0x2d')](_0x415dcc);_0x1dcf4a[a0_0x2896('0x1a')]=getNextVersion(_0x1dcf4a[a0_0x2896('0x1a')]);_0x415dcc=JSON['stringify'](_0x1dcf4a,null,0x2);fs[a0_0x2896('0x68')](_0x4ba1bd,_0x415dcc);console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x1e')+_0x1dcf4a[a0_0x2896('0x1a')]));child_process[a0_0x2896('0x8c')](a0_0x2896('0x84')+_0x53b4fa,{'stdio':a0_0x2896('0x8f')});fs[a0_0x2896('0x68')](_0x587e7d+a0_0x2896('0x2a'),_0x53b4fa);fs[a0_0x2896('0x68')](_0x4288db+a0_0x2896('0x2a'),_0x53b4fa);tar['pack'](_0x587e7d)['pipe'](fs[a0_0x2896('0x65')](_0x4e1b20));tar[a0_0x2896('0x5d')](_0x4288db)[a0_0x2896('0x48')](fs[a0_0x2896('0x65')](_0x14e623));const _0x2049ac=_0xd10bf2[a0_0x2896('0x40')];if(_0x2049ac==='y'){connectFtpServer(function(_0x2d458d){const _0xf8761a=ora(a0_0x2896('0x25'));_0xf8761a['start']();const _0x3c9d96=fs[a0_0x2896('0x13')](_0x4e1b20);const _0x54b504=fs['statSync'](_0x4e1b20)[a0_0x2896('0x10')];_0x2d458d[a0_0x2896('0x57')](_0x3c9d96,_0x2bfcc4,function(_0x3eabea){if(_0x3eabea){_0xf8761a['fail']();console['log'](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](_0x3eabea));throw _0x3eabea;}_0x2d458d['end']();_0xf8761a[a0_0x2896('0x94')](a0_0x2896('0x25'));console[a0_0x2896('0x6f')](symbols[a0_0x2896('0xb')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x6a')));console['log'](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x67')+_0x3a458e));});let _0x28cc87=0x0;_0x3c9d96['on']('data',function(_0x7608ea){_0x28cc87+=_0x7608ea['length'];_0xf8761a[a0_0x2896('0xf')]=a0_0x2896('0x20')+((_0x28cc87/_0x54b504*0x64)[a0_0x2896('0x54')](0x2)+'%');});});}}else{console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](a0_0x2896('0x55')+_0x2efac9+'不存在'));}}catch(_0x323025){console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](_0x323025));}});});program[a0_0x2896('0x4f')](a0_0x2896('0x38'))['description'](a0_0x2896('0x95'))['action'](()=>{try{const _0x3e1ba9=getWidgetsList();for(let _0xfb1673 of _0x3e1ba9){const _0x5f25e2=_0xfb1673[a0_0x2896('0x71')];const _0x2c8247=getWidgetPath(_0x5f25e2);const _0x4119ef='src/widgets/'+_0x2c8247;const _0x22a4bf=a0_0x2896('0x4c')+_0x2c8247;const _0x54f745=_0x4119ef+a0_0x2896('0x66');const _0x4547b1=new Date()[a0_0x2896('0xe')]()['replace'](/T/,'')[a0_0x2896('0xd')](/\..+/,'')[a0_0x2896('0xd')](/-/g,'')[a0_0x2896('0xd')](/:/g,'');const _0x4e2354=_0x5f25e2+'.'+_0x4547b1;const _0x2907ad=_0x4e2354+'.src.tar';const _0x340e59=_0x4e2354+a0_0x2896('0x72');const _0x3be11=a0_0x2896('0x83')+_0x2907ad;const _0x3fc0f9=a0_0x2896('0x83')+_0x340e59;if(!fs['existsSync']('publish')){fs[a0_0x2896('0x39')](a0_0x2896('0x4'));}if(fs[a0_0x2896('0x49')](_0x54f745)){let _0x4d8237=fs[a0_0x2896('0x37')](_0x54f745)[a0_0x2896('0x3')]();const _0x3ac2b3=JSON[a0_0x2896('0x2d')](_0x4d8237);_0x3ac2b3[a0_0x2896('0x1a')]=getNextVersion(_0x3ac2b3[a0_0x2896('0x1a')]);_0x4d8237=JSON['stringify'](_0x3ac2b3,null,0x2);fs[a0_0x2896('0x68')](_0x54f745,_0x4d8237);console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk['white'](a0_0x2896('0x1e')+_0x3ac2b3['version']));child_process[a0_0x2896('0x8c')](a0_0x2896('0x84')+_0x2c8247,{'stdio':a0_0x2896('0x8f')});fs[a0_0x2896('0x68')](_0x4119ef+'/__path__.txt',_0x2c8247);fs[a0_0x2896('0x68')](_0x22a4bf+a0_0x2896('0x2a'),_0x2c8247);tar[a0_0x2896('0x5d')](_0x4119ef)[a0_0x2896('0x48')](fs[a0_0x2896('0x65')](_0x3be11));tar['pack'](_0x22a4bf)['pipe'](fs[a0_0x2896('0x65')](_0x3fc0f9));}else{console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk['red'](a0_0x2896('0x55')+_0x5f25e2+a0_0x2896('0x3f')));}}}catch(_0x33e090){console[a0_0x2896('0x6f')](symbols['error'],chalk[a0_0x2896('0x62')](_0x33e090));}});program[a0_0x2896('0x2d')](process['argv']);function createWidget(_0x25befc,_0x187f9e,_0x2a21ed,_0x26336d,_0x2592c2,_0x474e09){if(!_0x25befc||!_0x187f9e||!_0x2a21ed||!_0x2592c2||!_0x474e09){console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')]('请提供完整的Widget信息'));return![];}console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x5e')](a0_0x2896('0x14')+_0x25befc+a0_0x2896('0x59')));try{const _0x5bf74b=_0x474e09+'/'+_0x25befc;const _0x52749c=a0_0x2896('0x31')+_0x474e09;const _0x1bf0a9=a0_0x2896('0x31')+_0x5bf74b;const _0x511394=a0_0x2896('0x96');if(!fs[a0_0x2896('0x49')](_0x52749c)){fs[a0_0x2896('0x39')](_0x52749c);}if(!fs['existsSync'](_0x511394)){console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](a0_0x2896('0x7')));return![];}if(fs[a0_0x2896('0x49')](_0x1bf0a9)){console[a0_0x2896('0x6f')](symbols['error'],chalk[a0_0x2896('0x62')](a0_0x2896('0x55')+_0x25befc+a0_0x2896('0x8d')));return![];}copydir[a0_0x2896('0x63')](_0x511394,_0x1bf0a9);const _0x276409=_0x1bf0a9+a0_0x2896('0x66');let _0x3bce65=fs[a0_0x2896('0x37')](_0x276409)[a0_0x2896('0x3')]();const _0x2a9b1a=JSON['parse'](_0x3bce65);_0x2a9b1a['id']=_0x25befc;_0x2a9b1a[a0_0x2896('0xa')]=_0x2592c2;_0x2a9b1a[a0_0x2896('0x86')]=_0x187f9e;_0x2a9b1a[a0_0x2896('0x7a')]=_0x2a21ed;_0x2a9b1a[a0_0x2896('0x1d')]=_0x26336d;_0x3bce65=JSON['stringify'](_0x2a9b1a,null,0x2);fs[a0_0x2896('0x68')](_0x276409,_0x3bce65);const _0x57a853=a0_0x2896('0x17');let _0x63f8ca=fs[a0_0x2896('0x37')](_0x57a853)[a0_0x2896('0x3')]();const _0xdda8e7=JSON[a0_0x2896('0x2d')](_0x63f8ca);_0xdda8e7[a0_0x2896('0x1a')]=getNextVersion(_0xdda8e7[a0_0x2896('0x1a')]);for(let _0xd214aa of _0xdda8e7[a0_0x2896('0x2f')]){_0xd214aa[a0_0x2896('0x18')]=![];}_0xdda8e7[a0_0x2896('0x2f')][a0_0x2896('0x4e')]({'group':'测试','path':_0x5bf74b,'enable':!![]});_0x63f8ca=JSON[a0_0x2896('0x22')](_0xdda8e7,null,0x2);fs[a0_0x2896('0x68')](_0x57a853,_0x63f8ca);console['log'](symbols['info'],chalk[a0_0x2896('0x5e')](a0_0x2896('0x79')+_0x25befc+a0_0x2896('0x59')));}catch(_0x22c107){console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](_0x22c107));return![];}return!![];}function getNextVersion(_0x20eb2e){if(_0x20eb2e){const _0xd9cdfa=_0x20eb2e[a0_0x2896('0x90')](/(.*\.)(\d+)$/);if(_0xd9cdfa&&_0xd9cdfa[0x1]&&_0xd9cdfa[0x2]){return''+_0xd9cdfa[0x1]+(parseInt(_0xd9cdfa[0x2])+0x1);}}return _0x20eb2e;}function getWidgetsList(){const _0x95fb8f=[];try{const _0x1210c1='src/widgets/widgets.json';if(fs[a0_0x2896('0x49')](_0x1210c1)){const _0x59fd9f=fs[a0_0x2896('0x37')](_0x1210c1)[a0_0x2896('0x3')]();const _0x1fc485=JSON[a0_0x2896('0x2d')](_0x59fd9f);for(let _0x1763e9 of _0x1fc485[a0_0x2896('0x2f')]){try{const _0x4ad69c=a0_0x2896('0x31')+_0x1763e9[a0_0x2896('0x1')];const _0x4e3ae3=_0x4ad69c+a0_0x2896('0x66');if(fs[a0_0x2896('0x49')](_0x4e3ae3)){let _0x218b8e=fs['readFileSync'](_0x4e3ae3)[a0_0x2896('0x3')]();const _0xddde22=JSON['parse'](_0x218b8e);_0x95fb8f[a0_0x2896('0x4e')]({'value':_0xddde22['id'],'name':a0_0x2896('0x3e')+_0xddde22['id']+a0_0x2896('0x89')+_0xddde22[a0_0x2896('0x86')]+a0_0x2896('0x2e')+_0xddde22[a0_0x2896('0x1a')]});}}catch(_0x2be599){console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](_0x1763e9[a0_0x2896('0x1')]+a0_0x2896('0x42')));console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](_0x2be599));}}}}catch(_0x282047){console[a0_0x2896('0x6f')](symbols['error'],chalk[a0_0x2896('0x62')](a0_0x2896('0x2b')));console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](_0x282047));}return _0x95fb8f;}function getWidgetPath(_0x452036){const _0x4ef3ed='src/widgets/widgets.json';let _0x3ccff3=fs['readFileSync'](_0x4ef3ed)[a0_0x2896('0x3')]();const _0x137d49=JSON[a0_0x2896('0x2d')](_0x3ccff3);for(let _0x3aa95d of _0x137d49[a0_0x2896('0x2f')]){const _0x427b70=a0_0x2896('0x31')+_0x3aa95d[a0_0x2896('0x1')]+a0_0x2896('0x66');let _0x440be4=fs[a0_0x2896('0x37')](_0x427b70)[a0_0x2896('0x3')]();const _0x471823=JSON[a0_0x2896('0x2d')](_0x440be4);if(_0x471823['id']===_0x452036){return _0x3aa95d[a0_0x2896('0x1')];}}console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')]('未找到匹配的widget：'+_0x452036));}function startProxyServer(_0x83384d,_0x416734){console[a0_0x2896('0x6f')](symbols['info'],chalk[a0_0x2896('0x81')](a0_0x2896('0x28')));var _0x4cf0b6=express();_0x4cf0b6[a0_0x2896('0x87')]('/',proxy({'target':_0x83384d,'changeOrigin':!![],'pathRewrite':{'/core/widgets':a0_0x2896('0x8a')},'router':{'/core/widgets':widgetDebugUrl}}));_0x4cf0b6[a0_0x2896('0x1b')](proxyServerPort,function(){console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk['blue'](a0_0x2896('0x7f')));console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x81')](a0_0x2896('0x3c')));console[a0_0x2896('0x6f')](symbols['info'],chalk[a0_0x2896('0x33')](a0_0x2896('0x0')));console['log'](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x33')](a0_0x2896('0x46')));console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk[a0_0x2896('0x33')]('Linux:\x20/opt/google/chrome/chrome\x20--disable-web-security\x20--user-data-dir=/tmp/chrome_tmp'));console[a0_0x2896('0x6f')](symbols['info'],chalk[a0_0x2896('0x33')](a0_0x2896('0x69')));ChromeLauncher[a0_0x2896('0x76')]({'startingUrl':a0_0x2896('0x8b')+proxyServerPort,'chromeFlags':[a0_0x2896('0x44'),a0_0x2896('0x27'),a0_0x2896('0x5b'),a0_0x2896('0x19')]})[a0_0x2896('0x53')](_0x5b0f94=>{console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x29')],chalk['blue'](a0_0x2896('0x35')));});if(_0x416734){_0x416734();}});}function connectFtpServer(_0x5afce8){const _0x4b6ad0=new Client();const _0x2e6a93=ora('开始建立服务器连接...');_0x2e6a93['start']();_0x4b6ad0['on'](a0_0x2896('0x3b'),function(){_0x2e6a93[a0_0x2896('0x94')]();console['log'](symbols['info'],chalk[a0_0x2896('0x5e')](a0_0x2896('0x6c')));if(_0x5afce8){_0x5afce8(_0x4b6ad0);}});_0x4b6ad0['on'](a0_0x2896('0x7b'),function(_0x4caf65){_0x2e6a93['fail']();console[a0_0x2896('0x6f')](symbols[a0_0x2896('0x7b')],chalk[a0_0x2896('0x62')](_0x4caf65));});_0x4b6ad0['connect']({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}