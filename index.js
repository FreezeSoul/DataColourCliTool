#!/usr/bin/env node

const a0_0x570d=['cGFjaw==','Ymx1ZQ==','6K+36YCJ5oup6KaB5p6E5bu655qEV2lkZ2V0','Y3JlYXRl','5q2j5Zyo5ZCv5Yqo5Luj55CG5pyN5YqhLi4u','6K+36L6T5YWlV2lkZ2V055qE5ZCN56ew77yM6KaB5rGC566A55+t55qE5Lit5paH5ZCN56ew5a6a5LmJ','L21hbmlmZXN0Lmpzb24=','Y29ubmVjdA==','5Luj55CG5pyN5Yqh5Zmo5bey5ZCv5YqoLi4u','ZXhlY1N5bmM=','cHV0','aHR0cDovLzEyNy4wLjAuMTo=','ZGF0YQ==','bnBtIHJ1biBidWlsZC13aWRnZXQ6cHJvIC0tIC0tbmFtZT0=','YXJndg==','d2lkZ2V0cy5qc29u6K+75Y+W5aSx6LSl','ZXJyb3I=','bGlzdGVu','d2hpdGU=','6K+36YCJ5oup6KaB5Y+R5biD55qEV2lkZ2V0','cmVwbGFjZQ==','ZGVidWc=','5q2j5Zyo5LiL6L29V2lkZ2V05qih5p2/Li4u','5qCH6K+GOg==','ZW5hYmxl','aW5oZXJpdA==','5Y+R5biD5LiA5LiqV2lkZ2V0','c3RhcnQ=','LOeJiOacrDo=','5Yid5aeL5YyW5LiA5LiqV2lkZ2V0','aW5mbw==','cnVu','cGF0aA==','c3VjY2Vzcw==','6K+75Y+W5aSx6LSl','dmVyc2lvbg==','bG9n','LXYsIC0tdmVyc2lvbg==','dG9JU09TdHJpbmc=','bGlzdA==','bmFtZQ==','cHVzaA==','ZnRw','cmF3bGlzdA==','ZXhpc3RzU3luYw==','5q2j5Zyo5Yib5bu6V2lkZ2V0Og==','c3luYw==','LnRhcg==','5a6M5oiQ5Yib5bu6V2lkZ2V0Og==','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','dG9TdHJpbmc=','YWN0aW9u','V2lkZ2V0Og==','bnBtIGluc3RhbGw=','ZW5k','6YOo5Lu25bey5oiQ5Yqf5Y+R5biDLi4u','YXV0aG9y','dGV4dA==','c3RkZXJy','T1NYOiBvcGVuIC1uIC1hIC9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSAtLWFyZ3MgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9Ii90bXAvY2hyb21lX3RtcCI=','aW5pdCA8bmFtZT4=','5p6E5bu65LiA5LiqV2lkZ2V0','cHJvbXB0','L3dpZGdldHM=','aHR0cDovLzM5LjEwMS4xMzguNDM6ODA4MA==','cmVzb2x2ZQ==','c3JjL3dpZGdldHMv','Y29weS1kaXI=','6LC35q2M5rWP6KeI5Zmo5ZCv5Yqo5oiQ5YqfLi4u','5byA5aeL5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','cmVhZEZpbGVTeW5j','TGludXg6IC9vcHQvZ29vZ2xlL2Nocm9tZS9jaHJvbWUgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9L3RtcC9jaHJvbWVfdG1w','c3VjY2VlZA==','6K+36L6T5YWlV2lkZ2V055qE5o+P6L+w77yM6KaB5rGC566A55+t55qE5Lit5paH5o+P6L+w5L+h5oGv','d3JpdGVGaWxlU3luYw==','bWF0Y2g=','ZXhwcmVzcw==','cGlwZQ==','d2lkZ2V0cw==','c3RhcnQtd2lkZ2V0','Z3JlZW4=','ZmFpbA==','cGFyc2U=','c2l6ZQ==','Y29tbWFuZGVy','cGFja2FnZS5qc29u','Li4u','aHR0cDovLzEyNy4wLjAuMTo4MDg4Lw==','dGhlbg==','6K+36L6T5YWl5L2c6ICF5ZCN56ew77yM5aaC77yaRnJlZXplU291bDxmcmVlemVzb3VsQGdtYWlsLmNvbT4=','V2luZG93OiAiQzpQcm9ncmFtIEZpbGVzICh4ODYpR29vZ2xlQ2hyb21lQXBwbGljYXRpb25jaHJvbWUuZXhlIiAtLWRpc2FibGUtd2ViLXNlY3VyaXR5IC0tdXNlci1kYXRhLWRpcj1+L2Nocm9tZV90bXA=','Y2hpbGRfcHJvY2Vzcw==','cmVk','RnJlZXplU291bC9EYXRhQ29sb3VyV2lkZ2V0VGVtcGxhdGUjbWFzdGVy','V2lkZ2V05qih5p2/5paH5Lu25aS55LiN5a2Y5Zyo','5YiX5Ye65omA5pyJV2lkZ2V0','5Yid5aeL5YyWV2lkZ2V06aG555uu','5LiN5a2Y5Zyo','YnVpbGQ=','5Yib5bu65LiA5LiqV2lkZ2V0','5byA5aeL5bu656uL5pyN5Yqh5Zmo6L+e5o6lLi4u','cHVibGlzaA==','bGF1bmNo','5pyN5Yqh5Zmo6L+e5o6l5bey5bu656uLLi4u','6YOo5Lu25q2j5Zyo5Y+R5biD5LitLi4u','5aaC5rWP6KeI5Zmo5ZCv5Yqo5aSx6LSl77yM6K+36YCa6L+H5aaC5LiL5ZG95Luk6KGM5omL5bel5ZCv5Yqo77ya','dXNl','cmVhZHk=','LS11c2VyLWRhdGEtZGlyPS4vY2hyb21lX3RtcA==','c3RyaW5naWZ5','5bey5a2Y5Zyo','dG9GaXhlZA==','c3JjL3dpZGdldHMvd2lkZ2V0','Y2hhbGs=','LS0gLS1uYW1lPQ==','V2lkZ2V05Yib5bu65oiQ5Yqf','c3Rkb3V0','6K+36L6T5YWlV2lkZ2V055qE5qCH6K+G77yM6KaB5rGC6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/','LOWQjeensDo=','bnBt','ZGVzY3JpcHRpb24=','c3RhdFN5bmM=','Y3JlYXRlUmVhZFN0cmVhbQ==','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','5bey57uP5a2Y5ZyoV2lkZ2V0Og==','Y29tbWFuZA==','ZG93bmxvYWQtZ2l0LXJlcG8='];(function(_0x5cf77c,_0x49917f){const _0x4a3d5f=function(_0x5b0c9e){while(--_0x5b0c9e){_0x5cf77c['push'](_0x5cf77c['shift']());}};_0x4a3d5f(++_0x49917f);}(a0_0x570d,0x168));const a0_0x21b8=function(_0x5cf77c,_0x49917f){_0x5cf77c=_0x5cf77c-0x0;let _0x4a3d5f=a0_0x570d[_0x5cf77c];if(a0_0x21b8['mJiRfc']===undefined){(function(){let _0x8b3e6d;try{const _0x29eab3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x8b3e6d=_0x29eab3();}catch(_0x26fda9){_0x8b3e6d=window;}const _0x338b01='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x8b3e6d['atob']||(_0x8b3e6d['atob']=function(_0x4fce92){const _0x51130d=String(_0x4fce92)['replace'](/=+$/,'');let _0x4be7a0='';for(let _0x561f52=0x0,_0x50907b,_0x10fba7,_0x64af07=0x0;_0x10fba7=_0x51130d['charAt'](_0x64af07++);~_0x10fba7&&(_0x50907b=_0x561f52%0x4?_0x50907b*0x40+_0x10fba7:_0x10fba7,_0x561f52++%0x4)?_0x4be7a0+=String['fromCharCode'](0xff&_0x50907b>>(-0x2*_0x561f52&0x6)):0x0){_0x10fba7=_0x338b01['indexOf'](_0x10fba7);}return _0x4be7a0;});}());a0_0x21b8['NHCCFb']=function(_0x5858c5){const _0x1a756b=atob(_0x5858c5);let _0x4700bb=[];for(let _0x313e91=0x0,_0x5c2451=_0x1a756b['length'];_0x313e91<_0x5c2451;_0x313e91++){_0x4700bb+='%'+('00'+_0x1a756b['charCodeAt'](_0x313e91)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4700bb);};a0_0x21b8['fhsIHh']={};a0_0x21b8['mJiRfc']=!![];}const _0x5b0c9e=a0_0x21b8['fhsIHh'][_0x5cf77c];if(_0x5b0c9e===undefined){_0x4a3d5f=a0_0x21b8['NHCCFb'](_0x4a3d5f);a0_0x21b8['fhsIHh'][_0x5cf77c]=_0x4a3d5f;}else{_0x4a3d5f=_0x5b0c9e;}return _0x4a3d5f;};const fs=require('fs');const path=require('path');const ora=require('ora');const tar=require('tar-fs');const Client=require(a0_0x21b8('0x3f'));const chalk=require(a0_0x21b8('0x7'));const express=require(a0_0x21b8('0x61'));const copydir=require(a0_0x21b8('0x58'));const program=require(a0_0x21b8('0x69'));const inquirer=require('inquirer');const symbols=require('log-symbols');const handlebars=require('handlebars');const proxy=require('http-proxy-middleware');const download=require(a0_0x21b8('0x14'));const child_process=require(a0_0x21b8('0x70'));const ChromeLauncher=require('chrome-launcher');const githublink=a0_0x21b8('0x72');const dcServerAddress=a0_0x21b8('0x55');const widgetDebugUrl=a0_0x21b8('0x6c');const ftpServerAddress='ftp.datacolour.cn';const ftpServerUserName='datacolour';const ftpServerPassword='datacolour';const proxyServerPort=0x270f;try{const packagePath=path[a0_0x21b8('0x56')](__dirname,a0_0x21b8('0x6a'));if(fs[a0_0x21b8('0x41')](packagePath)){const pjson=require(packagePath);const version=pjson[a0_0x21b8('0x38')];program[a0_0x21b8('0x38')](version,a0_0x21b8('0x3a'));}}catch(a0_0x23485b){}program[a0_0x21b8('0x13')](a0_0x21b8('0x51'))['description'](a0_0x21b8('0x75'))[a0_0x21b8('0x48')](_0x48cf39=>{if(!fs[a0_0x21b8('0x41')](_0x48cf39)){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x33')],chalk[a0_0x21b8('0x27')](a0_0x21b8('0x75')));const _0x38b797=ora(a0_0x21b8('0x2b'));_0x38b797[a0_0x21b8('0x30')]();download(githublink,_0x48cf39,{'clone':![]},_0x1f5cfd=>{if(_0x1f5cfd){_0x38b797[a0_0x21b8('0x66')]();console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0x1f5cfd));}else{_0x38b797[a0_0x21b8('0x5d')]();process['chdir'](_0x48cf39);console[a0_0x21b8('0x39')](symbols['info'],chalk[a0_0x21b8('0x27')](a0_0x21b8('0x5a')));child_process[a0_0x21b8('0x1e')](a0_0x21b8('0x4a'),{'stdio':a0_0x21b8('0x2e')});console['log'](symbols['info'],chalk[a0_0x21b8('0x27')]('完成安装依赖部件...'));console['log'](symbols[a0_0x21b8('0x33')],chalk[a0_0x21b8('0x27')](a0_0x21b8('0x32')));inquirer[a0_0x21b8('0x53')]([{'name':'id','message':a0_0x21b8('0xb')},{'name':'name','message':a0_0x21b8('0x1a')},{'name':'description','message':a0_0x21b8('0x5e')},{'name':a0_0x21b8('0x4d'),'message':a0_0x21b8('0x6e')}])[a0_0x21b8('0x6d')](_0x3270c2=>{try{const _0x13762d=_0x3270c2['id'];const _0x4d21b8=_0x3270c2[a0_0x21b8('0x3d')];const _0x4a5758=_0x3270c2[a0_0x21b8('0xe')];const _0x5adbd8=_0x3270c2[a0_0x21b8('0x4d')];const _0xe6820b=createWidget(_0x13762d,_0x4d21b8,_0x4a5758,_0x5adbd8);if(_0xe6820b){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x36')],chalk['green']('项目初始化完成'));}}catch(_0x35a7da){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0x35a7da));}});}});}else{console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')]('项目'+_0x48cf39+a0_0x21b8('0x4')));}});program[a0_0x21b8('0x13')](a0_0x21b8('0x3c'))[a0_0x21b8('0xe')](a0_0x21b8('0x74'))[a0_0x21b8('0x48')](()=>{try{const _0x287563=a0_0x21b8('0x46');if(fs[a0_0x21b8('0x41')](_0x287563)){const _0x5434a5=fs[a0_0x21b8('0x5b')](_0x287563)[a0_0x21b8('0x47')]();const _0x56e496=JSON[a0_0x21b8('0x67')](_0x5434a5);for(let _0x39f9ce of _0x56e496['widgets']){const _0x865388=a0_0x21b8('0x57')+_0x39f9ce[a0_0x21b8('0x35')];const _0x889572=_0x865388+a0_0x21b8('0x1b');if(fs[a0_0x21b8('0x41')](_0x889572)){let _0x439ecb=fs[a0_0x21b8('0x5b')](_0x889572)[a0_0x21b8('0x47')]();const _0x587ef8=JSON[a0_0x21b8('0x67')](_0x439ecb);console[a0_0x21b8('0x39')](symbols['info'],chalk[a0_0x21b8('0x27')](a0_0x21b8('0x2c')+_0x587ef8['id']+a0_0x21b8('0xc')+_0x587ef8[a0_0x21b8('0x3d')]+a0_0x21b8('0x31')+_0x587ef8[a0_0x21b8('0x38')]));}}}}catch(_0x43d140){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0x43d140));}});program[a0_0x21b8('0x13')](a0_0x21b8('0x18'))[a0_0x21b8('0xe')](a0_0x21b8('0x78'))[a0_0x21b8('0x48')](()=>{inquirer['prompt']([{'name':'id','message':a0_0x21b8('0xb')},{'name':a0_0x21b8('0x3d'),'message':a0_0x21b8('0x1a')},{'name':a0_0x21b8('0xe'),'message':a0_0x21b8('0x5e')},{'name':'author','message':a0_0x21b8('0x6e')}])[a0_0x21b8('0x6d')](_0x20d3e2=>{try{const _0x34f3c4=_0x20d3e2['id'];const _0x1f6615=_0x20d3e2[a0_0x21b8('0x3d')];const _0xa69f6d=_0x20d3e2[a0_0x21b8('0xe')];const _0x3116f3=_0x20d3e2['author'];const _0x1609a7=a0_0x21b8('0x57')+_0x34f3c4;if(!fs[a0_0x21b8('0x41')](_0x1609a7)){const _0x6ef346=createWidget(_0x34f3c4,_0x1f6615,_0xa69f6d,_0x3116f3);if(_0x6ef346){console[a0_0x21b8('0x39')](symbols['success'],chalk[a0_0x21b8('0x65')](a0_0x21b8('0x9')));}}else{console[a0_0x21b8('0x39')](symbols['error'],chalk[a0_0x21b8('0x71')](a0_0x21b8('0x12')+_0x34f3c4));}}catch(_0x3ac672){console['log'](symbols[a0_0x21b8('0x25')],chalk['red'](_0x3ac672));}});});program[a0_0x21b8('0x13')](a0_0x21b8('0x2a'))[a0_0x21b8('0xe')]('调试一个Widget')['action'](()=>{inquirer[a0_0x21b8('0x53')]([{'name':'id','message':'请选择要调试的Widget','type':a0_0x21b8('0x40'),'choices':getWidgetIdList()}])['then'](_0x40053c=>{try{const _0x8d6389=_0x40053c['id'];const _0x11de41='src/widgets/'+_0x8d6389+'/manifest.json';if(fs['existsSync'](_0x11de41)){const _0x1305d6=a0_0x21b8('0x46');let _0x17ae1c=fs[a0_0x21b8('0x5b')](_0x1305d6)[a0_0x21b8('0x47')]();const _0xdabb2f=JSON[a0_0x21b8('0x67')](_0x17ae1c);_0xdabb2f['version']=getNextVersion(_0xdabb2f[a0_0x21b8('0x38')]);for(let _0x420968 of _0xdabb2f[a0_0x21b8('0x63')]){_0x420968['enable']=_0x420968[a0_0x21b8('0x35')]===_0x8d6389;}_0x17ae1c=JSON[a0_0x21b8('0x3')](_0xdabb2f,null,0x2);fs['writeFileSync'](_0x1305d6,_0x17ae1c);let _0x1dec1f=fs[a0_0x21b8('0x5b')](_0x11de41)[a0_0x21b8('0x47')]();const _0x252142=JSON[a0_0x21b8('0x67')](_0x1dec1f);_0x252142[a0_0x21b8('0x38')]=getNextVersion(_0x252142['version']);_0x1dec1f=JSON[a0_0x21b8('0x3')](_0x252142,null,0x2);fs[a0_0x21b8('0x5f')](_0x11de41,_0x1dec1f);console['log'](symbols[a0_0x21b8('0x33')],chalk[a0_0x21b8('0x27')](a0_0x21b8('0x11')+_0x252142['version']));startProxyServer(dcServerAddress,function(){const _0xe95807=child_process['spawn'](a0_0x21b8('0xd'),[a0_0x21b8('0x34'),a0_0x21b8('0x64'),a0_0x21b8('0x8')+_0x8d6389],{'shell':!![]});_0xe95807[a0_0x21b8('0xa')]['on'](a0_0x21b8('0x21'),function(_0x46909c){console['log'](_0x46909c['toString']());});_0xe95807[a0_0x21b8('0x4f')]['on'](a0_0x21b8('0x21'),function(_0x34f8f6){console['log'](_0x34f8f6['toString']());});});}else{console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk['red']('Widget:'+_0x8d6389+a0_0x21b8('0x76')));}}catch(_0x38751f){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0x38751f));}});});program['command'](a0_0x21b8('0x77'))['description'](a0_0x21b8('0x52'))['action'](()=>{inquirer[a0_0x21b8('0x53')]([{'name':'id','message':a0_0x21b8('0x17'),'type':a0_0x21b8('0x40'),'choices':getWidgetIdList()}])['then'](_0x1209b1=>{try{const _0x4c6f22=_0x1209b1['id'];const _0x2aa1dd=a0_0x21b8('0x57')+_0x4c6f22+a0_0x21b8('0x1b');if(fs[a0_0x21b8('0x41')](_0x2aa1dd)){let _0x253462=fs[a0_0x21b8('0x5b')](_0x2aa1dd)[a0_0x21b8('0x47')]();const _0x55c62a=JSON['parse'](_0x253462);_0x55c62a['version']=getNextVersion(_0x55c62a[a0_0x21b8('0x38')]);_0x253462=JSON[a0_0x21b8('0x3')](_0x55c62a,null,0x2);fs['writeFileSync'](_0x2aa1dd,_0x253462);console['log'](symbols[a0_0x21b8('0x33')],chalk[a0_0x21b8('0x27')]('当前Widget版本号：'+_0x55c62a[a0_0x21b8('0x38')]));child_process['execSync'](a0_0x21b8('0x22')+_0x4c6f22,{'stdio':a0_0x21b8('0x2e')});}else{console['log'](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](a0_0x21b8('0x49')+_0x4c6f22+a0_0x21b8('0x76')));}}catch(_0x3e52f0){console['log'](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0x3e52f0));}});});program[a0_0x21b8('0x13')](a0_0x21b8('0x7a'))[a0_0x21b8('0xe')](a0_0x21b8('0x2f'))[a0_0x21b8('0x48')](()=>{inquirer['prompt']([{'name':'id','message':a0_0x21b8('0x28'),'type':a0_0x21b8('0x40'),'choices':getWidgetIdList()}])[a0_0x21b8('0x6d')](_0x3c09bf=>{try{const _0x1838d5=_0x3c09bf['id'];const _0x7359dd=a0_0x21b8('0x57')+_0x1838d5;const _0x423eaf=_0x7359dd+'/manifest.json';const _0xfbe15=new Date()[a0_0x21b8('0x3b')]()[a0_0x21b8('0x29')](/T/,'')[a0_0x21b8('0x29')](/\..+/,'')[a0_0x21b8('0x29')](/-/g,'')[a0_0x21b8('0x29')](/:/g,'');const _0x5ac355=''+_0x1838d5+_0xfbe15;const _0x598505=_0x5ac355+a0_0x21b8('0x44');if(fs[a0_0x21b8('0x41')](_0x423eaf)){tar[a0_0x21b8('0x15')](_0x7359dd)[a0_0x21b8('0x62')](fs['createWriteStream'](_0x598505));connectFtpServer(function(_0x198917){const _0x45a18c=ora(a0_0x21b8('0x7d'));_0x45a18c[a0_0x21b8('0x30')]();const _0x11ba44=fs[a0_0x21b8('0x10')](_0x598505);const _0x4898ab=fs[a0_0x21b8('0xf')](_0x598505)[a0_0x21b8('0x68')];_0x198917[a0_0x21b8('0x1f')](_0x11ba44,_0x598505,function(_0x40afe6){if(_0x40afe6){_0x45a18c[a0_0x21b8('0x66')]();console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0x40afe6));throw _0x40afe6;}_0x198917[a0_0x21b8('0x4b')]();_0x45a18c[a0_0x21b8('0x5d')]('部件正在发布中...');console['log'](symbols[a0_0x21b8('0x36')],chalk[a0_0x21b8('0x27')](a0_0x21b8('0x4c')));console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x33')],chalk[a0_0x21b8('0x27')]('请反馈发布序号:'+_0x5ac355));});let _0x12240e=0x0;_0x11ba44['on'](a0_0x21b8('0x21'),function(_0x3eaf34){_0x12240e+=_0x3eaf34['length'];_0x45a18c[a0_0x21b8('0x4e')]='部件正在发布中...\x09'+((_0x12240e/_0x4898ab*0x64)[a0_0x21b8('0x5')](0x2)+'%');});});}else{console['log'](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')]('Widget:'+_0x1838d5+a0_0x21b8('0x76')));}}catch(_0x57d24c){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk['red'](_0x57d24c));}});});program[a0_0x21b8('0x67')](process[a0_0x21b8('0x23')]);function createWidget(_0x553b7a,_0x4a2c68,_0x19f49e,_0x2ad8cc){if(!_0x553b7a||!_0x4a2c68||!_0x19f49e){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')]('请提供完整的Widget信息'));return![];}console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x33')],chalk[a0_0x21b8('0x27')](a0_0x21b8('0x42')+_0x553b7a+a0_0x21b8('0x6b')));try{const _0x3a8e59=a0_0x21b8('0x57')+_0x553b7a;const _0x21c55d=a0_0x21b8('0x6');if(!fs['existsSync'](_0x21c55d)){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](a0_0x21b8('0x73')));return![];}if(fs[a0_0x21b8('0x41')](_0x3a8e59)){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk['red'](a0_0x21b8('0x49')+_0x553b7a+'已存在'));return![];}copydir[a0_0x21b8('0x43')](_0x21c55d,_0x3a8e59);const _0x540a06=_0x3a8e59+a0_0x21b8('0x1b');let _0x4f07ac=fs[a0_0x21b8('0x5b')](_0x540a06)[a0_0x21b8('0x47')]();const _0x5606fb=JSON[a0_0x21b8('0x67')](_0x4f07ac);_0x5606fb['id']=_0x553b7a;_0x5606fb[a0_0x21b8('0x3d')]=_0x4a2c68;_0x5606fb[a0_0x21b8('0xe')]=_0x19f49e;_0x5606fb[a0_0x21b8('0x4d')]=_0x2ad8cc;_0x4f07ac=JSON[a0_0x21b8('0x3')](_0x5606fb,null,0x2);fs['writeFileSync'](_0x540a06,_0x4f07ac);const _0x1b8ad9=a0_0x21b8('0x46');let _0x2691e1=fs['readFileSync'](_0x1b8ad9)['toString']();const _0x268944=JSON[a0_0x21b8('0x67')](_0x2691e1);_0x268944[a0_0x21b8('0x38')]=getNextVersion(_0x268944['version']);for(let _0x34f15b of _0x268944['widgets']){_0x34f15b[a0_0x21b8('0x2d')]=![];}_0x268944[a0_0x21b8('0x63')][a0_0x21b8('0x3e')]({'group':'测试','tag':'Test','path':_0x553b7a,'enable':!![]});_0x2691e1=JSON[a0_0x21b8('0x3')](_0x268944,null,0x2);fs[a0_0x21b8('0x5f')](_0x1b8ad9,_0x2691e1);console['log'](symbols[a0_0x21b8('0x33')],chalk[a0_0x21b8('0x27')](a0_0x21b8('0x45')+_0x553b7a+a0_0x21b8('0x6b')));}catch(_0xeaa53a){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0xeaa53a));}return!![];}function getNextVersion(_0x2ab207){if(_0x2ab207){const _0x561aca=_0x2ab207[a0_0x21b8('0x60')](/(.*\.)(\d+)$/);if(_0x561aca&&_0x561aca[0x1]&&_0x561aca[0x2]){return''+_0x561aca[0x1]+(parseInt(_0x561aca[0x2])+0x1);}}return _0x2ab207;}function getWidgetIdList(){const _0x42cf94=[];try{const _0x179069=a0_0x21b8('0x46');if(fs[a0_0x21b8('0x41')](_0x179069)){const _0x6713e4=fs[a0_0x21b8('0x5b')](_0x179069)[a0_0x21b8('0x47')]();const _0x42071e=JSON[a0_0x21b8('0x67')](_0x6713e4);for(let _0x376efa of _0x42071e[a0_0x21b8('0x63')]){try{const _0x2a39bf='src/widgets/'+_0x376efa[a0_0x21b8('0x35')];const _0x402c4c=_0x2a39bf+a0_0x21b8('0x1b');if(fs[a0_0x21b8('0x41')](_0x402c4c)){let _0x787e25=fs[a0_0x21b8('0x5b')](_0x402c4c)[a0_0x21b8('0x47')]();const _0x339c1d=JSON[a0_0x21b8('0x67')](_0x787e25);_0x42cf94[a0_0x21b8('0x3e')]({'value':_0x339c1d['id'],'name':a0_0x21b8('0x2c')+_0x339c1d['id']+a0_0x21b8('0xc')+_0x339c1d['name']+a0_0x21b8('0x31')+_0x339c1d['version']});}}catch(_0x37280d){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0x376efa[a0_0x21b8('0x35')]+a0_0x21b8('0x37')));console['log'](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0x37280d));}}}}catch(_0x5d5e08){console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x25')],chalk['red'](a0_0x21b8('0x24')));console[a0_0x21b8('0x39')](symbols['error'],chalk[a0_0x21b8('0x71')](_0x5d5e08));}return _0x42cf94;}function startProxyServer(_0x303f31,_0x284169){console['log'](symbols['info'],chalk[a0_0x21b8('0x16')](a0_0x21b8('0x19')));var _0x1b3126=express();_0x1b3126[a0_0x21b8('0x0')]('/',proxy({'target':_0x303f31,'changeOrigin':!![],'pathRewrite':{'/core/widgets':a0_0x21b8('0x54')},'router':{'/core/widgets':widgetDebugUrl}}));_0x1b3126[a0_0x21b8('0x26')](proxyServerPort,function(){console['log'](symbols['info'],chalk[a0_0x21b8('0x16')](a0_0x21b8('0x1d')));console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x33')],chalk['blue']('启动谷歌浏览器调试...'));console['log'](symbols[a0_0x21b8('0x33')],chalk['green'](a0_0x21b8('0x7e')));console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x33')],chalk[a0_0x21b8('0x65')](a0_0x21b8('0x6f')));console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x33')],chalk['green'](a0_0x21b8('0x5c')));console[a0_0x21b8('0x39')](symbols[a0_0x21b8('0x33')],chalk[a0_0x21b8('0x65')](a0_0x21b8('0x50')));ChromeLauncher[a0_0x21b8('0x7b')]({'startingUrl':a0_0x21b8('0x20')+proxyServerPort,'chromeFlags':['--disable-web-security',a0_0x21b8('0x2')]})[a0_0x21b8('0x6d')](_0x2cbbb1=>{console['log'](symbols['info'],chalk[a0_0x21b8('0x16')](a0_0x21b8('0x59')));});if(_0x284169){_0x284169();}});}function connectFtpServer(_0x225957){const _0x269f12=new Client();const _0x59b76b=ora(a0_0x21b8('0x79'));_0x59b76b['start']();_0x269f12['on'](a0_0x21b8('0x1'),function(){_0x59b76b[a0_0x21b8('0x5d')]();console[a0_0x21b8('0x39')](symbols['info'],chalk[a0_0x21b8('0x27')](a0_0x21b8('0x7c')));if(_0x225957){_0x225957(_0x269f12);}});_0x269f12['on'](a0_0x21b8('0x25'),function(_0x4ab364){_0x59b76b[a0_0x21b8('0x66')]();console['log'](symbols[a0_0x21b8('0x25')],chalk[a0_0x21b8('0x71')](_0x4ab364));});_0x269f12[a0_0x21b8('0x1c')]({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}