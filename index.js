#!/usr/bin/env node

const a0_0x304a=['5YiX5Ye65omA5pyJV2lkZ2V0','c3Bhd24=','LnNyYy50YXI=','bmFtZQ==','YnVpbGQv','5bey5a2Y5Zyo5a+55bqU55uu5b2V','aG9zdA==','6K+36YCJ5oup6KaB5Y+R5biD55qEV2lkZ2V0','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','d2lkZ2V0cw==','c3JjL3dpZGdldHMv','5pyq5om+5Yiw5Yy56YWN55qEd2lkZ2V077ya','dG9GaXhlZA==','bnBtIGluc3RhbGw=','aHR0cDovLzEyNy4wLjAuMTo4MDg4Lw==','LS1kaXNhYmxlLXdlYi1zZWN1cml0eQ==','Y3JlYXRlUmVhZFN0cmVhbQ==','RnJlZXplU291bC9EYXRhQ29sb3VyV2lkZ2V0VGVtcGxhdGUjbWFzdGVy','TGludXg6IC9vcHQvZ29vZ2xlL2Nocm9tZS9jaHJvbWUgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9L3RtcC9jaHJvbWVfdG1w','6K+35Y+N6aaI5Y+R5biD5bqP5Y+3Og==','ZmFpbA==','bGlzdA==','aHR0cDovLzM5LjEwMS4xMzguNDM6ODA4MA==','cGF0aA==','cHJvbXB0','cnVu','ZnRwLmRhdGFjb2xvdXIuY24=','cHVibGlzaA==','ZXJyb3I=','5b2T5YmNV2lkZ2V05qCH6K+G77ya','c3VjY2VlZA==','T1NYOiBvcGVuIC1uIC1hIC9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSAtLWFyZ3MgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9Ii90bXAvY2hyb21lX3RtcCI=','5q2j5Zyo5Yib5bu6V2lkZ2V0Og==','5q2j5Zyo5ZCv5Yqo5Luj55CG5pyN5YqhLi4u','dGV4dA==','cmVk','cmVhZEZpbGVTeW5j','5pyN5Yqh5Zmo6L+e5o6l5bey5bu656uLLi4u','ZW5hYmxl','cGFjaw==','5Luj55CG5pyN5Yqh5Zmo5bey5ZCv5YqoLi4u','cmVwbGFjZQ==','dGFyLWZz','YXV0aG9y','bG9nLXN5bWJvbHM=','5Yid5aeL5YyW5LiA5LiqV2lkZ2V0','5aaC5rWP6KeI5Zmo5ZCv5Yqo5aSx6LSl77yM6K+36YCa6L+H5aaC5LiL5ZG95Luk6KGM5omL5bel5ZCv5Yqo77ya','Y29tbWFuZA==','ZGF0YWNvbG91cg==','c3RhcnQ=','6K+36L6T5YWlV2lkZ2V055qE5ZCN56ew77yM6KaB5rGC566A55+t55qE5Lit5paH5ZCN56ew5a6a5LmJ','c3RyaW5naWZ5','LS1kaXNrLWNhY2hlLXNpemU9MQ==','dGhlbg==','aW5mbw==','5a6M5oiQ5Yib5bu6V2lkZ2V0Og==','Y2hhbGs=','Ymx1ZQ==','5LiN5a2Y5Zyo','5Yid5aeL5YyWV2lkZ2V06aG555uu','L21hbmlmZXN0Lmpzb24=','d2hpdGU=','ZXhpc3RzU3luYw==','aW5pdCA8bmFtZT4=','6K+356Gu6K6k5piv5ZCm5o+Q5Lqk6Iez5YWs5YWx5o+S5Lu25Lit5b+D77yM6K+36L6T5YWleS9uKOm7mOiupG4p','bnBt','LOWQjeensDo=','LS0gLS1wYXRoPQ==','aHR0cDovLzEyNy4wLjAuMTo=','L19fcGF0aF9fLnR4dA==','cHVibGlzaC8=','dmVyc2lvbg==','ZW5k','aW5oZXJpdA==','Y29tbWFuZGVy','6K+35o+Q5L6b5a6M5pW055qEV2lkZ2V05L+h5oGv','bnBtIHJ1biBidWlsZC13aWRnZXQ6cHJvIC0tIC0tcGF0aD0=','bWtkaXJTeW5j','Y3JlYXRl','6K+36L6T5YWlV2lkZ2V055qE5qCH6K+G77yM6KaB5rGC6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/','dG9JU09TdHJpbmc=','LS11c2VyLWRhdGEtZGlyPS4vY2hyb21lX3RtcA==','c3luYw==','c3Rkb3V0','cmVzb2x2ZQ==','5Yib5bu65LiA5LiqV2lkZ2V0','aW5xdWlyZXI=','ZnRw','LXYsIC0tdmVyc2lvbg==','dGFn','Y2hpbGRfcHJvY2Vzcw==','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','ZXhlY1N5bmM=','Y29ubmVjdA==','ZGF0YQ==','Y3JlYXRlV3JpdGVTdHJlYW0=','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4u','c3VjY2Vzcw==','cGlwZQ==','Z3JlZW4=','5p6E5bu65omA5pyJV2lkZ2V0cw==','5bey5a2Y5Zyo','6LC35q2M5rWP6KeI5Zmo5ZCv5Yqo5oiQ5YqfLi4u','dG9TdHJpbmc=','6K+36L6T5YWlV2lkZ2V055qE5o+P6L+w77yM6KaB5rGC566A55+t55qE5Lit5paH5o+P6L+w5L+h5oGv','V2luZG93OiAiQzpQcm9ncmFtIEZpbGVzICh4ODYpR29vZ2xlQ2hyb21lQXBwbGljYXRpb25jaHJvbWUuZXhlIiAtLWRpc2FibGUtd2ViLXNlY3VyaXR5IC0tdXNlci1kYXRhLWRpcj1+L2Nocm9tZV90bXA=','bG9n','YXJndg==','ZG93bmxvYWQtZ2l0LXJlcG8=','5a6M5oiQ5p6E5bu6V2lkZ2V077ya','cGFyc2U=','ZGVidWc=','aGFuZGxlYmFycw==','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4uCQ==','ZGVzY3JpcHRpb24=','L3dpZGdldHM=','c2l6ZQ==','V2lkZ2V05Yib5bu65oiQ5Yqf','aHR0cC1wcm94eS1taWRkbGV3YXJl','Li4u','5ZCv5Yqo6LC35q2M5rWP6KeI5Zmo6LCD6K+VLi4u','5byA5aeL5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','dXNl','6YOo5Lu25bey5oiQ5Yqf5o+Q5LqkLi4u','VGVzdA==','ZGlzdC93aWRnZXRzLw==','6LCD6K+V5LiA5LiqV2lkZ2V0','5qCH6K+GOg==','bGlzdGVu','YnVpbGQ=','6K+36L6T5YWl5bmz5Y+w5pyN5Yqh5Zyw5Z2A77yM6buY6K6k6LCD55So5YWs5YWx5pyN5Yqh','c3RhcnQtd2lkZ2V0','6K+36L6T5YWl5L2c6ICF5ZCN56ew77yM5aaC77yaRnJlZXplU291bDxmcmVlemVzb3VsQGdtYWlsLmNvbT4=','cmF3bGlzdA==','YWN0aW9u','5Y+R5biD5LiA5LiqV2lkZ2V0','5a6M5oiQ5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','bWF0Y2g=','LS1tZWRpYS1jYWNoZS1zaXplPTE=','Y2hkaXI=','cGFja2FnZS5qc29u','c3JjL3dpZGdldHMvd2lkZ2V0','b3Jh','V2lkZ2V0Og==','Y2hyb21lLWxhdW5jaGVy','d3JpdGVGaWxlU3luYw=='];(function(_0x96c64a,_0x5f083c){const _0x529eb5=function(_0x46f67e){while(--_0x46f67e){_0x96c64a['push'](_0x96c64a['shift']());}};_0x529eb5(++_0x5f083c);}(a0_0x304a,0x18d));const a0_0x1fd5=function(_0x96c64a,_0x5f083c){_0x96c64a=_0x96c64a-0x0;let _0x529eb5=a0_0x304a[_0x96c64a];if(a0_0x1fd5['AZiMbJ']===undefined){(function(){const _0x328db8=function(){let _0x4c3c2c;try{_0x4c3c2c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4de074){_0x4c3c2c=window;}return _0x4c3c2c;};const _0x80410b=_0x328db8();const _0x3866c5='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x80410b['atob']||(_0x80410b['atob']=function(_0x44ce0b){const _0x35fc1f=String(_0x44ce0b)['replace'](/=+$/,'');let _0x120374='';for(let _0x436439=0x0,_0x2bdb73,_0x9f65c,_0x3c89ea=0x0;_0x9f65c=_0x35fc1f['charAt'](_0x3c89ea++);~_0x9f65c&&(_0x2bdb73=_0x436439%0x4?_0x2bdb73*0x40+_0x9f65c:_0x9f65c,_0x436439++%0x4)?_0x120374+=String['fromCharCode'](0xff&_0x2bdb73>>(-0x2*_0x436439&0x6)):0x0){_0x9f65c=_0x3866c5['indexOf'](_0x9f65c);}return _0x120374;});}());a0_0x1fd5['DvkmII']=function(_0x41f4b5){const _0x3e01d1=atob(_0x41f4b5);let _0x16ebff=[];for(let _0x2628ce=0x0,_0x32ba85=_0x3e01d1['length'];_0x2628ce<_0x32ba85;_0x2628ce++){_0x16ebff+='%'+('00'+_0x3e01d1['charCodeAt'](_0x2628ce)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x16ebff);};a0_0x1fd5['QxPFmD']={};a0_0x1fd5['AZiMbJ']=!![];}const _0x46f67e=a0_0x1fd5['QxPFmD'][_0x96c64a];if(_0x46f67e===undefined){_0x529eb5=a0_0x1fd5['DvkmII'](_0x529eb5);a0_0x1fd5['QxPFmD'][_0x96c64a]=_0x529eb5;}else{_0x529eb5=_0x46f67e;}return _0x529eb5;};const fs=require('fs');const fse=require('fs-extra');const path=require('path');const ora=require(a0_0x1fd5('0x25'));const tar=require(a0_0x1fd5('0x53'));const Client=require(a0_0x1fd5('0x80'));const chalk=require(a0_0x1fd5('0x61'));const express=require('express');const copydir=require('copy-dir');const program=require(a0_0x1fd5('0x73'));const inquirer=require(a0_0x1fd5('0x7f'));const symbols=require(a0_0x1fd5('0x55'));const handlebars=require(a0_0x1fd5('0x7'));const proxy=require(a0_0x1fd5('0xd'));const download=require(a0_0x1fd5('0x3'));const child_process=require(a0_0x1fd5('0x83'));const ChromeLauncher=require(a0_0x1fd5('0x27'));const githublink=a0_0x1fd5('0x3a');const dcServerAddress=a0_0x1fd5('0x3f');const widgetDebugUrl=a0_0x1fd5('0x37');const ftpServerAddress=a0_0x1fd5('0x43');const ftpServerUserName=a0_0x1fd5('0x59');const ftpServerPassword=a0_0x1fd5('0x59');const proxyServerPort=0x270f;try{const packagePath=path[a0_0x1fd5('0x7d')](__dirname,a0_0x1fd5('0x23'));if(fs[a0_0x1fd5('0x67')](packagePath)){const pjson=require(packagePath);const version=pjson[a0_0x1fd5('0x70')];program['version'](version,a0_0x1fd5('0x81'));}}catch(a0_0x14c00b){}program[a0_0x1fd5('0x58')](a0_0x1fd5('0x68'))[a0_0x1fd5('0x9')](a0_0x1fd5('0x64'))[a0_0x1fd5('0x1d')](_0x1cc217=>{if(!fs[a0_0x1fd5('0x67')](_0x1cc217)){console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x66')]('初始化Widget项目'));const _0x454eef=ora('正在下载Widget模板...');_0x454eef[a0_0x1fd5('0x5a')]();download(githublink,_0x1cc217,{'clone':![]},_0x4240ef=>{if(_0x4240ef){_0x454eef[a0_0x1fd5('0x3d')]();console[a0_0x1fd5('0x1')](symbols['error'],chalk[a0_0x1fd5('0x4c')](_0x4240ef));}else{_0x454eef['succeed']();process[a0_0x1fd5('0x22')](_0x1cc217);console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x66')](a0_0x1fd5('0x10')));child_process[a0_0x1fd5('0x85')](a0_0x1fd5('0x36'),{'stdio':a0_0x1fd5('0x72')});console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk['white'](a0_0x1fd5('0x1f')));console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x66')](a0_0x1fd5('0x56')));inquirer[a0_0x1fd5('0x41')]([{'name':'id','message':'请输入Widget的标识，要求英文、数字、下划线'},{'name':a0_0x1fd5('0x2c'),'message':'请输入Widget的名称，要求简短的中文名称定义'},{'name':'description','message':a0_0x1fd5('0x91')},{'name':a0_0x1fd5('0x54'),'message':'请输入作者名称，如：FreezeSoul<freezesoul@gmail.com>'}])[a0_0x1fd5('0x5e')](_0x461b5b=>{try{const _0x1ce56c=_0x461b5b['id'];const _0x528cef=_0x461b5b['name'];const _0x433493=_0x461b5b['description'];const _0x33e557=_0x461b5b[a0_0x1fd5('0x54')];const _0x2bbb12=createWidget(_0x1ce56c,_0x528cef,_0x433493,_0x33e557);if(_0x2bbb12){console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x8a')],chalk[a0_0x1fd5('0x8c')]('Widget初始化完成'));}}catch(_0x494917){console[a0_0x1fd5('0x1')](symbols['error'],chalk[a0_0x1fd5('0x4c')](_0x494917));}});}});}else{console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x45')],chalk['red']('项目'+_0x1cc217+a0_0x1fd5('0x8e')));}});program[a0_0x1fd5('0x58')](a0_0x1fd5('0x3e'))[a0_0x1fd5('0x9')](a0_0x1fd5('0x29'))['action'](()=>{try{const _0x612736='src/widgets/widgets.json';if(fs['existsSync'](_0x612736)){const _0x4380e0=fs['readFileSync'](_0x612736)[a0_0x1fd5('0x90')]();const _0x3a6716=JSON[a0_0x1fd5('0x5')](_0x4380e0);for(let _0x38d4f8 of _0x3a6716[a0_0x1fd5('0x32')]){const _0x22cb06=a0_0x1fd5('0x33')+_0x38d4f8[a0_0x1fd5('0x40')];const _0x30771b=_0x22cb06+a0_0x1fd5('0x65');if(fs['existsSync'](_0x30771b)){let _0x2581e7=fs[a0_0x1fd5('0x4d')](_0x30771b)[a0_0x1fd5('0x90')]();const _0x580df3=JSON[a0_0x1fd5('0x5')](_0x2581e7);console[a0_0x1fd5('0x1')](symbols['info'],chalk[a0_0x1fd5('0x66')]('标识:'+_0x580df3['id']+a0_0x1fd5('0x6b')+_0x580df3[a0_0x1fd5('0x2c')]+',版本:'+_0x580df3['version']));}}}}catch(_0x126f6e){console['log'](symbols['error'],chalk[a0_0x1fd5('0x4c')](_0x126f6e));}});program[a0_0x1fd5('0x58')](a0_0x1fd5('0x77'))['description'](a0_0x1fd5('0x7e'))[a0_0x1fd5('0x1d')](()=>{inquirer['prompt']([{'name':'id','message':a0_0x1fd5('0x78')},{'name':a0_0x1fd5('0x2c'),'message':a0_0x1fd5('0x5b')},{'name':'description','message':'请输入Widget的描述，要求简短的中文描述信息'},{'name':a0_0x1fd5('0x54'),'message':a0_0x1fd5('0x1b')}])[a0_0x1fd5('0x5e')](_0x10fae5=>{try{const _0x3f0234=_0x10fae5['id'];const _0x54d57a=_0x10fae5[a0_0x1fd5('0x2c')];const _0x141eee=_0x10fae5[a0_0x1fd5('0x9')];const _0x50ac3f=_0x10fae5[a0_0x1fd5('0x54')];const _0x5d2d95=createWidget(_0x3f0234,_0x54d57a,_0x141eee,_0x50ac3f);if(_0x5d2d95){console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x8a')],chalk['green'](a0_0x1fd5('0xc')));}}catch(_0x1c360f){console[a0_0x1fd5('0x1')](symbols['error'],chalk['red'](_0x1c360f));}});});program['command'](a0_0x1fd5('0x6'))[a0_0x1fd5('0x9')](a0_0x1fd5('0x15'))[a0_0x1fd5('0x1d')](()=>{inquirer[a0_0x1fd5('0x41')]([{'name':'id','message':'请选择要调试的Widget','type':a0_0x1fd5('0x1c'),'choices':getWidgetsList()},{'name':a0_0x1fd5('0x2f'),'message':a0_0x1fd5('0x19')}])[a0_0x1fd5('0x5e')](_0x1ff9a8=>{try{const _0x52f164=_0x1ff9a8['id'];const _0x112aee=getWidgetPath(_0x52f164);const _0x393ba1=_0x1ff9a8['host']?_0x1ff9a8[a0_0x1fd5('0x2f')]:dcServerAddress;const _0x1125cc='src/widgets/'+_0x112aee+'/manifest.json';if(fs[a0_0x1fd5('0x67')](_0x1125cc)){const _0x200869='src/widgets/widgets.json';let _0x50ee32=fs[a0_0x1fd5('0x4d')](_0x200869)['toString']();const _0x3c82e6=JSON[a0_0x1fd5('0x5')](_0x50ee32);_0x3c82e6[a0_0x1fd5('0x70')]=getNextVersion(_0x3c82e6[a0_0x1fd5('0x70')]);for(let _0x34d88a of _0x3c82e6[a0_0x1fd5('0x32')]){_0x34d88a[a0_0x1fd5('0x4f')]=_0x34d88a[a0_0x1fd5('0x40')]===_0x112aee;}_0x50ee32=JSON[a0_0x1fd5('0x5c')](_0x3c82e6,null,0x2);fs[a0_0x1fd5('0x28')](_0x200869,_0x50ee32);let _0x2cad07=fs[a0_0x1fd5('0x4d')](_0x1125cc)[a0_0x1fd5('0x90')]();const _0x5267da=JSON[a0_0x1fd5('0x5')](_0x2cad07);_0x5267da[a0_0x1fd5('0x70')]=getNextVersion(_0x5267da[a0_0x1fd5('0x70')]);_0x2cad07=JSON['stringify'](_0x5267da,null,0x2);fs['writeFileSync'](_0x1125cc,_0x2cad07);console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x66')](a0_0x1fd5('0x84')+_0x5267da[a0_0x1fd5('0x70')]));startProxyServer(_0x393ba1,function(){const _0x516584=child_process[a0_0x1fd5('0x2a')](a0_0x1fd5('0x6a'),[a0_0x1fd5('0x42'),a0_0x1fd5('0x1a'),a0_0x1fd5('0x6c')+_0x112aee],{'shell':!![]});_0x516584[a0_0x1fd5('0x7c')]['on'](a0_0x1fd5('0x87'),function(_0x1cfeb0){console['log'](_0x1cfeb0[a0_0x1fd5('0x90')]());});_0x516584['stderr']['on'](a0_0x1fd5('0x87'),function(_0x18ad92){console[a0_0x1fd5('0x1')](_0x18ad92[a0_0x1fd5('0x90')]());});});}else{console['log'](symbols[a0_0x1fd5('0x45')],chalk['red'](a0_0x1fd5('0x26')+_0x52f164+a0_0x1fd5('0x63')));}}catch(_0x2deb68){console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](_0x2deb68));}});});program[a0_0x1fd5('0x58')](a0_0x1fd5('0x18'))[a0_0x1fd5('0x9')]('构建一个Widget')['action'](()=>{inquirer[a0_0x1fd5('0x41')]([{'name':'id','message':'请选择要构建的Widget','type':a0_0x1fd5('0x1c'),'choices':getWidgetsList()}])[a0_0x1fd5('0x5e')](_0xca2791=>{try{const _0x217930=_0xca2791['id'];const _0x5d3fcb=getWidgetPath(_0x217930);const _0xb542b8=a0_0x1fd5('0x33')+_0x5d3fcb+a0_0x1fd5('0x65');if(fs[a0_0x1fd5('0x67')](_0xb542b8)){let _0x591de5=fs['readFileSync'](_0xb542b8)['toString']();const _0x582c15=JSON[a0_0x1fd5('0x5')](_0x591de5);_0x582c15[a0_0x1fd5('0x70')]=getNextVersion(_0x582c15[a0_0x1fd5('0x70')]);_0x591de5=JSON[a0_0x1fd5('0x5c')](_0x582c15,null,0x2);fs['writeFileSync'](_0xb542b8,_0x591de5);console['log'](symbols[a0_0x1fd5('0x5f')],chalk['white']('当前Widget版本号：'+_0x582c15[a0_0x1fd5('0x70')]));child_process[a0_0x1fd5('0x85')](a0_0x1fd5('0x75')+_0x5d3fcb,{'stdio':a0_0x1fd5('0x72')});}else{console[a0_0x1fd5('0x1')](symbols['error'],chalk[a0_0x1fd5('0x4c')]('Widget:'+_0x217930+'不存在'));}}catch(_0x4a4f96){console[a0_0x1fd5('0x1')](symbols['error'],chalk[a0_0x1fd5('0x4c')](_0x4a4f96));}});});program[a0_0x1fd5('0x58')]('buildAll')[a0_0x1fd5('0x9')](a0_0x1fd5('0x8d'))[a0_0x1fd5('0x1d')](()=>{try{const _0x3d8a29=getWidgetsList();for(let _0x448d9d of _0x3d8a29){const _0x2cb33f=_0x448d9d['value'];const _0x344681=getWidgetPath(_0x2cb33f);const _0x338b75='src/widgets/'+_0x344681+a0_0x1fd5('0x65');if(fs[a0_0x1fd5('0x67')](_0x338b75)){let _0x59c7f=fs[a0_0x1fd5('0x4d')](_0x338b75)['toString']();const _0x2e9d4e=JSON['parse'](_0x59c7f);_0x2e9d4e[a0_0x1fd5('0x70')]=getNextVersion(_0x2e9d4e[a0_0x1fd5('0x70')]);_0x59c7f=JSON[a0_0x1fd5('0x5c')](_0x2e9d4e,null,0x2);fs[a0_0x1fd5('0x28')](_0x338b75,_0x59c7f);console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x66')](a0_0x1fd5('0x46')+_0x2cb33f));console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x66')]('当前Widget版本号：'+_0x2e9d4e[a0_0x1fd5('0x70')]));child_process[a0_0x1fd5('0x85')]('npm\x20run\x20build-widget:pro\x20--\x20--path='+_0x344681,{'stdio':a0_0x1fd5('0x72')});console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x8a')],chalk[a0_0x1fd5('0x8c')](a0_0x1fd5('0x4')+_0x2e9d4e[a0_0x1fd5('0x70')]));const _0x1f7f72=a0_0x1fd5('0x14')+_0x344681;const _0x32202b=a0_0x1fd5('0x2d')+_0x344681;if(!fs[a0_0x1fd5('0x67')](a0_0x1fd5('0x18'))){fs[a0_0x1fd5('0x76')](a0_0x1fd5('0x18'));}if(fs[a0_0x1fd5('0x67')](_0x1f7f72)){fse['moveSync'](_0x1f7f72,_0x32202b);}}else{console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](a0_0x1fd5('0x26')+_0x2cb33f+a0_0x1fd5('0x63')));}}}catch(_0x210dc7){console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](_0x210dc7));}});program['command'](a0_0x1fd5('0x44'))[a0_0x1fd5('0x9')](a0_0x1fd5('0x1e'))[a0_0x1fd5('0x1d')](()=>{inquirer[a0_0x1fd5('0x41')]([{'name':'id','message':a0_0x1fd5('0x30'),'type':a0_0x1fd5('0x1c'),'choices':getWidgetsList()},{'name':a0_0x1fd5('0x80'),'message':a0_0x1fd5('0x69')}])[a0_0x1fd5('0x5e')](_0x3aabb6=>{try{const _0x1ee06f=_0x3aabb6['id'];const _0xbec2ab=getWidgetPath(_0x1ee06f);const _0x46645=a0_0x1fd5('0x33')+_0xbec2ab;const _0x345fa2=a0_0x1fd5('0x14')+_0xbec2ab;const _0x414aac=_0x46645+a0_0x1fd5('0x65');const _0x5c31d4=new Date()[a0_0x1fd5('0x79')]()[a0_0x1fd5('0x52')](/T/,'')[a0_0x1fd5('0x52')](/\..+/,'')[a0_0x1fd5('0x52')](/-/g,'')[a0_0x1fd5('0x52')](/:/g,'');const _0x5a5b7c=_0x1ee06f+'.'+_0x5c31d4;const _0x54f4d9=_0x5a5b7c+a0_0x1fd5('0x2b');const _0x11ae69=_0x5a5b7c+'.dist.tar';const _0x585019='publish/'+_0x54f4d9;const _0x22a45f=a0_0x1fd5('0x6f')+_0x11ae69;if(!fs[a0_0x1fd5('0x67')](a0_0x1fd5('0x44'))){fs['mkdirSync'](a0_0x1fd5('0x44'));}if(fs[a0_0x1fd5('0x67')](_0x414aac)){let _0x3a9578=fs[a0_0x1fd5('0x4d')](_0x414aac)[a0_0x1fd5('0x90')]();const _0x6a476c=JSON['parse'](_0x3a9578);_0x6a476c[a0_0x1fd5('0x70')]=getNextVersion(_0x6a476c[a0_0x1fd5('0x70')]);_0x3a9578=JSON[a0_0x1fd5('0x5c')](_0x6a476c,null,0x2);fs[a0_0x1fd5('0x28')](_0x414aac,_0x3a9578);console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x66')](a0_0x1fd5('0x84')+_0x6a476c[a0_0x1fd5('0x70')]));child_process[a0_0x1fd5('0x85')](a0_0x1fd5('0x75')+_0xbec2ab,{'stdio':'inherit'});fs[a0_0x1fd5('0x28')](_0x46645+a0_0x1fd5('0x6e'),_0xbec2ab);fs['writeFileSync'](_0x345fa2+a0_0x1fd5('0x6e'),_0xbec2ab);tar[a0_0x1fd5('0x50')](_0x46645)[a0_0x1fd5('0x8b')](fs[a0_0x1fd5('0x88')](_0x585019));tar['pack'](_0x345fa2)[a0_0x1fd5('0x8b')](fs[a0_0x1fd5('0x88')](_0x22a45f));const _0x213e18=_0x3aabb6[a0_0x1fd5('0x80')];if(_0x213e18==='y'){connectFtpServer(function(_0xc17c43){const _0x2c55e9=ora(a0_0x1fd5('0x89'));_0x2c55e9[a0_0x1fd5('0x5a')]();const _0x5c10ba=fs[a0_0x1fd5('0x39')](_0x585019);const _0x4d468d=fs['statSync'](_0x585019)[a0_0x1fd5('0xb')];_0xc17c43['put'](_0x5c10ba,_0x54f4d9,function(_0x226e52){if(_0x226e52){_0x2c55e9[a0_0x1fd5('0x3d')]();console['log'](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](_0x226e52));throw _0x226e52;}_0xc17c43[a0_0x1fd5('0x71')]();_0x2c55e9[a0_0x1fd5('0x47')](a0_0x1fd5('0x89'));console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x8a')],chalk[a0_0x1fd5('0x66')](a0_0x1fd5('0x12')));console['log'](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x66')](a0_0x1fd5('0x3c')+_0x5a5b7c));});let _0x47eaa5=0x0;_0x5c10ba['on']('data',function(_0x3825c2){_0x47eaa5+=_0x3825c2['length'];_0x2c55e9[a0_0x1fd5('0x4b')]=a0_0x1fd5('0x8')+((_0x47eaa5/_0x4d468d*0x64)[a0_0x1fd5('0x35')](0x2)+'%');});});}}else{console['log'](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](a0_0x1fd5('0x26')+_0x1ee06f+a0_0x1fd5('0x63')));}}catch(_0x512411){console[a0_0x1fd5('0x1')](symbols['error'],chalk[a0_0x1fd5('0x4c')](_0x512411));}});});program[a0_0x1fd5('0x5')](process[a0_0x1fd5('0x2')]);function createWidget(_0x469a28,_0x4a3072,_0x36f998,_0x3bfa60){if(!_0x469a28||!_0x4a3072||!_0x36f998){console['log'](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](a0_0x1fd5('0x74')));return![];}console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk['white'](a0_0x1fd5('0x49')+_0x469a28+a0_0x1fd5('0xe')));try{const _0x35f660=_0x469a28;const _0x5a51a3=a0_0x1fd5('0x33')+_0x35f660;const _0x195d7b=a0_0x1fd5('0x24');if(!fs[a0_0x1fd5('0x67')](_0x195d7b)){console['log'](symbols['error'],chalk['red']('Widget模板文件夹不存在'));return![];}if(fs['existsSync'](_0x5a51a3)){console[a0_0x1fd5('0x1')](symbols['error'],chalk[a0_0x1fd5('0x4c')](a0_0x1fd5('0x26')+_0x469a28+a0_0x1fd5('0x2e')));return![];}copydir[a0_0x1fd5('0x7b')](_0x195d7b,_0x5a51a3);const _0xf7d13c=_0x5a51a3+'/manifest.json';let _0x5a7306=fs[a0_0x1fd5('0x4d')](_0xf7d13c)[a0_0x1fd5('0x90')]();const _0x77d9e9=JSON['parse'](_0x5a7306);_0x77d9e9['id']=_0x469a28;_0x77d9e9[a0_0x1fd5('0x82')]=a0_0x1fd5('0x13');_0x77d9e9[a0_0x1fd5('0x2c')]=_0x4a3072;_0x77d9e9[a0_0x1fd5('0x9')]=_0x36f998;_0x77d9e9[a0_0x1fd5('0x54')]=_0x3bfa60;_0x5a7306=JSON['stringify'](_0x77d9e9,null,0x2);fs['writeFileSync'](_0xf7d13c,_0x5a7306);const _0x306753=a0_0x1fd5('0x31');let _0x20753a=fs[a0_0x1fd5('0x4d')](_0x306753)[a0_0x1fd5('0x90')]();const _0x238656=JSON[a0_0x1fd5('0x5')](_0x20753a);_0x238656[a0_0x1fd5('0x70')]=getNextVersion(_0x238656[a0_0x1fd5('0x70')]);for(let _0x5d8395 of _0x238656['widgets']){_0x5d8395['enable']=![];}_0x238656['widgets']['push']({'group':'测试','path':_0x35f660,'enable':!![]});_0x20753a=JSON[a0_0x1fd5('0x5c')](_0x238656,null,0x2);fs[a0_0x1fd5('0x28')](_0x306753,_0x20753a);console['log'](symbols['info'],chalk['white'](a0_0x1fd5('0x60')+_0x469a28+a0_0x1fd5('0xe')));}catch(_0x242c66){console['log'](symbols[a0_0x1fd5('0x45')],chalk['red'](_0x242c66));}return!![];}function getNextVersion(_0x1c4785){if(_0x1c4785){const _0x118b45=_0x1c4785[a0_0x1fd5('0x20')](/(.*\.)(\d+)$/);if(_0x118b45&&_0x118b45[0x1]&&_0x118b45[0x2]){return''+_0x118b45[0x1]+(parseInt(_0x118b45[0x2])+0x1);}}return _0x1c4785;}function getWidgetsList(){const _0x121c7a=[];try{const _0x54d836=a0_0x1fd5('0x31');if(fs[a0_0x1fd5('0x67')](_0x54d836)){const _0xaee782=fs[a0_0x1fd5('0x4d')](_0x54d836)[a0_0x1fd5('0x90')]();const _0x2cdc7a=JSON[a0_0x1fd5('0x5')](_0xaee782);for(let _0x1eea95 of _0x2cdc7a[a0_0x1fd5('0x32')]){try{const _0x40685a=a0_0x1fd5('0x33')+_0x1eea95['path'];const _0x112b29=_0x40685a+a0_0x1fd5('0x65');if(fs[a0_0x1fd5('0x67')](_0x112b29)){let _0x111c05=fs[a0_0x1fd5('0x4d')](_0x112b29)[a0_0x1fd5('0x90')]();const _0x2d4e77=JSON['parse'](_0x111c05);_0x121c7a['push']({'value':_0x2d4e77['id'],'name':a0_0x1fd5('0x16')+_0x2d4e77['id']+a0_0x1fd5('0x6b')+_0x2d4e77['name']+',版本:'+_0x2d4e77[a0_0x1fd5('0x70')]});}}catch(_0xe3e3e5){console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](_0x1eea95[a0_0x1fd5('0x40')]+'读取失败'));console['log'](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](_0xe3e3e5));}}}}catch(_0x29ba47){console['log'](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')]('widgets.json读取失败'));console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x45')],chalk['red'](_0x29ba47));}return _0x121c7a;}function getWidgetPath(_0x1d7385){const _0x57b84d=a0_0x1fd5('0x31');let _0x4e32b0=fs[a0_0x1fd5('0x4d')](_0x57b84d)[a0_0x1fd5('0x90')]();const _0x397baf=JSON[a0_0x1fd5('0x5')](_0x4e32b0);for(let _0x17105a of _0x397baf['widgets']){const _0x47d381=a0_0x1fd5('0x33')+_0x17105a[a0_0x1fd5('0x40')]+'/manifest.json';let _0x567ab4=fs['readFileSync'](_0x47d381)[a0_0x1fd5('0x90')]();const _0x295749=JSON[a0_0x1fd5('0x5')](_0x567ab4);if(_0x295749['id']===_0x1d7385){return _0x17105a['path'];}}console['log'](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](a0_0x1fd5('0x34')+_0x1d7385));}function startProxyServer(_0x2a3f28,_0x5d3141){console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x62')](a0_0x1fd5('0x4a')));var _0x3adc18=express();_0x3adc18[a0_0x1fd5('0x11')]('/',proxy({'target':_0x2a3f28,'changeOrigin':!![],'pathRewrite':{'/core/widgets':a0_0x1fd5('0xa')},'router':{'/core/widgets':widgetDebugUrl}}));_0x3adc18[a0_0x1fd5('0x17')](proxyServerPort,function(){console[a0_0x1fd5('0x1')](symbols['info'],chalk[a0_0x1fd5('0x62')](a0_0x1fd5('0x51')));console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x62')](a0_0x1fd5('0xf')));console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x8c')](a0_0x1fd5('0x57')));console[a0_0x1fd5('0x1')](symbols['info'],chalk['green'](a0_0x1fd5('0x0')));console[a0_0x1fd5('0x1')](symbols['info'],chalk['green'](a0_0x1fd5('0x3b')));console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x8c')](a0_0x1fd5('0x48')));ChromeLauncher['launch']({'startingUrl':a0_0x1fd5('0x6d')+proxyServerPort,'chromeFlags':[a0_0x1fd5('0x38'),a0_0x1fd5('0x7a'),a0_0x1fd5('0x21'),a0_0x1fd5('0x5d')]})[a0_0x1fd5('0x5e')](_0x31e61d=>{console[a0_0x1fd5('0x1')](symbols['info'],chalk[a0_0x1fd5('0x62')](a0_0x1fd5('0x8f')));});if(_0x5d3141){_0x5d3141();}});}function connectFtpServer(_0x43981a){const _0xaa5fbb=new Client();const _0x54ac91=ora('开始建立服务器连接...');_0x54ac91[a0_0x1fd5('0x5a')]();_0xaa5fbb['on']('ready',function(){_0x54ac91['succeed']();console['log'](symbols[a0_0x1fd5('0x5f')],chalk[a0_0x1fd5('0x66')](a0_0x1fd5('0x4e')));if(_0x43981a){_0x43981a(_0xaa5fbb);}});_0xaa5fbb['on'](a0_0x1fd5('0x45'),function(_0x2ec69b){_0x54ac91[a0_0x1fd5('0x3d')]();console[a0_0x1fd5('0x1')](symbols[a0_0x1fd5('0x45')],chalk[a0_0x1fd5('0x4c')](_0x2ec69b));});_0xaa5fbb[a0_0x1fd5('0x86')]({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}