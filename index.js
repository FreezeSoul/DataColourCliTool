#!/usr/bin/env node

const a0_0x5c8e=['cGFyc2U=','Y2hpbGRfcHJvY2Vzcw==','LnNyYy50YXI=','Y29tbWFuZA==','cGlwZQ==','bWtkaXJTeW5j','YnVpbGQ=','bnBt','5a6M5oiQ5Yib5bu6V2lkZ2V0Og==','L19fcGF0aF9fLnR4dA==','5b2T5YmNV2lkZ2V05qCH6K+G77ya','Y2hyb21lLWxhdW5jaGVy','aW5oZXJpdA==','c2l6ZQ==','dG9GaXhlZA==','dGhlbg==','Y3JlYXRl','YXV0aG9y','Z3JlZW4=','5ZCv5Yqo6LC35q2M5rWP6KeI5Zmo6LCD6K+VLi4u','YWN0aW9u','cmVzb2x2ZQ==','bGF1bmNo','LOeJiOacrDo=','c3luYw==','V2lkZ2V05Yib5bu65oiQ5Yqf','dGFyLWZz','5q2j5Zyo5Yib5bu6V2lkZ2V0Og==','d3JpdGVGaWxlU3luYw==','Y2hkaXI=','5Yid5aeL5YyWV2lkZ2V06aG555uu','6K+36L6T5YWlV2lkZ2V055qE5o+P6L+w77yM6KaB5rGC566A55+t55qE5Lit5paH5o+P6L+w5L+h5oGv','c3RyaW5naWZ5','d2lkZ2V0cw==','cHJvbXB0','aW5mbw==','c3RhcnQtd2lkZ2V0','5Yid5aeL5YyW5LiA5LiqV2lkZ2V0','bGlzdGVu','5p6E5bu65LiA5LiqV2lkZ2V0','aHR0cDovLzM5LjEwMS4xMzguNDM6ODA4MA==','cmVhZEZpbGVTeW5j','ZXhwcmVzcw==','ZG93bmxvYWQtZ2l0LXJlcG8=','5p6E5bu65omA5pyJV2lkZ2V0cw==','cHVzaA==','Y29weS1kaXI=','5Y+R5biD5LiA5LiqV2lkZ2V0','ZGlzdC93aWRnZXRzLw==','LS1kaXNhYmxlLXdlYi1zZWN1cml0eQ==','LS0gLS1wYXRoPQ==','5Yib5bu65LiA5LiqV2lkZ2V0','Ymx1ZQ==','c3RhdFN5bmM=','6K+75Y+W5aSx6LSl','5qCH6K+GOg==','6K+35Y+N6aaI5Y+R5biD5bqP5Y+3Og==','c3RhcnQ=','aG9zdA==','d2lkZ2V0cy5qc29u6K+75Y+W5aSx6LSl','d2hpdGU=','cnVu','aW5pdCA8bmFtZT4=','cGF0aA==','V2luZG93OiAiQzpQcm9ncmFtIEZpbGVzICh4ODYpR29vZ2xlQ2hyb21lQXBwbGljYXRpb25jaHJvbWUuZXhlIiAtLWRpc2FibGUtd2ViLXNlY3VyaXR5IC0tdXNlci1kYXRhLWRpcj1+L2Nocm9tZV90bXA=','Y29tbWFuZGVy','cHVibGlzaA==','bG9n','ZnRw','LmRpc3QudGFy','c3Rkb3V0','dG9TdHJpbmc=','YnVpbGRBbGw=','L3dpZGdldHM=','V2lkZ2V05qih5p2/5paH5Lu25aS55LiN5a2Y5Zyo','bG9nLXN5bWJvbHM=','6K+36L6T5YWl5L2c6ICF5ZCN56ew77yM5aaC77yaRnJlZXplU291bDxmcmVlemVzb3VsQGdtYWlsLmNvbT4=','bWF0Y2g=','V2lkZ2V0Og==','cmVwbGFjZQ==','ZW5hYmxl','6K+36L6T5YWlV2lkZ2V055qE5qCH6K+G77yM6KaB5rGC6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/','YnVpbGQv','bGVuZ3Ro','5pyN5Yqh5Zmo6L+e5o6l5bey5bu656uLLi4u','aHR0cC1wcm94eS1taWRkbGV3YXJl','ZXJyb3I=','YXJndg==','6K+36L6T5YWlV2lkZ2V055qE5ZCN56ew77yM6KaB5rGC566A55+t55qE5Lit5paH5ZCN56ew5a6a5LmJ','Y2hhbGs=','bmFtZQ==','6K+36YCJ5oup6KaB6LCD6K+V55qEV2lkZ2V0','6K+36YCJ5oup6KaB5p6E5bu655qEV2lkZ2V0','ZmFpbA==','5q2j5Zyo5LiL6L29V2lkZ2V05qih5p2/Li4u','cmF3bGlzdA==','cHVibGlzaC8=','c3VjY2Vzcw==','bnBtIHJ1biBidWlsZC13aWRnZXQ6cHJvIC0tIC0tcGF0aD0=','LS11c2VyLWRhdGEtZGlyPS4vY2hyb21lX3RtcA==','RnJlZXplU291bC9EYXRhQ29sb3VyV2lkZ2V0VGVtcGxhdGUjbWFzdGVy','dmVyc2lvbg==','5LiN5a2Y5Zyo','ZGVzY3JpcHRpb24=','aHR0cDovLzEyNy4wLjAuMTo4MDg4Lw==','5byA5aeL5bu656uL5pyN5Yqh5Zmo6L+e5o6lLi4u','6YOo5Lu25bey5oiQ5Yqf5o+Q5LqkLi4u','cmVk','ZXhlY1N5bmM=','LXYsIC0tdmVyc2lvbg==','c3JjL3dpZGdldHMv','Y29ubmVjdA==','5a6M5oiQ5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','6LCD6K+V5LiA5LiqV2lkZ2V0','dGV4dA==','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4u','5bey57uP5a2Y5ZyoV2lkZ2V0Og==','ZW5k','5a6M5oiQ5p6E5bu6V2lkZ2V077ya','bGlzdA==','cGFjaw==','ZGF0YWNvbG91cg==','aHR0cDovLzEyNy4wLjAuMTo=','LOWQjeensDo=','5q2j5Zyo5ZCv5Yqo5Luj55CG5pyN5YqhLi4u','cGFja2FnZS5qc29u','bnBtIGluc3RhbGw=','c3VjY2VlZA==','dmFsdWU=','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4uCQ==','6LC35q2M5rWP6KeI5Zmo5ZCv5Yqo5oiQ5YqfLi4u','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','ZXhpc3RzU3luYw==','5pyq5om+5Yiw5Yy56YWN55qEd2lkZ2V077ya','5Luj55CG5pyN5Yqh5Zmo5bey5ZCv5YqoLi4u','L21hbmlmZXN0Lmpzb24=','Y3JlYXRlUmVhZFN0cmVhbQ==','Y3JlYXRlV3JpdGVTdHJlYW0=','c3RkZXJy','Li4u','cHV0','b3Jh'];(function(_0x1c8dbb,_0x59de82){const _0x1db44f=function(_0x36bd0f){while(--_0x36bd0f){_0x1c8dbb['push'](_0x1c8dbb['shift']());}};_0x1db44f(++_0x59de82);}(a0_0x5c8e,0x1de));const a0_0x4850=function(_0x1c8dbb,_0x59de82){_0x1c8dbb=_0x1c8dbb-0x0;let _0x1db44f=a0_0x5c8e[_0x1c8dbb];if(a0_0x4850['liPoRc']===undefined){(function(){let _0x217888;try{const _0x378d3d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x217888=_0x378d3d();}catch(_0x111468){_0x217888=window;}const _0x31c546='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x217888['atob']||(_0x217888['atob']=function(_0x3c8e70){const _0x1529b6=String(_0x3c8e70)['replace'](/=+$/,'');let _0x542d00='';for(let _0x2c388a=0x0,_0x5a6efe,_0x13607f,_0xc7d6cb=0x0;_0x13607f=_0x1529b6['charAt'](_0xc7d6cb++);~_0x13607f&&(_0x5a6efe=_0x2c388a%0x4?_0x5a6efe*0x40+_0x13607f:_0x13607f,_0x2c388a++%0x4)?_0x542d00+=String['fromCharCode'](0xff&_0x5a6efe>>(-0x2*_0x2c388a&0x6)):0x0){_0x13607f=_0x31c546['indexOf'](_0x13607f);}return _0x542d00;});}());a0_0x4850['ymzOax']=function(_0x3e353f){const _0xfd13a6=atob(_0x3e353f);let _0xcd978a=[];for(let _0x187082=0x0,_0x2651ce=_0xfd13a6['length'];_0x187082<_0x2651ce;_0x187082++){_0xcd978a+='%'+('00'+_0xfd13a6['charCodeAt'](_0x187082)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xcd978a);};a0_0x4850['UkyycB']={};a0_0x4850['liPoRc']=!![];}const _0x36bd0f=a0_0x4850['UkyycB'][_0x1c8dbb];if(_0x36bd0f===undefined){_0x1db44f=a0_0x4850['ymzOax'](_0x1db44f);a0_0x4850['UkyycB'][_0x1c8dbb]=_0x1db44f;}else{_0x1db44f=_0x36bd0f;}return _0x1db44f;};const fs=require('fs');const fse=require('fs-extra');const path=require(a0_0x4850('0xe'));const ora=require(a0_0x4850('0x5d'));const tar=require(a0_0x4850('0x78'));const Client=require(a0_0x4850('0x13'));const chalk=require(a0_0x4850('0x28'));const express=require(a0_0x4850('0x88'));const copydir=require(a0_0x4850('0x8c'));const program=require(a0_0x4850('0x10'));const inquirer=require('inquirer');const symbols=require(a0_0x4850('0x1a'));const handlebars=require('handlebars');const proxy=require(a0_0x4850('0x24'));const download=require(a0_0x4850('0x89'));const child_process=require(a0_0x4850('0x5f'));const ChromeLauncher=require(a0_0x4850('0x69'));const githublink=a0_0x4850('0x33');const dcServerAddress=a0_0x4850('0x86');const widgetDebugUrl=a0_0x4850('0x37');const ftpServerAddress='ftp.datacolour.cn';const ftpServerUserName=a0_0x4850('0x49');const ftpServerPassword=a0_0x4850('0x49');const proxyServerPort=0x270f;try{const packagePath=path[a0_0x4850('0x73')](__dirname,a0_0x4850('0x4d'));if(fs[a0_0x4850('0x54')](packagePath)){const pjson=require(packagePath);const version=pjson['version'];program[a0_0x4850('0x34')](version,a0_0x4850('0x3c'));}}catch(a0_0x3f1086){}program[a0_0x4850('0x61')](a0_0x4850('0xd'))['description']('初始化Widget项目')['action'](_0xd65a9b=>{if(!fs['existsSync'](_0xd65a9b)){console['log'](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0xb')](a0_0x4850('0x7c')));const _0x404c50=ora(a0_0x4850('0x2d'));_0x404c50[a0_0x4850('0x8')]();download(githublink,_0xd65a9b,{'clone':![]},_0x23bb46=>{if(_0x23bb46){_0x404c50['fail']();console['log'](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](_0x23bb46));}else{_0x404c50[a0_0x4850('0x4f')]();process[a0_0x4850('0x7b')](_0xd65a9b);console[a0_0x4850('0x12')](symbols['info'],chalk[a0_0x4850('0xb')]('开始安装依赖部件...'));child_process[a0_0x4850('0x3b')](a0_0x4850('0x4e'),{'stdio':a0_0x4850('0x6a')});console[a0_0x4850('0x12')](symbols['info'],chalk[a0_0x4850('0xb')](a0_0x4850('0x3f')));console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0xb')](a0_0x4850('0x83')));inquirer[a0_0x4850('0x80')]([{'name':'id','message':a0_0x4850('0x20')},{'name':a0_0x4850('0x29'),'message':a0_0x4850('0x27')},{'name':'description','message':a0_0x4850('0x7d')},{'name':a0_0x4850('0x6f'),'message':a0_0x4850('0x1b')}])[a0_0x4850('0x6d')](_0x24d1aa=>{try{const _0x397ccf=_0x24d1aa['id'];const _0x21416c=_0x24d1aa[a0_0x4850('0x29')];const _0x22f857=_0x24d1aa[a0_0x4850('0x36')];const _0x20ffaf=_0x24d1aa[a0_0x4850('0x6f')];const _0x5f56fb=createWidget(_0x397ccf,_0x21416c,_0x22f857,_0x20ffaf);if(_0x5f56fb){console['log'](symbols[a0_0x4850('0x30')],chalk[a0_0x4850('0x70')]('项目初始化完成'));}}catch(_0x4817ee){console[a0_0x4850('0x12')](symbols['error'],chalk[a0_0x4850('0x3a')](_0x4817ee));}});}});}else{console['log'](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')]('项目'+_0xd65a9b+'已存在'));}});program[a0_0x4850('0x61')](a0_0x4850('0x47'))[a0_0x4850('0x36')]('列出所有Widget')[a0_0x4850('0x72')](()=>{try{const _0x4e1f99=a0_0x4850('0x53');if(fs['existsSync'](_0x4e1f99)){const _0x26ad34=fs[a0_0x4850('0x87')](_0x4e1f99)[a0_0x4850('0x16')]();const _0x2ab918=JSON[a0_0x4850('0x5e')](_0x26ad34);for(let _0x5d505a of _0x2ab918['widgets']){const _0x49d80b=a0_0x4850('0x3d')+_0x5d505a[a0_0x4850('0xe')];const _0x5bee9f=_0x49d80b+a0_0x4850('0x57');if(fs[a0_0x4850('0x54')](_0x5bee9f)){let _0x23f3fb=fs['readFileSync'](_0x5bee9f)[a0_0x4850('0x16')]();const _0x1a3a1a=JSON[a0_0x4850('0x5e')](_0x23f3fb);console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0xb')](a0_0x4850('0x6')+_0x1a3a1a['id']+a0_0x4850('0x4b')+_0x1a3a1a[a0_0x4850('0x29')]+a0_0x4850('0x75')+_0x1a3a1a['version']));}}}}catch(_0x3e1cc4){console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk['red'](_0x3e1cc4));}});program['command'](a0_0x4850('0x6e'))[a0_0x4850('0x36')](a0_0x4850('0x2'))[a0_0x4850('0x72')](()=>{inquirer[a0_0x4850('0x80')]([{'name':'id','message':a0_0x4850('0x20')},{'name':'name','message':a0_0x4850('0x27')},{'name':a0_0x4850('0x36'),'message':a0_0x4850('0x7d')},{'name':a0_0x4850('0x6f'),'message':a0_0x4850('0x1b')}])[a0_0x4850('0x6d')](_0x2c8efc=>{try{const _0xa55d90=_0x2c8efc['id'];const _0x2113a2=_0x2c8efc[a0_0x4850('0x29')];const _0xa5a306=_0x2c8efc[a0_0x4850('0x36')];const _0x1d3980=_0x2c8efc['author'];const _0x2f05d7='src/widgets/'+_0xa55d90;if(!fs[a0_0x4850('0x54')](_0x2f05d7)){const _0x41498e=createWidget(_0xa55d90,_0x2113a2,_0xa5a306,_0x1d3980);if(_0x41498e){console[a0_0x4850('0x12')](symbols['success'],chalk['green'](a0_0x4850('0x77')));}}else{console[a0_0x4850('0x12')](symbols['error'],chalk['red'](a0_0x4850('0x44')+_0xa55d90));}}catch(_0x1c437b){console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](_0x1c437b));}});});program[a0_0x4850('0x61')]('debug')[a0_0x4850('0x36')](a0_0x4850('0x40'))[a0_0x4850('0x72')](()=>{inquirer[a0_0x4850('0x80')]([{'name':'id','message':a0_0x4850('0x2a'),'type':a0_0x4850('0x2e'),'choices':getWidgetsList()},{'name':a0_0x4850('0x9'),'message':'请输入datacolour平台服务地址，默认调用公共服务'}])[a0_0x4850('0x6d')](_0x3255ff=>{try{const _0x34a78d=_0x3255ff['id'];const _0x198eb2=getWidgetPath(_0x34a78d);const _0x41b152=_0x3255ff['host']?_0x3255ff[a0_0x4850('0x9')]:dcServerAddress;const _0x596371=a0_0x4850('0x3d')+_0x198eb2+a0_0x4850('0x57');if(fs[a0_0x4850('0x54')](_0x596371)){const _0x5c31ce='src/widgets/widgets.json';let _0x22dcd4=fs[a0_0x4850('0x87')](_0x5c31ce)[a0_0x4850('0x16')]();const _0x238078=JSON[a0_0x4850('0x5e')](_0x22dcd4);_0x238078['version']=getNextVersion(_0x238078[a0_0x4850('0x34')]);for(let _0xd4f8d of _0x238078[a0_0x4850('0x7f')]){_0xd4f8d[a0_0x4850('0x1f')]=_0xd4f8d[a0_0x4850('0xe')]===_0x198eb2;}_0x22dcd4=JSON[a0_0x4850('0x7e')](_0x238078,null,0x2);fs[a0_0x4850('0x7a')](_0x5c31ce,_0x22dcd4);let _0x43e613=fs['readFileSync'](_0x596371)[a0_0x4850('0x16')]();const _0x1365e3=JSON['parse'](_0x43e613);_0x1365e3['version']=getNextVersion(_0x1365e3['version']);_0x43e613=JSON[a0_0x4850('0x7e')](_0x1365e3,null,0x2);fs[a0_0x4850('0x7a')](_0x596371,_0x43e613);console[a0_0x4850('0x12')](symbols['info'],chalk[a0_0x4850('0xb')]('当前Widget版本号：'+_0x1365e3[a0_0x4850('0x34')]));startProxyServer(_0x41b152,function(){const _0x47af08=child_process['spawn'](a0_0x4850('0x65'),[a0_0x4850('0xc'),a0_0x4850('0x82'),a0_0x4850('0x1')+_0x198eb2],{'shell':!![]});_0x47af08[a0_0x4850('0x15')]['on']('data',function(_0x40e9f4){console[a0_0x4850('0x12')](_0x40e9f4[a0_0x4850('0x16')]());});_0x47af08[a0_0x4850('0x5a')]['on']('data',function(_0x57483b){console[a0_0x4850('0x12')](_0x57483b[a0_0x4850('0x16')]());});});}else{console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')]('Widget:'+_0x34a78d+'不存在'));}}catch(_0x5af9a8){console['log'](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](_0x5af9a8));}});});program[a0_0x4850('0x61')](a0_0x4850('0x64'))['description'](a0_0x4850('0x85'))[a0_0x4850('0x72')](()=>{inquirer[a0_0x4850('0x80')]([{'name':'id','message':a0_0x4850('0x2b'),'type':'rawlist','choices':getWidgetsList()}])['then'](_0x188ad4=>{try{const _0x31ea8b=_0x188ad4['id'];const _0x496441=getWidgetPath(_0x31ea8b);const _0x269c8a=a0_0x4850('0x3d')+_0x496441+a0_0x4850('0x57');if(fs[a0_0x4850('0x54')](_0x269c8a)){let _0x468b1d=fs[a0_0x4850('0x87')](_0x269c8a)[a0_0x4850('0x16')]();const _0xfee174=JSON[a0_0x4850('0x5e')](_0x468b1d);_0xfee174['version']=getNextVersion(_0xfee174['version']);_0x468b1d=JSON[a0_0x4850('0x7e')](_0xfee174,null,0x2);fs['writeFileSync'](_0x269c8a,_0x468b1d);console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk['white']('当前Widget版本号：'+_0xfee174[a0_0x4850('0x34')]));child_process[a0_0x4850('0x3b')](a0_0x4850('0x31')+_0x496441,{'stdio':a0_0x4850('0x6a')});}else{console[a0_0x4850('0x12')](symbols['error'],chalk[a0_0x4850('0x3a')](a0_0x4850('0x1d')+_0x31ea8b+a0_0x4850('0x35')));}}catch(_0x1b4877){console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](_0x1b4877));}});});program['command'](a0_0x4850('0x17'))[a0_0x4850('0x36')](a0_0x4850('0x8a'))[a0_0x4850('0x72')](()=>{try{const _0x47528c=getWidgetsList();for(let _0x992156 of _0x47528c){const _0x437f50=_0x992156[a0_0x4850('0x50')];const _0x3b4fc5=getWidgetPath(_0x437f50);const _0x452799=a0_0x4850('0x3d')+_0x3b4fc5+a0_0x4850('0x57');if(fs[a0_0x4850('0x54')](_0x452799)){let _0xc1c02c=fs['readFileSync'](_0x452799)[a0_0x4850('0x16')]();const _0x22d7f4=JSON['parse'](_0xc1c02c);_0x22d7f4[a0_0x4850('0x34')]=getNextVersion(_0x22d7f4['version']);_0xc1c02c=JSON[a0_0x4850('0x7e')](_0x22d7f4,null,0x2);fs[a0_0x4850('0x7a')](_0x452799,_0xc1c02c);console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0xb')](a0_0x4850('0x68')+_0x437f50));console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0xb')]('当前Widget版本号：'+_0x22d7f4[a0_0x4850('0x34')]));child_process['execSync']('npm\x20run\x20build-widget:pro\x20--\x20--path='+_0x3b4fc5,{'stdio':a0_0x4850('0x6a')});console[a0_0x4850('0x12')](symbols[a0_0x4850('0x30')],chalk['green'](a0_0x4850('0x46')+_0x22d7f4[a0_0x4850('0x34')]));const _0x4d0809=a0_0x4850('0x8e')+_0x3b4fc5;const _0x445ce2=a0_0x4850('0x21')+_0x3b4fc5;if(!fs[a0_0x4850('0x54')](a0_0x4850('0x64'))){fs[a0_0x4850('0x63')](a0_0x4850('0x64'));}if(fs[a0_0x4850('0x54')](_0x4d0809)){fse['moveSync'](_0x4d0809,_0x445ce2);}}else{console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')]('Widget:'+_0x437f50+a0_0x4850('0x35')));}}}catch(_0x57481e){console[a0_0x4850('0x12')](symbols['error'],chalk['red'](_0x57481e));}});program[a0_0x4850('0x61')](a0_0x4850('0x11'))[a0_0x4850('0x36')](a0_0x4850('0x8d'))[a0_0x4850('0x72')](()=>{inquirer[a0_0x4850('0x80')]([{'name':'id','message':'请选择要发布的Widget','type':a0_0x4850('0x2e'),'choices':getWidgetsList()}])[a0_0x4850('0x6d')](_0x1194e9=>{try{const _0x540606=_0x1194e9['id'];const _0x365d4b=getWidgetPath(_0x540606);const _0x57fda5=a0_0x4850('0x3d')+_0x365d4b;const _0x5832e5='dist/widgets/'+_0x365d4b;const _0x4febf6=_0x57fda5+a0_0x4850('0x57');const _0x292f83=new Date()['toISOString']()[a0_0x4850('0x1e')](/T/,'')[a0_0x4850('0x1e')](/\..+/,'')[a0_0x4850('0x1e')](/-/g,'')['replace'](/:/g,'');const _0x716b20=_0x540606+'.'+_0x292f83;const _0x43ce5f=_0x716b20+a0_0x4850('0x60');const _0x4f7783=_0x716b20+a0_0x4850('0x14');const _0x3936ea='publish/'+_0x43ce5f;const _0x16bd45=a0_0x4850('0x2f')+_0x4f7783;if(!fs[a0_0x4850('0x54')]('publish')){fs[a0_0x4850('0x63')](a0_0x4850('0x11'));}if(fs[a0_0x4850('0x54')](_0x4febf6)){let _0x3be1a8=fs['readFileSync'](_0x4febf6)[a0_0x4850('0x16')]();const _0x36a836=JSON[a0_0x4850('0x5e')](_0x3be1a8);_0x36a836[a0_0x4850('0x34')]=getNextVersion(_0x36a836['version']);_0x3be1a8=JSON[a0_0x4850('0x7e')](_0x36a836,null,0x2);fs[a0_0x4850('0x7a')](_0x4febf6,_0x3be1a8);console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0xb')](a0_0x4850('0x42')+_0x36a836[a0_0x4850('0x34')]));child_process[a0_0x4850('0x3b')](a0_0x4850('0x31')+_0x365d4b,{'stdio':'inherit'});fs[a0_0x4850('0x7a')](_0x57fda5+a0_0x4850('0x67'),_0x365d4b);fs[a0_0x4850('0x7a')](_0x5832e5+a0_0x4850('0x67'),_0x365d4b);tar[a0_0x4850('0x48')](_0x57fda5)['pipe'](fs['createWriteStream'](_0x3936ea));tar[a0_0x4850('0x48')](_0x5832e5)[a0_0x4850('0x62')](fs[a0_0x4850('0x59')](_0x16bd45));connectFtpServer(function(_0x1c391){const _0x1cbc58=ora(a0_0x4850('0x43'));_0x1cbc58['start']();const _0x59695b=fs[a0_0x4850('0x58')](_0x3936ea);const _0x20a510=fs[a0_0x4850('0x4')](_0x3936ea)[a0_0x4850('0x6b')];_0x1c391[a0_0x4850('0x5c')](_0x59695b,_0x43ce5f,function(_0x2a8049){if(_0x2a8049){_0x1cbc58['fail']();console[a0_0x4850('0x12')](symbols['error'],chalk[a0_0x4850('0x3a')](_0x2a8049));throw _0x2a8049;}_0x1c391[a0_0x4850('0x45')]();_0x1cbc58[a0_0x4850('0x4f')](a0_0x4850('0x43'));console[a0_0x4850('0x12')](symbols[a0_0x4850('0x30')],chalk['white'](a0_0x4850('0x39')));console[a0_0x4850('0x12')](symbols['info'],chalk[a0_0x4850('0xb')](a0_0x4850('0x7')+_0x716b20));});let _0x3cec15=0x0;_0x59695b['on']('data',function(_0x24a1b7){_0x3cec15+=_0x24a1b7[a0_0x4850('0x22')];_0x1cbc58[a0_0x4850('0x41')]=a0_0x4850('0x51')+((_0x3cec15/_0x20a510*0x64)[a0_0x4850('0x6c')](0x2)+'%');});});}else{console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](a0_0x4850('0x1d')+_0x540606+a0_0x4850('0x35')));}}catch(_0x76ddda){console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](_0x76ddda));}});});program[a0_0x4850('0x5e')](process[a0_0x4850('0x26')]);function createWidget(_0xf95775,_0x4dfdb3,_0x40f392,_0x473828){if(!_0xf95775||!_0x4dfdb3||!_0x40f392){console['log'](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')]('请提供完整的Widget信息'));return![];}console['log'](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0xb')](a0_0x4850('0x79')+_0xf95775+a0_0x4850('0x5b')));try{const _0x1c5d9f=a0_0x4850('0x3d')+_0xf95775;const _0x233747='src/widgets/widget';if(!fs[a0_0x4850('0x54')](_0x233747)){console['log'](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](a0_0x4850('0x19')));return![];}if(fs['existsSync'](_0x1c5d9f)){console[a0_0x4850('0x12')](symbols['error'],chalk[a0_0x4850('0x3a')]('Widget:'+_0xf95775+'已存在'));return![];}copydir[a0_0x4850('0x76')](_0x233747,_0x1c5d9f);const _0x45510e=_0x1c5d9f+a0_0x4850('0x57');let _0x1733dd=fs[a0_0x4850('0x87')](_0x45510e)[a0_0x4850('0x16')]();const _0x274197=JSON[a0_0x4850('0x5e')](_0x1733dd);_0x274197['id']=_0xf95775;_0x274197[a0_0x4850('0x29')]=_0x4dfdb3;_0x274197['description']=_0x40f392;_0x274197[a0_0x4850('0x6f')]=_0x473828;_0x1733dd=JSON['stringify'](_0x274197,null,0x2);fs[a0_0x4850('0x7a')](_0x45510e,_0x1733dd);const _0x3ea0c1='src/widgets/widgets.json';let _0x538513=fs[a0_0x4850('0x87')](_0x3ea0c1)['toString']();const _0x39686f=JSON[a0_0x4850('0x5e')](_0x538513);_0x39686f[a0_0x4850('0x34')]=getNextVersion(_0x39686f[a0_0x4850('0x34')]);for(let _0x27ebe6 of _0x39686f[a0_0x4850('0x7f')]){_0x27ebe6[a0_0x4850('0x1f')]=![];}_0x39686f['widgets'][a0_0x4850('0x8b')]({'group':'测试','tag':'Test','path':_0xf95775,'enable':!![]});_0x538513=JSON[a0_0x4850('0x7e')](_0x39686f,null,0x2);fs[a0_0x4850('0x7a')](_0x3ea0c1,_0x538513);console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0xb')](a0_0x4850('0x66')+_0xf95775+a0_0x4850('0x5b')));}catch(_0x456560){console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](_0x456560));}return!![];}function getNextVersion(_0x5cb1c3){if(_0x5cb1c3){const _0x541689=_0x5cb1c3[a0_0x4850('0x1c')](/(.*\.)(\d+)$/);if(_0x541689&&_0x541689[0x1]&&_0x541689[0x2]){return''+_0x541689[0x1]+(parseInt(_0x541689[0x2])+0x1);}}return _0x5cb1c3;}function getWidgetsList(){const _0x56c76a=[];try{const _0x3ccfad=a0_0x4850('0x53');if(fs[a0_0x4850('0x54')](_0x3ccfad)){const _0x4ec3dd=fs[a0_0x4850('0x87')](_0x3ccfad)[a0_0x4850('0x16')]();const _0x2c1657=JSON[a0_0x4850('0x5e')](_0x4ec3dd);for(let _0x467e00 of _0x2c1657[a0_0x4850('0x7f')]){try{const _0x3f2d95=a0_0x4850('0x3d')+_0x467e00[a0_0x4850('0xe')];const _0x380cea=_0x3f2d95+a0_0x4850('0x57');if(fs[a0_0x4850('0x54')](_0x380cea)){let _0xddd0ad=fs[a0_0x4850('0x87')](_0x380cea)[a0_0x4850('0x16')]();const _0x5e36b6=JSON[a0_0x4850('0x5e')](_0xddd0ad);_0x56c76a['push']({'value':_0x5e36b6['id'],'name':'标识:'+_0x5e36b6['id']+a0_0x4850('0x4b')+_0x5e36b6[a0_0x4850('0x29')]+a0_0x4850('0x75')+_0x5e36b6[a0_0x4850('0x34')]});}}catch(_0x3ad19a){console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk['red'](_0x467e00[a0_0x4850('0xe')]+a0_0x4850('0x5')));console['log'](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](_0x3ad19a));}}}}catch(_0x20567f){console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](a0_0x4850('0xa')));console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](_0x20567f));}return _0x56c76a;}function getWidgetPath(_0xea5746){const _0x35387d=a0_0x4850('0x53');let _0x81a79f=fs[a0_0x4850('0x87')](_0x35387d)[a0_0x4850('0x16')]();const _0x3419b3=JSON[a0_0x4850('0x5e')](_0x81a79f);for(let _0x1fb36f of _0x3419b3[a0_0x4850('0x7f')]){const _0xf641f7='src/widgets/'+_0x1fb36f[a0_0x4850('0xe')]+a0_0x4850('0x57');let _0x59221f=fs[a0_0x4850('0x87')](_0xf641f7)[a0_0x4850('0x16')]();const _0x106939=JSON[a0_0x4850('0x5e')](_0x59221f);if(_0x106939['id']===_0xea5746){return _0x1fb36f[a0_0x4850('0xe')];}}console[a0_0x4850('0x12')](symbols[a0_0x4850('0x25')],chalk[a0_0x4850('0x3a')](a0_0x4850('0x55')+_0xea5746));}function startProxyServer(_0x52a6ed,_0x1d120f){console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk['blue'](a0_0x4850('0x4c')));var _0x5d7956=express();_0x5d7956['use']('/',proxy({'target':_0x52a6ed,'changeOrigin':!![],'pathRewrite':{'/core/widgets':a0_0x4850('0x18')},'router':{'/core/widgets':widgetDebugUrl}}));_0x5d7956[a0_0x4850('0x84')](proxyServerPort,function(){console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0x3')](a0_0x4850('0x56')));console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0x3')](a0_0x4850('0x71')));console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0x70')]('如浏览器启动失败，请通过如下命令行手工启动：'));console['log'](symbols[a0_0x4850('0x81')],chalk['green'](a0_0x4850('0xf')));console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk['green']('Linux:\x20/opt/google/chrome/chrome\x20--disable-web-security\x20--user-data-dir=/tmp/chrome_tmp'));console[a0_0x4850('0x12')](symbols['info'],chalk[a0_0x4850('0x70')]('OSX:\x20open\x20-n\x20-a\x20/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome\x20--args\x20--disable-web-security\x20--user-data-dir=\x22/tmp/chrome_tmp\x22'));ChromeLauncher[a0_0x4850('0x74')]({'startingUrl':a0_0x4850('0x4a')+proxyServerPort,'chromeFlags':[a0_0x4850('0x0'),a0_0x4850('0x32')]})[a0_0x4850('0x6d')](_0x2b73b8=>{console[a0_0x4850('0x12')](symbols[a0_0x4850('0x81')],chalk[a0_0x4850('0x3')](a0_0x4850('0x52')));});if(_0x1d120f){_0x1d120f();}});}function connectFtpServer(_0x443522){const _0x55634e=new Client();const _0x1a24d4=ora(a0_0x4850('0x38'));_0x1a24d4['start']();_0x55634e['on']('ready',function(){_0x1a24d4[a0_0x4850('0x4f')]();console[a0_0x4850('0x12')](symbols['info'],chalk[a0_0x4850('0xb')](a0_0x4850('0x23')));if(_0x443522){_0x443522(_0x55634e);}});_0x55634e['on'](a0_0x4850('0x25'),function(_0x4436c7){_0x1a24d4[a0_0x4850('0x2c')]();console['log'](symbols[a0_0x4850('0x25')],chalk['red'](_0x4436c7));});_0x55634e[a0_0x4850('0x3e')]({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}