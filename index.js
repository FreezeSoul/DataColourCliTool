#!/usr/bin/env node

const a0_0x1c3b=['5byA5aeL5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','T1NYOiBvcGVuIC1uIC1hIC9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSAtLWFyZ3MgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9Ii90bXAvY2hyb21lX3RtcCI=','VGVzdA==','dG9GaXhlZA==','c3JjL3dpZGdldHMvd2lkZ2V0','c3VjY2VlZA==','aG9zdA==','cmVk','5bey5a2Y5Zyo','b3Jh','ZXJyb3I=','ZnMtZXh0cmE=','LS1kaXNhYmxlLXdlYi1zZWN1cml0eQ==','bGlzdA==','cHVzaA==','ZGVidWc=','aW5pdCA8bmFtZT4=','aW5oZXJpdA==','bnBtIGluc3RhbGw=','cmVwbGFjZQ==','L19fcGF0aF9fLnR4dA==','c3RhdFN5bmM=','ZnRwLmRhdGFjb2xvdXIuY24=','5byA5aeL5bu656uL5pyN5Yqh5Zmo6L+e5o6lLi4u','dGV4dA==','Y2hhbGs=','c3VjY2Vzcw==','5b2T5YmNV2lkZ2V05qCH6K+G77ya','6K+36YCJ5oup6KaB5Y+R5biD55qEV2lkZ2V0','6K+36L6T5YWl5L2c6ICF5ZCN56ew77yM5aaC77yaRnJlZXplU291bDxmcmVlemVzb3VsQGdtYWlsLmNvbT4=','5p6E5bu65LiA5LiqV2lkZ2V0','ZnRw','d2lkZ2V0cy5qc29u6K+75Y+W5aSx6LSl','cGFja2FnZS5qc29u','5Luj55CG5pyN5Yqh5Zmo5bey5ZCv5YqoLi4u','5bey57uP5a2Y5ZyoV2lkZ2V0Og==','ZG93bmxvYWQtZ2l0LXJlcG8=','dmFsdWU=','cGFyc2U=','c3luYw==','YXJndg==','d3JpdGVGaWxlU3luYw==','5a6M5oiQ5Yib5bu6V2lkZ2V0Og==','LS11c2VyLWRhdGEtZGlyPS4vY2hyb21lX3RtcA==','6K+356Gu6K6k5piv5ZCm5o+Q5Lqk6Iez5YWs5YWx5o+S5Lu25Lit5b+D77yM6K+36L6T5YWleS9uKOm7mOiupG4p','bWtkaXJTeW5j','ZmFpbA==','cHV0','ZGF0YWNvbG91cg==','bmFtZQ==','ZGlzdC93aWRnZXRzLw==','5q2j5Zyo5LiL6L29V2lkZ2V05qih5p2/Li4u','ZW5k','Y3JlYXRl','c3JjL3dpZGdldHMv','aHR0cC1wcm94eS1taWRkbGV3YXJl','bnBtIHJ1biBidWlsZC13aWRnZXQ6cHJvIC0tIC0tcGF0aD0=','6aG555uu5Yid5aeL5YyW5a6M5oiQ','5ZCv5Yqo6LC35q2M5rWP6KeI5Zmo6LCD6K+VLi4u','aW5xdWlyZXI=','cGF0aA==','YnVpbGQv','5Yib5bu65LiA5LiqV2lkZ2V0','5qCH6K+GOg==','c3RyaW5naWZ5','TGludXg6IC9vcHQvZ29vZ2xlL2Nocm9tZS9jaHJvbWUgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9L3RtcC9jaHJvbWVfdG1w','cHJvbXB0','5p6E5bu65omA5pyJV2lkZ2V0cw==','LOeJiOacrDo=','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','cHVibGlzaC8=','ZGVzY3JpcHRpb24=','cnVu','YnVpbGQ=','cmVhZHk=','aHR0cDovLzEyNy4wLjAuMTo=','5aaC5rWP6KeI5Zmo5ZCv5Yqo5aSx6LSl77yM6K+36YCa6L+H5aaC5LiL5ZG95Luk6KGM5omL5bel5ZCv5Yqo77ya','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4uCQ==','cGFjaw==','d2hpdGU=','6LCD6K+V5LiA5LiqV2lkZ2V0','5a6M5oiQ5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','c3RhcnQ=','c2l6ZQ==','LXYsIC0tdmVyc2lvbg==','aW5mbw==','Li4u','5pyN5Yqh5Zmo6L+e5o6l5bey5bu656uLLi4u','bG9nLXN5bWJvbHM=','Y3JlYXRlUmVhZFN0cmVhbQ==','bG9n','V2luZG93OiAiQzpQcm9ncmFtIEZpbGVzICh4ODYpR29vZ2xlQ2hyb21lQXBwbGljYXRpb25jaHJvbWUuZXhlIiAtLWRpc2FibGUtd2ViLXNlY3VyaXR5IC0tdXNlci1kYXRhLWRpcj1+L2Nocm9tZV90bXA=','cmF3bGlzdA==','L21hbmlmZXN0Lmpzb24=','LOWQjeensDo=','bW92ZVN5bmM=','bGF1bmNo','LmRpc3QudGFy','d2lkZ2V0cw==','6K+35Y+N6aaI5Y+R5biD5bqP5Y+3Og==','ZXhpc3RzU3luYw==','5pyq5om+5Yiw5Yy56YWN55qEd2lkZ2V077ya','V2lkZ2V0Og==','ZXhwcmVzcw==','5YiX5Ye65omA5pyJV2lkZ2V0','RnJlZXplU291bC9EYXRhQ29sb3VyV2lkZ2V0VGVtcGxhdGUjbWFzdGVy','6K+75Y+W5aSx6LSl','dmVyc2lvbg==','aHR0cDovLzM5LjEwMS4xMzguNDM6ODA4MA==','ZXhlY1N5bmM=','5LiN5a2Y5Zyo','6K+36YCJ5oup6KaB6LCD6K+V55qEV2lkZ2V0','bWF0Y2g=','cmVhZEZpbGVTeW5j','Ymx1ZQ==','5Yid5aeL5YyWV2lkZ2V06aG555uu','LS0gLS1wYXRoPQ==','ZGF0YQ==','cHVibGlzaA==','LS1kaXNrLWNhY2hlLXNpemU9MQ==','dG9TdHJpbmc=','LS1tZWRpYS1jYWNoZS1zaXplPTE=','dGhlbg==','dXNl','Z3JlZW4=','YnVpbGRBbGw=','Y29tbWFuZA==','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','YXV0aG9y','6K+35o+Q5L6b5a6M5pW055qEV2lkZ2V05L+h5oGv','aGFuZGxlYmFycw==','cGlwZQ==','Y29ubmVjdA==','V2lkZ2V05Yib5bu65oiQ5Yqf','5q2j5Zyo5Yib5bu6V2lkZ2V0Og==','YWN0aW9u','Y29tbWFuZGVy','Y3JlYXRlV3JpdGVTdHJlYW0=','ZW5hYmxl','6K+36L6T5YWlV2lkZ2V055qE5ZCN56ew77yM6KaB5rGC566A55+t55qE5Lit5paH5ZCN56ew5a6a5LmJ','L3dpZGdldHM=','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4u','bnBt','Y2hkaXI=','6YOo5Lu25bey5oiQ5Yqf5o+Q5LqkLi4u'];(function(_0x444013,_0x19f86d){const _0x77f745=function(_0x3302d1){while(--_0x3302d1){_0x444013['push'](_0x444013['shift']());}};_0x77f745(++_0x19f86d);}(a0_0x1c3b,0xd8));const a0_0xedff=function(_0x444013,_0x19f86d){_0x444013=_0x444013-0x0;let _0x77f745=a0_0x1c3b[_0x444013];if(a0_0xedff['yzoaqj']===undefined){(function(){const _0x49c319=function(){let _0x16516c;try{_0x16516c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x56bc91){_0x16516c=window;}return _0x16516c;};const _0x147924=_0x49c319();const _0x1dbbe8='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x147924['atob']||(_0x147924['atob']=function(_0x39294c){const _0xc6f9a0=String(_0x39294c)['replace'](/=+$/,'');let _0x1b972b='';for(let _0x10c08a=0x0,_0x403bff,_0x352357,_0x50420b=0x0;_0x352357=_0xc6f9a0['charAt'](_0x50420b++);~_0x352357&&(_0x403bff=_0x10c08a%0x4?_0x403bff*0x40+_0x352357:_0x352357,_0x10c08a++%0x4)?_0x1b972b+=String['fromCharCode'](0xff&_0x403bff>>(-0x2*_0x10c08a&0x6)):0x0){_0x352357=_0x1dbbe8['indexOf'](_0x352357);}return _0x1b972b;});}());a0_0xedff['BUQbJY']=function(_0x5d9077){const _0x42cd34=atob(_0x5d9077);let _0x19c494=[];for(let _0x5ecbc4=0x0,_0x454998=_0x42cd34['length'];_0x5ecbc4<_0x454998;_0x5ecbc4++){_0x19c494+='%'+('00'+_0x42cd34['charCodeAt'](_0x5ecbc4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x19c494);};a0_0xedff['OSTwcF']={};a0_0xedff['yzoaqj']=!![];}const _0x3302d1=a0_0xedff['OSTwcF'][_0x444013];if(_0x3302d1===undefined){_0x77f745=a0_0xedff['BUQbJY'](_0x77f745);a0_0xedff['OSTwcF'][_0x444013]=_0x77f745;}else{_0x77f745=_0x3302d1;}return _0x77f745;};const fs=require('fs');const fse=require(a0_0xedff('0x55'));const path=require(a0_0xedff('0x86'));const ora=require(a0_0xedff('0x53'));const tar=require('tar-fs');const Client=require(a0_0xedff('0x69'));const chalk=require(a0_0xedff('0x63'));const express=require(a0_0xedff('0x20'));const copydir=require('copy-dir');const program=require(a0_0xedff('0x41'));const inquirer=require(a0_0xedff('0x85'));const symbols=require(a0_0xedff('0x11'));const handlebars=require(a0_0xedff('0x3b'));const proxy=require(a0_0xedff('0x81'));const download=require(a0_0xedff('0x6e'));const child_process=require('child_process');const ChromeLauncher=require('chrome-launcher');const githublink=a0_0xedff('0x22');const dcServerAddress=a0_0xedff('0x25');const widgetDebugUrl='http://127.0.0.1:8088/';const ftpServerAddress=a0_0xedff('0x60');const ftpServerUserName='datacolour';const ftpServerPassword=a0_0xedff('0x7a');const proxyServerPort=0x270f;try{const packagePath=path['resolve'](__dirname,a0_0xedff('0x6b'));if(fs[a0_0xedff('0x1d')](packagePath)){const pjson=require(packagePath);const version=pjson[a0_0xedff('0x24')];program[a0_0xedff('0x24')](version,a0_0xedff('0xd'));}}catch(a0_0x5d33c8){}program[a0_0xedff('0x37')](a0_0xedff('0x5a'))[a0_0xedff('0x0')](a0_0xedff('0x2c'))[a0_0xedff('0x40')](_0x5a0024=>{if(!fs[a0_0xedff('0x1d')](_0x5a0024)){console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x8')]('初始化Widget项目'));const _0x1561ab=ora(a0_0xedff('0x7d'));_0x1561ab[a0_0xedff('0xb')]();download(githublink,_0x5a0024,{'clone':![]},_0x448871=>{if(_0x448871){_0x1561ab[a0_0xedff('0x78')]();console[a0_0xedff('0x13')](symbols['error'],chalk[a0_0xedff('0x51')](_0x448871));}else{_0x1561ab[a0_0xedff('0x4f')]();process[a0_0xedff('0x48')](_0x5a0024);console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x8')](a0_0xedff('0x4a')));child_process[a0_0xedff('0x26')](a0_0xedff('0x5c'),{'stdio':a0_0xedff('0x5b')});console[a0_0xedff('0x13')](symbols['info'],chalk[a0_0xedff('0x8')](a0_0xedff('0xa')));console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk['white']('初始化一个Widget'));inquirer[a0_0xedff('0x8c')]([{'name':'id','message':'请输入Widget的标识，要求英文、数字、下划线'},{'name':a0_0xedff('0x7b'),'message':a0_0xedff('0x44')},{'name':a0_0xedff('0x0'),'message':'请输入Widget的描述，要求简短的中文描述信息'},{'name':a0_0xedff('0x39'),'message':'请输入作者名称，如：FreezeSoul<freezesoul@gmail.com>'}])[a0_0xedff('0x33')](_0x19e874=>{try{const _0x39d292=_0x19e874['id'];const _0x276430=_0x19e874[a0_0xedff('0x7b')];const _0x1c8dca=_0x19e874[a0_0xedff('0x0')];const _0x259a47=_0x19e874['author'];const _0x52055f=createWidget(_0x39d292,_0x276430,_0x1c8dca,_0x259a47);if(_0x52055f){console[a0_0xedff('0x13')](symbols[a0_0xedff('0x64')],chalk[a0_0xedff('0x35')](a0_0xedff('0x83')));}}catch(_0x525962){console[a0_0xedff('0x13')](symbols['error'],chalk[a0_0xedff('0x51')](_0x525962));}});}});}else{console[a0_0xedff('0x13')](symbols['error'],chalk['red']('项目'+_0x5a0024+a0_0xedff('0x52')));}});program[a0_0xedff('0x37')](a0_0xedff('0x57'))['description'](a0_0xedff('0x21'))[a0_0xedff('0x40')](()=>{try{const _0x5f3597=a0_0xedff('0x8f');if(fs[a0_0xedff('0x1d')](_0x5f3597)){const _0xef211b=fs[a0_0xedff('0x2a')](_0x5f3597)[a0_0xedff('0x31')]();const _0xb5b5ff=JSON[a0_0xedff('0x70')](_0xef211b);for(let _0x35ee09 of _0xb5b5ff[a0_0xedff('0x1b')]){const _0x39ab95=a0_0xedff('0x80')+_0x35ee09[a0_0xedff('0x86')];const _0x4da97a=_0x39ab95+'/manifest.json';if(fs['existsSync'](_0x4da97a)){let _0x1c9f48=fs['readFileSync'](_0x4da97a)[a0_0xedff('0x31')]();const _0x2878c8=JSON['parse'](_0x1c9f48);console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x8')](a0_0xedff('0x89')+_0x2878c8['id']+a0_0xedff('0x17')+_0x2878c8['name']+',版本:'+_0x2878c8[a0_0xedff('0x24')]));}}}}catch(_0x5f1865){console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x5f1865));}});program[a0_0xedff('0x37')](a0_0xedff('0x7f'))[a0_0xedff('0x0')](a0_0xedff('0x88'))['action'](()=>{inquirer[a0_0xedff('0x8c')]([{'name':'id','message':'请输入Widget的标识，要求英文、数字、下划线'},{'name':'name','message':a0_0xedff('0x44')},{'name':a0_0xedff('0x0'),'message':'请输入Widget的描述，要求简短的中文描述信息'},{'name':a0_0xedff('0x39'),'message':a0_0xedff('0x67')}])[a0_0xedff('0x33')](_0xc2ca30=>{try{const _0x917de5=_0xc2ca30['id'];const _0x1a8374=_0xc2ca30[a0_0xedff('0x7b')];const _0x86953f=_0xc2ca30[a0_0xedff('0x0')];const _0x95f282=_0xc2ca30[a0_0xedff('0x39')];const _0x5d305a='src/widgets/'+_0x917de5;if(!fs[a0_0xedff('0x1d')](_0x5d305a)){const _0x140b75=createWidget(_0x917de5,_0x1a8374,_0x86953f,_0x95f282);if(_0x140b75){console[a0_0xedff('0x13')](symbols[a0_0xedff('0x64')],chalk[a0_0xedff('0x35')](a0_0xedff('0x3e')));}}else{console['log'](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](a0_0xedff('0x6d')+_0x917de5));}}catch(_0x518576){console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x518576));}});});program[a0_0xedff('0x37')](a0_0xedff('0x59'))[a0_0xedff('0x0')](a0_0xedff('0x9'))[a0_0xedff('0x40')](()=>{inquirer[a0_0xedff('0x8c')]([{'name':'id','message':a0_0xedff('0x28'),'type':'rawlist','choices':getWidgetsList()},{'name':'host','message':'请输入平台服务地址，默认调用公共服务'}])[a0_0xedff('0x33')](_0x24946e=>{try{const _0x3751c7=_0x24946e['id'];const _0x987580=getWidgetPath(_0x3751c7);const _0x342799=_0x24946e[a0_0xedff('0x50')]?_0x24946e['host']:dcServerAddress;const _0x16d8ab='src/widgets/'+_0x987580+a0_0xedff('0x16');if(fs['existsSync'](_0x16d8ab)){const _0x53b6a7=a0_0xedff('0x8f');let _0x40c2a1=fs[a0_0xedff('0x2a')](_0x53b6a7)['toString']();const _0x8b368b=JSON[a0_0xedff('0x70')](_0x40c2a1);_0x8b368b['version']=getNextVersion(_0x8b368b[a0_0xedff('0x24')]);for(let _0x423de5 of _0x8b368b['widgets']){_0x423de5[a0_0xedff('0x43')]=_0x423de5['path']===_0x987580;}_0x40c2a1=JSON['stringify'](_0x8b368b,null,0x2);fs[a0_0xedff('0x73')](_0x53b6a7,_0x40c2a1);let _0x47de83=fs['readFileSync'](_0x16d8ab)[a0_0xedff('0x31')]();const _0x2cf230=JSON[a0_0xedff('0x70')](_0x47de83);_0x2cf230[a0_0xedff('0x24')]=getNextVersion(_0x2cf230[a0_0xedff('0x24')]);_0x47de83=JSON[a0_0xedff('0x8a')](_0x2cf230,null,0x2);fs[a0_0xedff('0x73')](_0x16d8ab,_0x47de83);console[a0_0xedff('0x13')](symbols['info'],chalk[a0_0xedff('0x8')]('当前Widget版本号：'+_0x2cf230['version']));startProxyServer(_0x342799,function(){const _0x3589bc=child_process['spawn'](a0_0xedff('0x47'),[a0_0xedff('0x1'),'start-widget',a0_0xedff('0x2d')+_0x987580],{'shell':!![]});_0x3589bc['stdout']['on'](a0_0xedff('0x2e'),function(_0x11b7df){console['log'](_0x11b7df[a0_0xedff('0x31')]());});_0x3589bc['stderr']['on'](a0_0xedff('0x2e'),function(_0x40612c){console['log'](_0x40612c[a0_0xedff('0x31')]());});});}else{console['log'](symbols['error'],chalk[a0_0xedff('0x51')](a0_0xedff('0x1f')+_0x3751c7+a0_0xedff('0x27')));}}catch(_0x8b75cd){console[a0_0xedff('0x13')](symbols['error'],chalk['red'](_0x8b75cd));}});});program[a0_0xedff('0x37')](a0_0xedff('0x2'))[a0_0xedff('0x0')](a0_0xedff('0x68'))['action'](()=>{inquirer[a0_0xedff('0x8c')]([{'name':'id','message':'请选择要构建的Widget','type':a0_0xedff('0x15'),'choices':getWidgetsList()}])[a0_0xedff('0x33')](_0x2a647a=>{try{const _0x3bb626=_0x2a647a['id'];const _0x44cd86=getWidgetPath(_0x3bb626);const _0x5adc6c=a0_0xedff('0x80')+_0x44cd86+a0_0xedff('0x16');if(fs['existsSync'](_0x5adc6c)){let _0x411498=fs[a0_0xedff('0x2a')](_0x5adc6c)[a0_0xedff('0x31')]();const _0x553844=JSON['parse'](_0x411498);_0x553844['version']=getNextVersion(_0x553844['version']);_0x411498=JSON[a0_0xedff('0x8a')](_0x553844,null,0x2);fs[a0_0xedff('0x73')](_0x5adc6c,_0x411498);console['log'](symbols[a0_0xedff('0xe')],chalk['white']('当前Widget版本号：'+_0x553844[a0_0xedff('0x24')]));child_process['execSync'](a0_0xedff('0x82')+_0x44cd86,{'stdio':'inherit'});}else{console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk['red'](a0_0xedff('0x1f')+_0x3bb626+a0_0xedff('0x27')));}}catch(_0x31ebb3){console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x31ebb3));}});});program[a0_0xedff('0x37')](a0_0xedff('0x36'))[a0_0xedff('0x0')](a0_0xedff('0x8d'))['action'](()=>{try{const _0x2d3366=getWidgetsList();for(let _0xed6565 of _0x2d3366){const _0x3d82e1=_0xed6565[a0_0xedff('0x6f')];const _0x110992=getWidgetPath(_0x3d82e1);const _0x46450a=a0_0xedff('0x80')+_0x110992+'/manifest.json';if(fs['existsSync'](_0x46450a)){let _0x148185=fs[a0_0xedff('0x2a')](_0x46450a)['toString']();const _0x1ed498=JSON[a0_0xedff('0x70')](_0x148185);_0x1ed498[a0_0xedff('0x24')]=getNextVersion(_0x1ed498[a0_0xedff('0x24')]);_0x148185=JSON[a0_0xedff('0x8a')](_0x1ed498,null,0x2);fs[a0_0xedff('0x73')](_0x46450a,_0x148185);console['log'](symbols['info'],chalk[a0_0xedff('0x8')](a0_0xedff('0x65')+_0x3d82e1));console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk['white'](a0_0xedff('0x38')+_0x1ed498[a0_0xedff('0x24')]));child_process[a0_0xedff('0x26')](a0_0xedff('0x82')+_0x110992,{'stdio':a0_0xedff('0x5b')});console['log'](symbols['success'],chalk['green']('完成构建Widget：'+_0x1ed498[a0_0xedff('0x24')]));const _0x16a9c5='dist/widgets/'+_0x110992;const _0x46cdc7=a0_0xedff('0x87')+_0x110992;if(!fs[a0_0xedff('0x1d')](a0_0xedff('0x2'))){fs[a0_0xedff('0x77')](a0_0xedff('0x2'));}if(fs[a0_0xedff('0x1d')](_0x16a9c5)){fse[a0_0xedff('0x18')](_0x16a9c5,_0x46cdc7);}}else{console['log'](symbols['error'],chalk[a0_0xedff('0x51')]('Widget:'+_0x3d82e1+a0_0xedff('0x27')));}}}catch(_0x443b81){console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x443b81));}});program[a0_0xedff('0x37')](a0_0xedff('0x2f'))[a0_0xedff('0x0')]('发布一个Widget')[a0_0xedff('0x40')](()=>{inquirer[a0_0xedff('0x8c')]([{'name':'id','message':a0_0xedff('0x66'),'type':a0_0xedff('0x15'),'choices':getWidgetsList()},{'name':a0_0xedff('0x69'),'message':a0_0xedff('0x76')}])[a0_0xedff('0x33')](_0x5226db=>{try{const _0x2a9630=_0x5226db['id'];const _0x28ef86=getWidgetPath(_0x2a9630);const _0x2a6a19=a0_0xedff('0x80')+_0x28ef86;const _0x3777d7=a0_0xedff('0x7c')+_0x28ef86;const _0x2cae2c=_0x2a6a19+a0_0xedff('0x16');const _0x2a7cec=new Date()['toISOString']()[a0_0xedff('0x5d')](/T/,'')['replace'](/\..+/,'')[a0_0xedff('0x5d')](/-/g,'')[a0_0xedff('0x5d')](/:/g,'');const _0x506178=_0x2a9630+'.'+_0x2a7cec;const _0x3cd6d7=_0x506178+'.src.tar';const _0x5acc85=_0x506178+a0_0xedff('0x1a');const _0x5e32e3=a0_0xedff('0x90')+_0x3cd6d7;const _0x12ed04=a0_0xedff('0x90')+_0x5acc85;if(!fs['existsSync']('publish')){fs[a0_0xedff('0x77')](a0_0xedff('0x2f'));}if(fs[a0_0xedff('0x1d')](_0x2cae2c)){let _0x2e5402=fs[a0_0xedff('0x2a')](_0x2cae2c)[a0_0xedff('0x31')]();const _0x1433d6=JSON['parse'](_0x2e5402);_0x1433d6[a0_0xedff('0x24')]=getNextVersion(_0x1433d6[a0_0xedff('0x24')]);_0x2e5402=JSON[a0_0xedff('0x8a')](_0x1433d6,null,0x2);fs[a0_0xedff('0x73')](_0x2cae2c,_0x2e5402);console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x8')](a0_0xedff('0x38')+_0x1433d6[a0_0xedff('0x24')]));child_process['execSync'](a0_0xedff('0x82')+_0x28ef86,{'stdio':a0_0xedff('0x5b')});fs[a0_0xedff('0x73')](_0x2a6a19+a0_0xedff('0x5e'),_0x28ef86);fs['writeFileSync'](_0x3777d7+a0_0xedff('0x5e'),_0x28ef86);tar[a0_0xedff('0x7')](_0x2a6a19)[a0_0xedff('0x3c')](fs[a0_0xedff('0x42')](_0x5e32e3));tar['pack'](_0x3777d7)[a0_0xedff('0x3c')](fs[a0_0xedff('0x42')](_0x12ed04));const _0x685d9e=_0x5226db[a0_0xedff('0x69')];if(_0x685d9e==='y'){connectFtpServer(function(_0x1f317b){const _0x259335=ora('部件代码提交中...');_0x259335['start']();const _0x3c5580=fs[a0_0xedff('0x12')](_0x5e32e3);const _0x2fed25=fs[a0_0xedff('0x5f')](_0x5e32e3)[a0_0xedff('0xc')];_0x1f317b[a0_0xedff('0x79')](_0x3c5580,_0x3cd6d7,function(_0x83ced9){if(_0x83ced9){_0x259335[a0_0xedff('0x78')]();console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x83ced9));throw _0x83ced9;}_0x1f317b[a0_0xedff('0x7e')]();_0x259335[a0_0xedff('0x4f')](a0_0xedff('0x46'));console[a0_0xedff('0x13')](symbols[a0_0xedff('0x64')],chalk[a0_0xedff('0x8')](a0_0xedff('0x49')));console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x8')](a0_0xedff('0x1c')+_0x506178));});let _0x224549=0x0;_0x3c5580['on'](a0_0xedff('0x2e'),function(_0x24d882){_0x224549+=_0x24d882['length'];_0x259335[a0_0xedff('0x62')]=a0_0xedff('0x6')+((_0x224549/_0x2fed25*0x64)[a0_0xedff('0x4d')](0x2)+'%');});});}}else{console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](a0_0xedff('0x1f')+_0x2a9630+'不存在'));}}catch(_0x4a47ea){console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x4a47ea));}});});program[a0_0xedff('0x70')](process[a0_0xedff('0x72')]);function createWidget(_0x43e666,_0x1f3899,_0x3d0a7a,_0x581e4b){if(!_0x43e666||!_0x1f3899||!_0x3d0a7a){console['log'](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](a0_0xedff('0x3a')));return![];}console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x8')](a0_0xedff('0x3f')+_0x43e666+a0_0xedff('0xf')));try{const _0x1309b1=a0_0xedff('0x80')+_0x43e666;const _0x55d860=a0_0xedff('0x4e');if(!fs['existsSync'](_0x55d860)){console['log'](symbols[a0_0xedff('0x54')],chalk['red']('Widget模板文件夹不存在'));return![];}if(fs['existsSync'](_0x1309b1)){console[a0_0xedff('0x13')](symbols['error'],chalk[a0_0xedff('0x51')]('Widget:'+_0x43e666+a0_0xedff('0x52')));return![];}copydir[a0_0xedff('0x71')](_0x55d860,_0x1309b1);const _0x4d41e7=_0x1309b1+'/manifest.json';let _0x233d89=fs['readFileSync'](_0x4d41e7)[a0_0xedff('0x31')]();const _0x1b76bd=JSON['parse'](_0x233d89);_0x1b76bd['id']=_0x43e666;_0x1b76bd[a0_0xedff('0x7b')]=_0x1f3899;_0x1b76bd[a0_0xedff('0x0')]=_0x3d0a7a;_0x1b76bd[a0_0xedff('0x39')]=_0x581e4b;_0x233d89=JSON[a0_0xedff('0x8a')](_0x1b76bd,null,0x2);fs[a0_0xedff('0x73')](_0x4d41e7,_0x233d89);const _0xd8245b=a0_0xedff('0x8f');let _0x40c5de=fs[a0_0xedff('0x2a')](_0xd8245b)[a0_0xedff('0x31')]();const _0x1ada6c=JSON[a0_0xedff('0x70')](_0x40c5de);_0x1ada6c[a0_0xedff('0x24')]=getNextVersion(_0x1ada6c[a0_0xedff('0x24')]);for(let _0x11b935 of _0x1ada6c[a0_0xedff('0x1b')]){_0x11b935['enable']=![];}_0x1ada6c['widgets'][a0_0xedff('0x58')]({'group':'测试','tag':a0_0xedff('0x4c'),'path':_0x43e666,'enable':!![]});_0x40c5de=JSON[a0_0xedff('0x8a')](_0x1ada6c,null,0x2);fs[a0_0xedff('0x73')](_0xd8245b,_0x40c5de);console['log'](symbols[a0_0xedff('0xe')],chalk['white'](a0_0xedff('0x74')+_0x43e666+a0_0xedff('0xf')));}catch(_0x4463de){console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x4463de));}return!![];}function getNextVersion(_0x1712f6){if(_0x1712f6){const _0x3b89e5=_0x1712f6[a0_0xedff('0x29')](/(.*\.)(\d+)$/);if(_0x3b89e5&&_0x3b89e5[0x1]&&_0x3b89e5[0x2]){return''+_0x3b89e5[0x1]+(parseInt(_0x3b89e5[0x2])+0x1);}}return _0x1712f6;}function getWidgetsList(){const _0x39064c=[];try{const _0x6d9d89=a0_0xedff('0x8f');if(fs[a0_0xedff('0x1d')](_0x6d9d89)){const _0x593a9a=fs[a0_0xedff('0x2a')](_0x6d9d89)['toString']();const _0x540b6c=JSON[a0_0xedff('0x70')](_0x593a9a);for(let _0x4303cc of _0x540b6c[a0_0xedff('0x1b')]){try{const _0x1f463f=a0_0xedff('0x80')+_0x4303cc['path'];const _0x4326df=_0x1f463f+a0_0xedff('0x16');if(fs['existsSync'](_0x4326df)){let _0x5dd63f=fs[a0_0xedff('0x2a')](_0x4326df)['toString']();const _0x3ab3f4=JSON[a0_0xedff('0x70')](_0x5dd63f);_0x39064c['push']({'value':_0x3ab3f4['id'],'name':a0_0xedff('0x89')+_0x3ab3f4['id']+a0_0xedff('0x17')+_0x3ab3f4[a0_0xedff('0x7b')]+a0_0xedff('0x8e')+_0x3ab3f4[a0_0xedff('0x24')]});}}catch(_0x28d0a5){console['log'](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x4303cc[a0_0xedff('0x86')]+a0_0xedff('0x23')));console['log'](symbols['error'],chalk[a0_0xedff('0x51')](_0x28d0a5));}}}}catch(_0x341726){console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](a0_0xedff('0x6a')));console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x341726));}return _0x39064c;}function getWidgetPath(_0x2c9394){const _0x1b06c5='src/widgets/widgets.json';let _0x5ab865=fs[a0_0xedff('0x2a')](_0x1b06c5)['toString']();const _0xdfd92b=JSON['parse'](_0x5ab865);for(let _0x3a1b73 of _0xdfd92b[a0_0xedff('0x1b')]){const _0x1e2084=a0_0xedff('0x80')+_0x3a1b73['path']+a0_0xedff('0x16');let _0x3b7d05=fs[a0_0xedff('0x2a')](_0x1e2084)[a0_0xedff('0x31')]();const _0xe6fead=JSON[a0_0xedff('0x70')](_0x3b7d05);if(_0xe6fead['id']===_0x2c9394){return _0x3a1b73['path'];}}console[a0_0xedff('0x13')](symbols['error'],chalk[a0_0xedff('0x51')](a0_0xedff('0x1e')+_0x2c9394));}function startProxyServer(_0x158bb5,_0x7da36d){console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk['blue']('正在启动代理服务...'));var _0x11e73b=express();_0x11e73b[a0_0xedff('0x34')]('/',proxy({'target':_0x158bb5,'changeOrigin':!![],'pathRewrite':{'/core/widgets':a0_0xedff('0x45')},'router':{'/core/widgets':widgetDebugUrl}}));_0x11e73b['listen'](proxyServerPort,function(){console['log'](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x2b')](a0_0xedff('0x6c')));console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x2b')](a0_0xedff('0x84')));console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x35')](a0_0xedff('0x5')));console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x35')](a0_0xedff('0x14')));console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x35')](a0_0xedff('0x8b')));console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk['green'](a0_0xedff('0x4b')));ChromeLauncher[a0_0xedff('0x19')]({'startingUrl':a0_0xedff('0x4')+proxyServerPort,'chromeFlags':[a0_0xedff('0x56'),a0_0xedff('0x75'),a0_0xedff('0x32'),a0_0xedff('0x30')]})[a0_0xedff('0x33')](_0x5d09a=>{console[a0_0xedff('0x13')](symbols[a0_0xedff('0xe')],chalk[a0_0xedff('0x2b')]('谷歌浏览器启动成功...'));});if(_0x7da36d){_0x7da36d();}});}function connectFtpServer(_0x3a8305){const _0x2abb89=new Client();const _0x27b9be=ora(a0_0xedff('0x61'));_0x27b9be[a0_0xedff('0xb')]();_0x2abb89['on'](a0_0xedff('0x3'),function(){_0x27b9be[a0_0xedff('0x4f')]();console['log'](symbols[a0_0xedff('0xe')],chalk['white'](a0_0xedff('0x10')));if(_0x3a8305){_0x3a8305(_0x2abb89);}});_0x2abb89['on'](a0_0xedff('0x54'),function(_0x347673){_0x27b9be[a0_0xedff('0x78')]();console[a0_0xedff('0x13')](symbols[a0_0xedff('0x54')],chalk[a0_0xedff('0x51')](_0x347673));});_0x2abb89[a0_0xedff('0x3d')]({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}