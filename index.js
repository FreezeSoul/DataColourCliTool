#!/usr/bin/env node

const a0_0xea33=['5Yib5bu65LiA5LiqV2lkZ2V0','dmVyc2lvbg==','V2lkZ2V0Og==','ZGF0YQ==','aW5pdCA8bmFtZT4=','cHVzaA==','LnNyYy50YXI=','bWtkaXJTeW5j','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4u','aGFuZGxlYmFycw==','c3RkZXJy','Y2hyb21lLWxhdW5jaGVy','5a6M5oiQ5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','cGFyc2U=','LS11c2VyLWRhdGEtZGlyPS4vY2hyb21lX3RtcA==','5p6E5bu65LiA5LiqV2lkZ2V0','ZW5hYmxl','d2hpdGU=','ZGVzY3JpcHRpb24=','6K+36L6T5YWlV2lkZ2V055qE5o+P6L+w77yM6KaB5rGC566A55+t55qE5Lit5paH5o+P6L+w5L+h5oGv','VGVzdA==','LS0gLS1wYXRoPQ==','cnVu','ZGVidWc=','cHJvbXB0','cHV0','L21hbmlmZXN0Lmpzb24=','LS1tZWRpYS1jYWNoZS1zaXplPTE=','ZGF0YWNvbG91cg==','c3RhcnQ=','5qCH6K+GOg==','cmVwbGFjZQ==','Y29ubmVjdA==','6K+36YCJ5oup6KaB6LCD6K+V55qEV2lkZ2V0','Y3JlYXRlUmVhZFN0cmVhbQ==','5ZCv5Yqo6LC35q2M5rWP6KeI5Zmo6LCD6K+VLi4u','ZXhwcmVzcw==','aG9zdA==','ZXJyb3I=','YWN0aW9u','bG9n','5pyq5om+5Yiw5Yy56YWN55qEd2lkZ2V077ya','ZW5k','5Luj55CG5pyN5Yqh5Zmo5bey5ZCv5YqoLi4u','Y2hpbGRfcHJvY2Vzcw==','6K+36L6T5YWl5bmz5Y+w5pyN5Yqh5Zyw5Z2A77yM6buY6K6k6LCD55So5YWs5YWx5pyN5Yqh','LS1kaXNhYmxlLXdlYi1zZWN1cml0eQ==','c3luYw==','5q2j5Zyo5ZCv5Yqo5Luj55CG5pyN5YqhLi4u','bmFtZQ==','c3RhdFN5bmM=','c3JjL3dpZGdldHMv','RnJlZXplU291bC9EYXRhQ29sb3VyV2lkZ2V0VGVtcGxhdGUjbWFzdGVy','6LCD6K+V5LiA5LiqV2lkZ2V0','cGlwZQ==','bGVuZ3Ro','6K+36L6T5YWlV2lkZ2V055qE5ZCN56ew77yM6KaB5rGC566A55+t55qE5Lit5paH5ZCN56ew5a6a5LmJ','aHR0cC1wcm94eS1taWRkbGV3YXJl','5bey5a2Y5Zyo','c2l6ZQ==','aW5mbw==','LOeJiOacrDo=','aW5oZXJpdA==','ZmFpbA==','YXJndg==','aHR0cDovLzEyNy4wLjAuMTo4MDg4Lw==','c3Bhd24=','6LC35q2M5rWP6KeI5Zmo5ZCv5Yqo5oiQ5YqfLi4u','d3JpdGVGaWxlU3luYw==','dG9TdHJpbmc=','dGFn','d2lkZ2V0cw==','dG9JU09TdHJpbmc=','6YOo5Lu25bey5oiQ5Yqf5o+Q5LqkLi4u','Y3JlYXRlV3JpdGVTdHJlYW0=','aHR0cDovLzEyNy4wLjAuMTo=','cmVzb2x2ZQ==','bGF1bmNo','bWF0Y2g=','dmFsdWU=','cHVibGlzaA==','ZXhpc3RzU3luYw==','cmVhZEZpbGVTeW5j','5aaC5rWP6KeI5Zmo5ZCv5Yqo5aSx6LSl77yM6K+36YCa6L+H5aaC5LiL5ZG95Luk6KGM5omL5bel5ZCv5Yqo77ya','6K+35Y+N6aaI5Y+R5biD5bqP5Y+3Og==','YnVpbGQv','dGFyLWZz','c3VjY2VlZA==','6K+36L6T5YWlV2lkZ2V055qE5qCH6K+G77yM6KaB5rGC6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/','Ymx1ZQ==','c3JjL3dpZGdldHMvd2lkZ2V0','ZG93bmxvYWQtZ2l0LXJlcG8=','5a6M5oiQ6aG555uu5Yid5aeL5YyW77yM6K+35Yib5bu65LiA5LiqV2lkZ2V0','dXNl','6K+36L6T5YWlV2lkZ2V06Lev5b6E77yM6buY6K6k6Lev5b6EdW5vZmZpY2lhbA==','Y29weS1kaXI=','ZGlzdC93aWRnZXRzLw==','cmVk','5b2T5YmNV2lkZ2V05qCH6K+G77ya','5q2j5Zyo5Yib5bu6V2lkZ2V0Og==','5bey5a2Y5Zyo5a+55bqU55uu5b2V','dGhlbg==','cHVibGlzaC8=','YXV0aG9y','L19fcGF0aF9fLnR4dA==','d2lkZ2V0cy5qc29u6K+75Y+W5aSx6LSl','ZXhlY1N5bmM=','dW5vZmZpY2lhbA==','6K+36L6T5YWl5L2c6ICF5ZCN56ew77yM5aaC77yaRnJlZXplU291bDxmcmVlemVzb3VsQGdtYWlsLmNvbT4=','6K+75Y+W5aSx6LSl','TGludXg6IC9vcHQvZ29vZ2xlL2Nocm9tZS9jaHJvbWUgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9L3RtcC9jaHJvbWVfdG1w','5byA5aeL5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','ZnMtZXh0cmE=','ZnRw','Y29tbWFuZA==','bnBt','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','Li4u','V2lkZ2V05qih5p2/5paH5Lu25aS55LiN5a2Y5Zyo','c3RhcnQtd2lkZ2V0','LOWQjeensDo=','L3dpZGdldHM=','cGF0aA==','ZnRwLmRhdGFjb2xvdXIuY24=','c3RyaW5naWZ5','5Yid5aeL5YyWV2lkZ2V06aG555uu','bnBtIHJ1biBidWlsZC13aWRnZXQ6cHJvIC0tIC0tcGF0aD0=','YnVpbGRBbGw=','V2lkZ2V05Yib5bu65oiQ5Yqf','c3VjY2Vzcw==','Z3JlZW4=','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','bG9nLXN5bWJvbHM=','6K+35o+Q5L6b5a6M5pW055qEV2lkZ2V05L+h5oGv','YnVpbGQ=','cmF3bGlzdA==','cGFja2FnZS5qc29u','T1NYOiBvcGVuIC1uIC1hIC9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSAtLWFyZ3MgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9Ii90bXAvY2hyb21lX3RtcCI='];(function(_0x1069b7,_0x8ae043){const _0x1f87ea=function(_0x52c81f){while(--_0x52c81f){_0x1069b7['push'](_0x1069b7['shift']());}};_0x1f87ea(++_0x8ae043);}(a0_0xea33,0x94));const a0_0x15a4=function(_0x1069b7,_0x8ae043){_0x1069b7=_0x1069b7-0x0;let _0x1f87ea=a0_0xea33[_0x1069b7];if(a0_0x15a4['mwQtpQ']===undefined){(function(){let _0x6459f0;try{const _0x48391d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x6459f0=_0x48391d();}catch(_0x1ced13){_0x6459f0=window;}const _0x43ca5e='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x6459f0['atob']||(_0x6459f0['atob']=function(_0x14d3d5){const _0x56c26d=String(_0x14d3d5)['replace'](/=+$/,'');let _0x5213c2='';for(let _0x1142d2=0x0,_0x353126,_0x22dc8e,_0x15d8ec=0x0;_0x22dc8e=_0x56c26d['charAt'](_0x15d8ec++);~_0x22dc8e&&(_0x353126=_0x1142d2%0x4?_0x353126*0x40+_0x22dc8e:_0x22dc8e,_0x1142d2++%0x4)?_0x5213c2+=String['fromCharCode'](0xff&_0x353126>>(-0x2*_0x1142d2&0x6)):0x0){_0x22dc8e=_0x43ca5e['indexOf'](_0x22dc8e);}return _0x5213c2;});}());a0_0x15a4['wTccPe']=function(_0x36dbfd){const _0x1c1912=atob(_0x36dbfd);let _0x3849fe=[];for(let _0x561ef5=0x0,_0x46bd27=_0x1c1912['length'];_0x561ef5<_0x46bd27;_0x561ef5++){_0x3849fe+='%'+('00'+_0x1c1912['charCodeAt'](_0x561ef5)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3849fe);};a0_0x15a4['CjPaXI']={};a0_0x15a4['mwQtpQ']=!![];}const _0x52c81f=a0_0x15a4['CjPaXI'][_0x1069b7];if(_0x52c81f===undefined){_0x1f87ea=a0_0x15a4['wTccPe'](_0x1f87ea);a0_0x15a4['CjPaXI'][_0x1069b7]=_0x1f87ea;}else{_0x1f87ea=_0x52c81f;}return _0x1f87ea;};const fs=require('fs');const fse=require(a0_0x15a4('0x66'));const path=require(a0_0x15a4('0x70'));const ora=require('ora');const tar=require(a0_0x15a4('0x4c'));const Client=require(a0_0x15a4('0x67'));const chalk=require('chalk');const express=require(a0_0x15a4('0x1a'));const copydir=require(a0_0x15a4('0x55'));const program=require('commander');const inquirer=require('inquirer');const symbols=require(a0_0x15a4('0x7a'));const handlebars=require(a0_0x15a4('0x89'));const proxy=require(a0_0x15a4('0x2f'));const download=require(a0_0x15a4('0x51'));const child_process=require(a0_0x15a4('0x22'));const ChromeLauncher=require(a0_0x15a4('0x1'));const githublink=a0_0x15a4('0x2a');const dcServerAddress='http://39.101.138.43:8080';const widgetDebugUrl=a0_0x15a4('0x37');const ftpServerAddress=a0_0x15a4('0x71');const ftpServerUserName=a0_0x15a4('0x12');const ftpServerPassword=a0_0x15a4('0x12');const proxyServerPort=0x270f;try{const packagePath=path[a0_0x15a4('0x42')](__dirname,a0_0x15a4('0x7e'));if(fs[a0_0x15a4('0x47')](packagePath)){const pjson=require(packagePath);const version=pjson[a0_0x15a4('0x81')];program[a0_0x15a4('0x81')](version,'-v,\x20--version');}}catch(a0_0x4b6833){}program[a0_0x15a4('0x68')](a0_0x15a4('0x84'))[a0_0x15a4('0x8')](a0_0x15a4('0x73'))[a0_0x15a4('0x1d')](_0x23a38e=>{if(!fs[a0_0x15a4('0x47')](_0x23a38e)){console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x7')]('初始化Widget项目'));const _0x34b0d0=ora('正在下载Widget模板...');_0x34b0d0[a0_0x15a4('0x13')]();download(githublink,_0x23a38e,{'clone':![]},_0x3a6f16=>{if(_0x3a6f16){_0x34b0d0[a0_0x15a4('0x35')]();console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](_0x3a6f16));}else{_0x34b0d0[a0_0x15a4('0x4d')]();process['chdir'](_0x23a38e);console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x7')](a0_0x15a4('0x65')));child_process['execSync']('npm\x20install',{'stdio':a0_0x15a4('0x34')});console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x7')](a0_0x15a4('0x2')));console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x7')](a0_0x15a4('0x52')));}});}else{console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')]('项目'+_0x23a38e+a0_0x15a4('0x30')));}});program[a0_0x15a4('0x68')]('list')['description']('列出所有Widget')[a0_0x15a4('0x1d')](()=>{try{const _0x2568e8=a0_0x15a4('0x79');if(fs['existsSync'](_0x2568e8)){const _0x415abf=fs[a0_0x15a4('0x48')](_0x2568e8)[a0_0x15a4('0x3b')]();const _0x365f41=JSON[a0_0x15a4('0x3')](_0x415abf);for(let _0x13d549 of _0x365f41['widgets']){const _0x4d90db=a0_0x15a4('0x29')+_0x13d549['path'];const _0x34a5e3=_0x4d90db+a0_0x15a4('0x10');if(fs['existsSync'](_0x34a5e3)){let _0x46285a=fs[a0_0x15a4('0x48')](_0x34a5e3)[a0_0x15a4('0x3b')]();const _0x3546bf=JSON[a0_0x15a4('0x3')](_0x46285a);console[a0_0x15a4('0x1e')](symbols['info'],chalk['white'](a0_0x15a4('0x14')+_0x3546bf['id']+',名称:'+_0x3546bf['name']+a0_0x15a4('0x33')+_0x3546bf[a0_0x15a4('0x81')]));}}}}catch(_0x3d157d){console['log'](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](_0x3d157d));}});program['command']('create')[a0_0x15a4('0x8')](a0_0x15a4('0x80'))[a0_0x15a4('0x1d')](()=>{inquirer['prompt']([{'name':'id','message':a0_0x15a4('0x4e')},{'name':a0_0x15a4('0x27'),'message':a0_0x15a4('0x2e')},{'name':a0_0x15a4('0x8'),'message':a0_0x15a4('0x9')},{'name':a0_0x15a4('0x5d'),'message':a0_0x15a4('0x62')},{'name':a0_0x15a4('0x70'),'message':a0_0x15a4('0x54')}])[a0_0x15a4('0x5b')](_0x5074b4=>{try{const _0x1aeeab=_0x5074b4['id'];const _0x1b8943=_0x5074b4['name'];const _0x56ddad=_0x5074b4[a0_0x15a4('0x8')];const _0x55e330=_0x5074b4[a0_0x15a4('0x5d')];const _0x8892b4=_0x5074b4[a0_0x15a4('0x70')]?_0x5074b4[a0_0x15a4('0x70')][a0_0x15a4('0x15')](/^\/+|\/+$/g,''):a0_0x15a4('0x61');const _0x1f3da9=createWidget(_0x1aeeab,_0x1b8943,_0x56ddad,_0x55e330,_0x8892b4);if(_0x1f3da9){console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x77')],chalk[a0_0x15a4('0x78')](a0_0x15a4('0x76')));}}catch(_0x17061b){console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](_0x17061b));}});});program[a0_0x15a4('0x68')](a0_0x15a4('0xd'))['description'](a0_0x15a4('0x2b'))[a0_0x15a4('0x1d')](()=>{inquirer[a0_0x15a4('0xe')]([{'name':'id','message':a0_0x15a4('0x17'),'type':a0_0x15a4('0x7d'),'choices':getWidgetsList()},{'name':a0_0x15a4('0x1b'),'message':a0_0x15a4('0x23')}])[a0_0x15a4('0x5b')](_0x33726c=>{try{const _0x2e4088=_0x33726c['id'];const _0x1da382=getWidgetPath(_0x2e4088);const _0x3234fc=_0x33726c[a0_0x15a4('0x1b')]?_0x33726c['host']:dcServerAddress;const _0x4194c0=a0_0x15a4('0x29')+_0x1da382+a0_0x15a4('0x10');if(fs[a0_0x15a4('0x47')](_0x4194c0)){const _0x3a4c9e='src/widgets/widgets.json';let _0x4ff23d=fs[a0_0x15a4('0x48')](_0x3a4c9e)[a0_0x15a4('0x3b')]();const _0x59c288=JSON[a0_0x15a4('0x3')](_0x4ff23d);_0x59c288[a0_0x15a4('0x81')]=getNextVersion(_0x59c288[a0_0x15a4('0x81')]);for(let _0x5542cf of _0x59c288[a0_0x15a4('0x3d')]){_0x5542cf[a0_0x15a4('0x6')]=_0x5542cf['path']===_0x1da382;}_0x4ff23d=JSON[a0_0x15a4('0x72')](_0x59c288,null,0x2);fs[a0_0x15a4('0x3a')](_0x3a4c9e,_0x4ff23d);let _0x53145e=fs[a0_0x15a4('0x48')](_0x4194c0)[a0_0x15a4('0x3b')]();const _0x5b8629=JSON['parse'](_0x53145e);_0x5b8629[a0_0x15a4('0x81')]=getNextVersion(_0x5b8629[a0_0x15a4('0x81')]);_0x53145e=JSON[a0_0x15a4('0x72')](_0x5b8629,null,0x2);fs['writeFileSync'](_0x4194c0,_0x53145e);console['log'](symbols[a0_0x15a4('0x32')],chalk['white'](a0_0x15a4('0x6a')+_0x5b8629[a0_0x15a4('0x81')]));startProxyServer(_0x3234fc,function(){const _0xef6bf1=child_process[a0_0x15a4('0x38')](a0_0x15a4('0x69'),[a0_0x15a4('0xc'),a0_0x15a4('0x6d'),a0_0x15a4('0xb')+_0x1da382],{'shell':!![]});_0xef6bf1['stdout']['on'](a0_0x15a4('0x83'),function(_0x54f20f){console['log'](_0x54f20f['toString']());});_0xef6bf1[a0_0x15a4('0x0')]['on']('data',function(_0x1824dd){console[a0_0x15a4('0x1e')](_0x1824dd[a0_0x15a4('0x3b')]());});});}else{console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](a0_0x15a4('0x82')+_0x2e4088+'不存在'));}}catch(_0x8b5196){console['log'](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](_0x8b5196));}});});program[a0_0x15a4('0x68')](a0_0x15a4('0x7c'))['description'](a0_0x15a4('0x5'))['action'](()=>{inquirer[a0_0x15a4('0xe')]([{'name':'id','message':'请选择要构建的Widget','type':'rawlist','choices':getWidgetsList()}])['then'](_0x262021=>{try{const _0x60a1e7=_0x262021['id'];const _0x162cb3=getWidgetPath(_0x60a1e7);const _0x5e85a0=a0_0x15a4('0x29')+_0x162cb3+'/manifest.json';if(fs[a0_0x15a4('0x47')](_0x5e85a0)){let _0x2d2951=fs[a0_0x15a4('0x48')](_0x5e85a0)[a0_0x15a4('0x3b')]();const _0x4eb103=JSON[a0_0x15a4('0x3')](_0x2d2951);_0x4eb103[a0_0x15a4('0x81')]=getNextVersion(_0x4eb103[a0_0x15a4('0x81')]);_0x2d2951=JSON[a0_0x15a4('0x72')](_0x4eb103,null,0x2);fs[a0_0x15a4('0x3a')](_0x5e85a0,_0x2d2951);console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x7')](a0_0x15a4('0x6a')+_0x4eb103[a0_0x15a4('0x81')]));child_process[a0_0x15a4('0x60')](a0_0x15a4('0x74')+_0x162cb3,{'stdio':a0_0x15a4('0x34')});}else{console[a0_0x15a4('0x1e')](symbols['error'],chalk['red']('Widget:'+_0x60a1e7+'不存在'));}}catch(_0x48b7c3){console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](_0x48b7c3));}});});program[a0_0x15a4('0x68')](a0_0x15a4('0x75'))['description']('构建所有Widgets')['action'](()=>{try{const _0x47d345=getWidgetsList();for(let _0x2fa258 of _0x47d345){const _0x3b6dbf=_0x2fa258[a0_0x15a4('0x45')];const _0x4d3116=getWidgetPath(_0x3b6dbf);const _0x2a9f7f=a0_0x15a4('0x29')+_0x4d3116+a0_0x15a4('0x10');if(fs[a0_0x15a4('0x47')](_0x2a9f7f)){let _0x2a9cc3=fs[a0_0x15a4('0x48')](_0x2a9f7f)[a0_0x15a4('0x3b')]();const _0x1495b4=JSON['parse'](_0x2a9cc3);_0x1495b4['version']=getNextVersion(_0x1495b4[a0_0x15a4('0x81')]);_0x2a9cc3=JSON[a0_0x15a4('0x72')](_0x1495b4,null,0x2);fs[a0_0x15a4('0x3a')](_0x2a9f7f,_0x2a9cc3);console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk['white'](a0_0x15a4('0x58')+_0x3b6dbf));console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk['white'](a0_0x15a4('0x6a')+_0x1495b4[a0_0x15a4('0x81')]));child_process[a0_0x15a4('0x60')](a0_0x15a4('0x74')+_0x4d3116,{'stdio':'inherit'});console[a0_0x15a4('0x1e')](symbols['success'],chalk[a0_0x15a4('0x78')]('完成构建Widget：'+_0x1495b4['version']));const _0x5d5d20=a0_0x15a4('0x56')+_0x4d3116;const _0x5ea6aa=a0_0x15a4('0x4b')+_0x4d3116;if(!fs[a0_0x15a4('0x47')](a0_0x15a4('0x7c'))){fs[a0_0x15a4('0x87')](a0_0x15a4('0x7c'));}if(fs[a0_0x15a4('0x47')](_0x5d5d20)){fse['moveSync'](_0x5d5d20,_0x5ea6aa);}}else{console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](a0_0x15a4('0x82')+_0x3b6dbf+'不存在'));}}}catch(_0x103f88){console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](_0x103f88));}});program['command'](a0_0x15a4('0x46'))[a0_0x15a4('0x8')]('发布一个Widget')[a0_0x15a4('0x1d')](()=>{inquirer[a0_0x15a4('0xe')]([{'name':'id','message':'请选择要发布的Widget','type':a0_0x15a4('0x7d'),'choices':getWidgetsList()},{'name':a0_0x15a4('0x67'),'message':'请确认是否备份至公共插件中心，请输入y/n(默认n)'}])[a0_0x15a4('0x5b')](_0x261f3b=>{try{const _0x47e7c7=_0x261f3b['id'];const _0x4de481=getWidgetPath(_0x47e7c7);const _0x349f97=a0_0x15a4('0x29')+_0x4de481;const _0x416dfd=a0_0x15a4('0x56')+_0x4de481;const _0x1fb57a=_0x349f97+'/manifest.json';const _0x45de45=new Date()[a0_0x15a4('0x3e')]()[a0_0x15a4('0x15')](/T/,'')['replace'](/\..+/,'')['replace'](/-/g,'')[a0_0x15a4('0x15')](/:/g,'');const _0x2baa3e=_0x47e7c7+'.'+_0x45de45;const _0x523196=_0x2baa3e+a0_0x15a4('0x86');const _0x191d0a=_0x2baa3e+'.dist.tar';const _0xd2d834=a0_0x15a4('0x5c')+_0x523196;const _0x360e94=a0_0x15a4('0x5c')+_0x191d0a;if(!fs[a0_0x15a4('0x47')](a0_0x15a4('0x46'))){fs[a0_0x15a4('0x87')](a0_0x15a4('0x46'));}if(fs[a0_0x15a4('0x47')](_0x1fb57a)){let _0x488462=fs[a0_0x15a4('0x48')](_0x1fb57a)['toString']();const _0x3fb752=JSON[a0_0x15a4('0x3')](_0x488462);_0x3fb752[a0_0x15a4('0x81')]=getNextVersion(_0x3fb752['version']);_0x488462=JSON[a0_0x15a4('0x72')](_0x3fb752,null,0x2);fs[a0_0x15a4('0x3a')](_0x1fb57a,_0x488462);console[a0_0x15a4('0x1e')](symbols['info'],chalk['white'](a0_0x15a4('0x6a')+_0x3fb752[a0_0x15a4('0x81')]));child_process[a0_0x15a4('0x60')]('npm\x20run\x20build-widget:pro\x20--\x20--path='+_0x4de481,{'stdio':'inherit'});fs[a0_0x15a4('0x3a')](_0x349f97+a0_0x15a4('0x5e'),_0x4de481);fs[a0_0x15a4('0x3a')](_0x416dfd+a0_0x15a4('0x5e'),_0x4de481);tar['pack'](_0x349f97)[a0_0x15a4('0x2c')](fs[a0_0x15a4('0x40')](_0xd2d834));tar['pack'](_0x416dfd)[a0_0x15a4('0x2c')](fs[a0_0x15a4('0x40')](_0x360e94));const _0x3d0fe9=_0x261f3b[a0_0x15a4('0x67')];if(_0x3d0fe9==='y'){connectFtpServer(function(_0x4b3be9){const _0x508afd=ora(a0_0x15a4('0x88'));_0x508afd['start']();const _0x46c3d2=fs[a0_0x15a4('0x18')](_0xd2d834);const _0x331eef=fs[a0_0x15a4('0x28')](_0xd2d834)[a0_0x15a4('0x31')];_0x4b3be9[a0_0x15a4('0xf')](_0x46c3d2,_0x523196,function(_0x49482e){if(_0x49482e){_0x508afd['fail']();console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](_0x49482e));throw _0x49482e;}_0x4b3be9[a0_0x15a4('0x20')]();_0x508afd[a0_0x15a4('0x4d')]('部件代码提交中...');console[a0_0x15a4('0x1e')](symbols['success'],chalk['white'](a0_0x15a4('0x3f')));console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x7')](a0_0x15a4('0x4a')+_0x2baa3e));});let _0x3e2206=0x0;_0x46c3d2['on'](a0_0x15a4('0x83'),function(_0x4a2618){_0x3e2206+=_0x4a2618[a0_0x15a4('0x2d')];_0x508afd['text']='部件代码提交中...\x09'+((_0x3e2206/_0x331eef*0x64)['toFixed'](0x2)+'%');});});}}else{console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')]('Widget:'+_0x47e7c7+'不存在'));}}catch(_0x3665ff){console[a0_0x15a4('0x1e')](symbols['error'],chalk[a0_0x15a4('0x57')](_0x3665ff));}});});program[a0_0x15a4('0x3')](process[a0_0x15a4('0x36')]);function createWidget(_0x523bfd,_0x54a4f5,_0x39ac0a,_0xf2d8e7,_0xc4b427){if(!_0x523bfd||!_0x54a4f5||!_0x39ac0a||!_0xc4b427){console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](a0_0x15a4('0x7b')));return![];}console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x7')](a0_0x15a4('0x59')+_0x523bfd+a0_0x15a4('0x6b')));try{const _0x52fcbf=_0xc4b427+'/'+_0x523bfd;const _0x17a7b8=a0_0x15a4('0x29')+_0x52fcbf;const _0x4bd444=a0_0x15a4('0x50');if(!fs[a0_0x15a4('0x47')](_0x4bd444)){console[a0_0x15a4('0x1e')](symbols['error'],chalk[a0_0x15a4('0x57')](a0_0x15a4('0x6c')));return![];}if(fs['existsSync'](_0x17a7b8)){console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](a0_0x15a4('0x82')+_0x523bfd+a0_0x15a4('0x5a')));return![];}copydir[a0_0x15a4('0x25')](_0x4bd444,_0x17a7b8);const _0x308e45=_0x17a7b8+a0_0x15a4('0x10');let _0x45e17d=fs['readFileSync'](_0x308e45)[a0_0x15a4('0x3b')]();const _0xaec4d6=JSON[a0_0x15a4('0x3')](_0x45e17d);_0xaec4d6['id']=_0x523bfd;_0xaec4d6[a0_0x15a4('0x3c')]=a0_0x15a4('0xa');_0xaec4d6['name']=_0x54a4f5;_0xaec4d6[a0_0x15a4('0x8')]=_0x39ac0a;_0xaec4d6[a0_0x15a4('0x5d')]=_0xf2d8e7;_0x45e17d=JSON[a0_0x15a4('0x72')](_0xaec4d6,null,0x2);fs[a0_0x15a4('0x3a')](_0x308e45,_0x45e17d);const _0x2173ff='src/widgets/widgets.json';let _0x4134f2=fs[a0_0x15a4('0x48')](_0x2173ff)[a0_0x15a4('0x3b')]();const _0x1686cc=JSON[a0_0x15a4('0x3')](_0x4134f2);_0x1686cc['version']=getNextVersion(_0x1686cc['version']);for(let _0x277a09 of _0x1686cc[a0_0x15a4('0x3d')]){_0x277a09[a0_0x15a4('0x6')]=![];}_0x1686cc[a0_0x15a4('0x3d')][a0_0x15a4('0x85')]({'group':'测试','path':_0x52fcbf,'enable':!![]});_0x4134f2=JSON[a0_0x15a4('0x72')](_0x1686cc,null,0x2);fs['writeFileSync'](_0x2173ff,_0x4134f2);console['log'](symbols[a0_0x15a4('0x32')],chalk['white']('完成创建Widget:'+_0x523bfd+a0_0x15a4('0x6b')));}catch(_0x39b925){console[a0_0x15a4('0x1e')](symbols['error'],chalk['red'](_0x39b925));}return!![];}function getNextVersion(_0x130990){if(_0x130990){const _0x3e188a=_0x130990[a0_0x15a4('0x44')](/(.*\.)(\d+)$/);if(_0x3e188a&&_0x3e188a[0x1]&&_0x3e188a[0x2]){return''+_0x3e188a[0x1]+(parseInt(_0x3e188a[0x2])+0x1);}}return _0x130990;}function getWidgetsList(){const _0x114713=[];try{const _0x14af57=a0_0x15a4('0x79');if(fs[a0_0x15a4('0x47')](_0x14af57)){const _0x468df9=fs[a0_0x15a4('0x48')](_0x14af57)[a0_0x15a4('0x3b')]();const _0x289dae=JSON[a0_0x15a4('0x3')](_0x468df9);for(let _0x46f225 of _0x289dae[a0_0x15a4('0x3d')]){try{const _0x4c9650='src/widgets/'+_0x46f225[a0_0x15a4('0x70')];const _0x5b0636=_0x4c9650+a0_0x15a4('0x10');if(fs[a0_0x15a4('0x47')](_0x5b0636)){let _0x24d6e0=fs[a0_0x15a4('0x48')](_0x5b0636)[a0_0x15a4('0x3b')]();const _0x177c43=JSON[a0_0x15a4('0x3')](_0x24d6e0);_0x114713['push']({'value':_0x177c43['id'],'name':a0_0x15a4('0x14')+_0x177c43['id']+a0_0x15a4('0x6e')+_0x177c43[a0_0x15a4('0x27')]+',版本:'+_0x177c43['version']});}}catch(_0x106189){console[a0_0x15a4('0x1e')](symbols['error'],chalk[a0_0x15a4('0x57')](_0x46f225['path']+a0_0x15a4('0x63')));console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk[a0_0x15a4('0x57')](_0x106189));}}}}catch(_0x1a2ac1){console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk['red'](a0_0x15a4('0x5f')));console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x1c')],chalk['red'](_0x1a2ac1));}return _0x114713;}function getWidgetPath(_0xe1ea7b){const _0x38e45a=a0_0x15a4('0x79');let _0x122066=fs[a0_0x15a4('0x48')](_0x38e45a)[a0_0x15a4('0x3b')]();const _0x5b0c46=JSON[a0_0x15a4('0x3')](_0x122066);for(let _0x447616 of _0x5b0c46[a0_0x15a4('0x3d')]){const _0x451475=a0_0x15a4('0x29')+_0x447616[a0_0x15a4('0x70')]+'/manifest.json';let _0x36c5e7=fs[a0_0x15a4('0x48')](_0x451475)[a0_0x15a4('0x3b')]();const _0x3292d9=JSON[a0_0x15a4('0x3')](_0x36c5e7);if(_0x3292d9['id']===_0xe1ea7b){return _0x447616[a0_0x15a4('0x70')];}}console['log'](symbols[a0_0x15a4('0x1c')],chalk['red'](a0_0x15a4('0x1f')+_0xe1ea7b));}function startProxyServer(_0x479da0,_0x31c0e6){console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x4f')](a0_0x15a4('0x26')));var _0x2fda6e=express();_0x2fda6e[a0_0x15a4('0x53')]('/',proxy({'target':_0x479da0,'changeOrigin':!![],'pathRewrite':{'/core/widgets':a0_0x15a4('0x6f')},'router':{'/core/widgets':widgetDebugUrl}}));_0x2fda6e['listen'](proxyServerPort,function(){console['log'](symbols['info'],chalk[a0_0x15a4('0x4f')](a0_0x15a4('0x21')));console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x4f')](a0_0x15a4('0x19')));console[a0_0x15a4('0x1e')](symbols['info'],chalk['green'](a0_0x15a4('0x49')));console['log'](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x78')]('Window:\x20\x22C:Program\x20Files\x20(x86)GoogleChromeApplicationchrome.exe\x22\x20--disable-web-security\x20--user-data-dir=~/chrome_tmp'));console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk['green'](a0_0x15a4('0x64')));console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x78')](a0_0x15a4('0x7f')));ChromeLauncher[a0_0x15a4('0x43')]({'startingUrl':a0_0x15a4('0x41')+proxyServerPort,'chromeFlags':[a0_0x15a4('0x24'),a0_0x15a4('0x4'),a0_0x15a4('0x11'),'--disk-cache-size=1']})[a0_0x15a4('0x5b')](_0x526e50=>{console[a0_0x15a4('0x1e')](symbols[a0_0x15a4('0x32')],chalk[a0_0x15a4('0x4f')](a0_0x15a4('0x39')));});if(_0x31c0e6){_0x31c0e6();}});}function connectFtpServer(_0x56629d){const _0x42e4d1=new Client();const _0x5240f1=ora('开始建立服务器连接...');_0x5240f1[a0_0x15a4('0x13')]();_0x42e4d1['on']('ready',function(){_0x5240f1[a0_0x15a4('0x4d')]();console['log'](symbols['info'],chalk[a0_0x15a4('0x7')]('服务器连接已建立...'));if(_0x56629d){_0x56629d(_0x42e4d1);}});_0x42e4d1['on'](a0_0x15a4('0x1c'),function(_0x1c2e56){_0x5240f1[a0_0x15a4('0x35')]();console[a0_0x15a4('0x1e')](symbols['error'],chalk[a0_0x15a4('0x57')](_0x1c2e56));});_0x42e4d1[a0_0x15a4('0x16')]({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}