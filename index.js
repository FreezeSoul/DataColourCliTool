#!/usr/bin/env node

const a0_0x7f01=['cmVhZEZpbGVTeW5j','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4u','dmVyc2lvbg==','cHV0','ZW5k','5Luj55CG5pyN5Yqh5Zmo5bey5ZCv5YqoLi4u','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','L21hbmlmZXN0Lmpzb24=','c3RhcnQ=','b3Jh','5Yid5aeL5YyW5LiA5LiqV2lkZ2V0','cGF0aA==','aGFuZGxlYmFycw==','ZXJyb3I=','Y3JlYXRlV3JpdGVTdHJlYW0=','cmVhZHk=','5pyN5Yqh5Zmo6L+e5o6l5bey5bu656uLLi4u','c3luYw==','aHR0cDovLzEyNy4wLjAuMTo=','5byA5aeL5bu656uL5pyN5Yqh5Zmo6L+e5o6lLi4u','LOeJiOacrDo=','c3Rkb3V0','ZXhlY1N5bmM=','Y3JlYXRlUmVhZFN0cmVhbQ==','cmVzb2x2ZQ==','V2lkZ2V0Og==','Y29ubmVjdA==','5Yid5aeL5YyWV2lkZ2V06aG555uu','LOWQjeensDo=','cnVu','YnVpbGRBbGw=','dG9JU09TdHJpbmc=','ZGlzdC93aWRnZXRzLw==','d3JpdGVGaWxlU3luYw==','V2lkZ2V05qih5p2/5paH5Lu25aS55LiN5a2Y5Zyo','bW92ZVN5bmM=','c3Bhd24=','cGFjaw==','5qCH6K+GOg==','LnNyYy50YXI=','cHJvbXB0','6LCD6K+V5LiA5LiqV2lkZ2V0','6K+35Y+N6aaI5Y+R5biD5bqP5Y+3Og==','bG9n','cmVk','Y29weS1kaXI=','V2lkZ2V05Yib5bu65oiQ5Yqf','bnBtIGluc3RhbGw=','5bey5a2Y5Zyo','cmVwbGFjZQ==','ZW5hYmxl','aW5oZXJpdA==','V2luZG93OiAiQzpQcm9ncmFtIEZpbGVzICh4ODYpR29vZ2xlQ2hyb21lQXBwbGljYXRpb25jaHJvbWUuZXhlIiAtLWRpc2FibGUtd2ViLXNlY3VyaXR5IC0tdXNlci1kYXRhLWRpcj1+L2Nocm9tZV90bXA=','dG9TdHJpbmc=','6K+36L6T5YWlZGF0YWNvbG91cuW5s+WPsOacjeWKoeWcsOWdgO+8jOm7mOiupOiwg+eUqOWFrOWFseacjeWKoQ==','6LC35q2M5rWP6KeI5Zmo5ZCv5Yqo5oiQ5YqfLi4u','6K+36L6T5YWl5L2c6ICF5ZCN56ew77yM5aaC77yaRnJlZXplU291bDxmcmVlemVzb3VsQGdtYWlsLmNvbT4=','5LiN5a2Y5Zyo','aW5pdCA8bmFtZT4=','cGlwZQ==','6K+36L6T5YWlV2lkZ2V055qE5qCH6K+G77yM6KaB5rGC6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/','ZGVzY3JpcHRpb24=','dGV4dA==','5a6M5oiQ5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','aG9zdA==','LXYsIC0tdmVyc2lvbg==','Y29tbWFuZA==','5q2j5Zyo5ZCv5Yqo5Luj55CG5pyN5YqhLi4u','ZXhpc3RzU3luYw==','c3JjL3dpZGdldHMv','c3VjY2VlZA==','6K+36YCJ5oup6KaB5p6E5bu655qEV2lkZ2V0','LS11c2VyLWRhdGEtZGlyPS4vY2hyb21lX3RtcA==','dGhlbg==','YnVpbGQv','5q2j5Zyo5LiL6L29V2lkZ2V05qih5p2/Li4u','bGF1bmNo','6aG555uu5Yid5aeL5YyW5a6M5oiQ','YWN0aW9u','c3JjL3dpZGdldHMvd2lkZ2V0','YXJndg==','6YOo5Lu25Luj56CB5o+Q5Lqk5LitLi4uCQ==','6K+36YCJ5oup6KaB5Y+R5biD55qEV2lkZ2V0','5YiX5Ye65omA5pyJV2lkZ2V0','bWF0Y2g=','dG9GaXhlZA==','bnBtIHJ1biBidWlsZC13aWRnZXQ6cHJvIC0tIC0tbmFtZT0=','Y2hkaXI=','YnVpbGQ=','Y2hhbGs=','L3dpZGdldHM=','aHR0cC1wcm94eS1taWRkbGV3YXJl','YXV0aG9y','aW5mbw==','Li4u','d2lkZ2V0cw==','6K+36L6T5YWlV2lkZ2V055qE5o+P6L+w77yM6KaB5rGC566A55+t55qE5Lit5paH5o+P6L+w5L+h5oGv','6YOo5Lu25bey5oiQ5Yqf5o+Q5LqkLi4u','5byA5aeL5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','bmFtZQ==','ZmFpbA==','d2lkZ2V0cy5qc29u6K+75Y+W5aSx6LSl','bGlzdA==','bGlzdGVu','cmF3bGlzdA==','TGludXg6IC9vcHQvZ29vZ2xlL2Nocm9tZS9jaHJvbWUgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9L3RtcC9jaHJvbWVfdG1w','c2l6ZQ==','LS0gLS1uYW1lPQ==','c3VjY2Vzcw==','T1NYOiBvcGVuIC1uIC1hIC9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSAtLWFyZ3MgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9Ii90bXAvY2hyb21lX3RtcCI=','c3RhcnQtd2lkZ2V0','5bey57uP5a2Y5ZyoV2lkZ2V0Og==','5ZCv5Yqo6LC35q2M5rWP6KeI5Zmo6LCD6K+VLi4u','5q2j5Zyo5Yib5bu6V2lkZ2V0Og==','d2hpdGU=','VGVzdA==','Ymx1ZQ==','ZG93bmxvYWQtZ2l0LXJlcG8=','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','cGFyc2U=','Y3JlYXRl','5p6E5bu65LiA5LiqV2lkZ2V0','ZGVidWc=','6K+35o+Q5L6b5a6M5pW055qEV2lkZ2V05L+h5oGv','5Y+R5biD5LiA5LiqV2lkZ2V0','5Yib5bu65LiA5LiqV2lkZ2V0','c3RyaW5naWZ5','5a6M5oiQ5p6E5bu6V2lkZ2V077ya','cHVzaA==','ZGF0YWNvbG91cg==','ZnRwLmRhdGFjb2xvdXIuY24=','LmJ1aWxkLnRhcg==','Z3JlZW4=','6K+36L6T5YWlV2lkZ2V055qE5ZCN56ew77yM6KaB5rGC566A55+t55qE5Lit5paH5ZCN56ew5a6a5LmJ','ZGF0YQ==','6K+36YCJ5oup6KaB6LCD6K+V55qEV2lkZ2V0'];(function(_0x52885c,_0x4f63c8){const _0x1e04c0=function(_0x347726){while(--_0x347726){_0x52885c['push'](_0x52885c['shift']());}};_0x1e04c0(++_0x4f63c8);}(a0_0x7f01,0x1f2));const a0_0x3f44=function(_0x52885c,_0x4f63c8){_0x52885c=_0x52885c-0x0;let _0x1e04c0=a0_0x7f01[_0x52885c];if(a0_0x3f44['htDadj']===undefined){(function(){let _0x5b5fe8;try{const _0x708c4b=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5b5fe8=_0x708c4b();}catch(_0x58b6df){_0x5b5fe8=window;}const _0x5e2a68='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x5b5fe8['atob']||(_0x5b5fe8['atob']=function(_0x1718e2){const _0x591610=String(_0x1718e2)['replace'](/=+$/,'');let _0x5a07d5='';for(let _0x51e87e=0x0,_0x29954b,_0x29efbf,_0x39e52e=0x0;_0x29efbf=_0x591610['charAt'](_0x39e52e++);~_0x29efbf&&(_0x29954b=_0x51e87e%0x4?_0x29954b*0x40+_0x29efbf:_0x29efbf,_0x51e87e++%0x4)?_0x5a07d5+=String['fromCharCode'](0xff&_0x29954b>>(-0x2*_0x51e87e&0x6)):0x0){_0x29efbf=_0x5e2a68['indexOf'](_0x29efbf);}return _0x5a07d5;});}());a0_0x3f44['umxgqj']=function(_0x56f096){const _0x4e0ced=atob(_0x56f096);let _0x4f8888=[];for(let _0x55ff43=0x0,_0x570649=_0x4e0ced['length'];_0x55ff43<_0x570649;_0x55ff43++){_0x4f8888+='%'+('00'+_0x4e0ced['charCodeAt'](_0x55ff43)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4f8888);};a0_0x3f44['MzgRzb']={};a0_0x3f44['htDadj']=!![];}const _0x347726=a0_0x3f44['MzgRzb'][_0x52885c];if(_0x347726===undefined){_0x1e04c0=a0_0x3f44['umxgqj'](_0x1e04c0);a0_0x3f44['MzgRzb'][_0x52885c]=_0x1e04c0;}else{_0x1e04c0=_0x347726;}return _0x1e04c0;};const fs=require('fs');const fse=require('fs-extra');const path=require(a0_0x3f44('0x39'));const ora=require(a0_0x3f44('0x37'));const tar=require('tar-fs');const Client=require('ftp');const chalk=require(a0_0x3f44('0x87'));const express=require('express');const copydir=require(a0_0x3f44('0x5b'));const program=require('commander');const inquirer=require('inquirer');const symbols=require('log-symbols');const handlebars=require(a0_0x3f44('0x3a'));const proxy=require(a0_0x3f44('0x1'));const download=require(a0_0x3f44('0x1b'));const child_process=require('child_process');const ChromeLauncher=require('chrome-launcher');const githublink='FreezeSoul/DataColourWidgetTemplate#master';const dcServerAddress='http://39.101.138.43:8080';const widgetDebugUrl='http://127.0.0.1:8088/';const ftpServerAddress=a0_0x3f44('0x28');const ftpServerUserName=a0_0x3f44('0x27');const ftpServerPassword=a0_0x3f44('0x27');const proxyServerPort=0x270f;try{const packagePath=path[a0_0x3f44('0x46')](__dirname,'package.json');if(fs['existsSync'](packagePath)){const pjson=require(packagePath);const version=pjson[a0_0x3f44('0x30')];program[a0_0x3f44('0x30')](version,a0_0x3f44('0x6f'));}}catch(a0_0x5e9ea0){}program[a0_0x3f44('0x70')](a0_0x3f44('0x68'))[a0_0x3f44('0x6b')](a0_0x3f44('0x49'))[a0_0x3f44('0x7c')](_0x1724cb=>{if(!fs[a0_0x3f44('0x72')](_0x1724cb)){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x18')]('初始化Widget项目'));const _0x4ac629=ora(a0_0x3f44('0x79'));_0x4ac629[a0_0x3f44('0x36')]();download(githublink,_0x1724cb,{'clone':![]},_0x48a195=>{if(_0x48a195){_0x4ac629['fail']();console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk['red'](_0x48a195));}else{_0x4ac629[a0_0x3f44('0x74')]();process[a0_0x3f44('0x85')](_0x1724cb);console[a0_0x3f44('0x59')](symbols['info'],chalk['white'](a0_0x3f44('0x8')));child_process[a0_0x3f44('0x44')](a0_0x3f44('0x5d'),{'stdio':a0_0x3f44('0x61')});console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x18')](a0_0x3f44('0x6d')));console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x18')](a0_0x3f44('0x38')));inquirer[a0_0x3f44('0x56')]([{'name':'id','message':a0_0x3f44('0x6a')},{'name':a0_0x3f44('0x9'),'message':a0_0x3f44('0x2b')},{'name':a0_0x3f44('0x6b'),'message':a0_0x3f44('0x6')},{'name':a0_0x3f44('0x2'),'message':a0_0x3f44('0x66')}])[a0_0x3f44('0x77')](_0x42bf1d=>{try{const _0x432a74=_0x42bf1d['id'];const _0x2bfe25=_0x42bf1d['name'];const _0x5d0137=_0x42bf1d[a0_0x3f44('0x6b')];const _0xd3ec3a=_0x42bf1d['author'];const _0x502bb2=createWidget(_0x432a74,_0x2bfe25,_0x5d0137,_0xd3ec3a);if(_0x502bb2){console['log'](symbols[a0_0x3f44('0x12')],chalk[a0_0x3f44('0x2a')](a0_0x3f44('0x7b')));}}catch(_0x218f11){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk['red'](_0x218f11));}});}});}else{console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')]('项目'+_0x1724cb+a0_0x3f44('0x5e')));}});program['command'](a0_0x3f44('0xc'))[a0_0x3f44('0x6b')](a0_0x3f44('0x81'))[a0_0x3f44('0x7c')](()=>{try{const _0xd64f49=a0_0x3f44('0x1c');if(fs['existsSync'](_0xd64f49)){const _0x351688=fs[a0_0x3f44('0x2e')](_0xd64f49)[a0_0x3f44('0x63')]();const _0x22b170=JSON['parse'](_0x351688);for(let _0x507637 of _0x22b170['widgets']){const _0x3a4fee=a0_0x3f44('0x73')+_0x507637[a0_0x3f44('0x39')];const _0x597c2d=_0x3a4fee+'/manifest.json';if(fs['existsSync'](_0x597c2d)){let _0x27823e=fs[a0_0x3f44('0x2e')](_0x597c2d)['toString']();const _0x313e2b=JSON[a0_0x3f44('0x1d')](_0x27823e);console['log'](symbols['info'],chalk[a0_0x3f44('0x18')]('标识:'+_0x313e2b['id']+a0_0x3f44('0x4a')+_0x313e2b['name']+a0_0x3f44('0x42')+_0x313e2b['version']));}}}}catch(_0x1bb3be){console['log'](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](_0x1bb3be));}});program[a0_0x3f44('0x70')](a0_0x3f44('0x1e'))[a0_0x3f44('0x6b')](a0_0x3f44('0x23'))[a0_0x3f44('0x7c')](()=>{inquirer[a0_0x3f44('0x56')]([{'name':'id','message':a0_0x3f44('0x6a')},{'name':a0_0x3f44('0x9'),'message':a0_0x3f44('0x2b')},{'name':'description','message':a0_0x3f44('0x6')},{'name':a0_0x3f44('0x2'),'message':a0_0x3f44('0x66')}])[a0_0x3f44('0x77')](_0x92b6c8=>{try{const _0x2d71b5=_0x92b6c8['id'];const _0x5e5ec2=_0x92b6c8[a0_0x3f44('0x9')];const _0x463cf9=_0x92b6c8[a0_0x3f44('0x6b')];const _0x52d8ad=_0x92b6c8[a0_0x3f44('0x2')];const _0x417df9='src/widgets/'+_0x2d71b5;if(!fs[a0_0x3f44('0x72')](_0x417df9)){const _0x5cca76=createWidget(_0x2d71b5,_0x5e5ec2,_0x463cf9,_0x52d8ad);if(_0x5cca76){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x12')],chalk['green'](a0_0x3f44('0x5c')));}}else{console['log'](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](a0_0x3f44('0x15')+_0x2d71b5));}}catch(_0x5b6083){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](_0x5b6083));}});});program[a0_0x3f44('0x70')](a0_0x3f44('0x20'))['description'](a0_0x3f44('0x57'))['action'](()=>{inquirer[a0_0x3f44('0x56')]([{'name':'id','message':a0_0x3f44('0x2d'),'type':'rawlist','choices':getWidgetsList()},{'name':a0_0x3f44('0x6e'),'message':a0_0x3f44('0x64')}])[a0_0x3f44('0x77')](_0x4b679d=>{try{const _0x1c18c6=_0x4b679d['id'];const _0x4e62b9=_0x4b679d[a0_0x3f44('0x6e')]?_0x4b679d[a0_0x3f44('0x6e')]:dcServerAddress;const _0x191711='src/widgets/'+_0x1c18c6+a0_0x3f44('0x35');if(fs[a0_0x3f44('0x72')](_0x191711)){const _0x9a2d7d='src/widgets/widgets.json';let _0x1c257c=fs[a0_0x3f44('0x2e')](_0x9a2d7d)[a0_0x3f44('0x63')]();const _0x4c4785=JSON[a0_0x3f44('0x1d')](_0x1c257c);_0x4c4785[a0_0x3f44('0x30')]=getNextVersion(_0x4c4785[a0_0x3f44('0x30')]);for(let _0x50a475 of _0x4c4785['widgets']){_0x50a475[a0_0x3f44('0x60')]=_0x50a475[a0_0x3f44('0x39')]===_0x1c18c6;}_0x1c257c=JSON[a0_0x3f44('0x24')](_0x4c4785,null,0x2);fs[a0_0x3f44('0x4f')](_0x9a2d7d,_0x1c257c);let _0x5d91a7=fs[a0_0x3f44('0x2e')](_0x191711)[a0_0x3f44('0x63')]();const _0x4ab2be=JSON['parse'](_0x5d91a7);_0x4ab2be[a0_0x3f44('0x30')]=getNextVersion(_0x4ab2be[a0_0x3f44('0x30')]);_0x5d91a7=JSON[a0_0x3f44('0x24')](_0x4ab2be,null,0x2);fs['writeFileSync'](_0x191711,_0x5d91a7);console['log'](symbols['info'],chalk[a0_0x3f44('0x18')]('当前Widget版本号：'+_0x4ab2be['version']));startProxyServer(_0x4e62b9,function(){const _0x1381a8=child_process[a0_0x3f44('0x52')]('npm',[a0_0x3f44('0x4b'),a0_0x3f44('0x14'),a0_0x3f44('0x11')+_0x1c18c6],{'shell':!![]});_0x1381a8[a0_0x3f44('0x43')]['on'](a0_0x3f44('0x2c'),function(_0xbf32cb){console[a0_0x3f44('0x59')](_0xbf32cb[a0_0x3f44('0x63')]());});_0x1381a8['stderr']['on'](a0_0x3f44('0x2c'),function(_0x235649){console[a0_0x3f44('0x59')](_0x235649['toString']());});});}else{console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')]('Widget:'+_0x1c18c6+'不存在'));}}catch(_0x26dc99){console['log'](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](_0x26dc99));}});});program['command'](a0_0x3f44('0x86'))[a0_0x3f44('0x6b')](a0_0x3f44('0x1f'))[a0_0x3f44('0x7c')](()=>{inquirer['prompt']([{'name':'id','message':a0_0x3f44('0x75'),'type':a0_0x3f44('0xe'),'choices':getWidgetsList()}])['then'](_0x184f0a=>{try{const _0x1db614=_0x184f0a['id'];const _0x53c6a2=a0_0x3f44('0x73')+_0x1db614+a0_0x3f44('0x35');if(fs[a0_0x3f44('0x72')](_0x53c6a2)){let _0x462c60=fs[a0_0x3f44('0x2e')](_0x53c6a2)['toString']();const _0x2c6736=JSON[a0_0x3f44('0x1d')](_0x462c60);_0x2c6736[a0_0x3f44('0x30')]=getNextVersion(_0x2c6736[a0_0x3f44('0x30')]);_0x462c60=JSON['stringify'](_0x2c6736,null,0x2);fs['writeFileSync'](_0x53c6a2,_0x462c60);console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x18')](a0_0x3f44('0x34')+_0x2c6736['version']));child_process[a0_0x3f44('0x44')](a0_0x3f44('0x84')+_0x1db614,{'stdio':'inherit'});}else{console['log'](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](a0_0x3f44('0x47')+_0x1db614+a0_0x3f44('0x67')));}}catch(_0x2b0cc3){console['log'](symbols[a0_0x3f44('0x3b')],chalk['red'](_0x2b0cc3));}});});program[a0_0x3f44('0x70')](a0_0x3f44('0x4c'))['description']('构建所有Widgets')['action'](()=>{try{const _0x4473d4=getWidgetsList();for(let _0x2568ff of _0x4473d4){const _0x1e1a51=_0x2568ff['value'];const _0x33fc3f='src/widgets/'+_0x1e1a51+a0_0x3f44('0x35');if(fs[a0_0x3f44('0x72')](_0x33fc3f)){let _0x5d525d=fs['readFileSync'](_0x33fc3f)['toString']();const _0x2ba792=JSON[a0_0x3f44('0x1d')](_0x5d525d);_0x2ba792['version']=getNextVersion(_0x2ba792[a0_0x3f44('0x30')]);_0x5d525d=JSON[a0_0x3f44('0x24')](_0x2ba792,null,0x2);fs[a0_0x3f44('0x4f')](_0x33fc3f,_0x5d525d);console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk['white'](a0_0x3f44('0x34')+_0x2ba792[a0_0x3f44('0x30')]));child_process[a0_0x3f44('0x44')](a0_0x3f44('0x84')+_0x1e1a51,{'stdio':a0_0x3f44('0x61')});console['log'](symbols[a0_0x3f44('0x12')],chalk[a0_0x3f44('0x2a')](a0_0x3f44('0x25')+_0x2ba792['version']));const _0x332c98=a0_0x3f44('0x4e')+_0x1e1a51;const _0x191fef=a0_0x3f44('0x78')+_0x1e1a51;if(fs[a0_0x3f44('0x72')](_0x332c98)){fse[a0_0x3f44('0x51')](_0x332c98,_0x191fef);}}else{console[a0_0x3f44('0x59')](symbols['error'],chalk[a0_0x3f44('0x5a')](a0_0x3f44('0x47')+_0x1e1a51+a0_0x3f44('0x67')));}}}catch(_0x3e8c63){console['log'](symbols['error'],chalk[a0_0x3f44('0x5a')](_0x3e8c63));}});program[a0_0x3f44('0x70')]('publish')[a0_0x3f44('0x6b')](a0_0x3f44('0x22'))[a0_0x3f44('0x7c')](()=>{inquirer[a0_0x3f44('0x56')]([{'name':'id','message':a0_0x3f44('0x80'),'type':'rawlist','choices':getWidgetsList()}])['then'](_0x1261e2=>{try{const _0x34f6dd=_0x1261e2['id'];const _0x321253=a0_0x3f44('0x73')+_0x34f6dd;const _0x1649f0=_0x321253+a0_0x3f44('0x35');const _0x3f4c7a=new Date()[a0_0x3f44('0x4d')]()[a0_0x3f44('0x5f')](/T/,'')[a0_0x3f44('0x5f')](/\..+/,'')[a0_0x3f44('0x5f')](/-/g,'')[a0_0x3f44('0x5f')](/:/g,'');const _0x58e897=_0x34f6dd+'.'+_0x3f4c7a;const _0x822cb1=_0x58e897+a0_0x3f44('0x55');const _0xae9382=_0x58e897+a0_0x3f44('0x29');const _0x5d9146=a0_0x3f44('0x78')+_0x822cb1;const _0x20b993='build/'+_0xae9382;if(fs[a0_0x3f44('0x72')](_0x1649f0)){let _0x486bbc=fs[a0_0x3f44('0x2e')](_0x1649f0)['toString']();const _0x3d1ba6=JSON[a0_0x3f44('0x1d')](_0x486bbc);_0x3d1ba6[a0_0x3f44('0x30')]=getNextVersion(_0x3d1ba6[a0_0x3f44('0x30')]);_0x486bbc=JSON['stringify'](_0x3d1ba6,null,0x2);fs['writeFileSync'](_0x1649f0,_0x486bbc);console[a0_0x3f44('0x59')](symbols['info'],chalk['white'](a0_0x3f44('0x34')+_0x3d1ba6['version']));child_process[a0_0x3f44('0x44')](a0_0x3f44('0x84')+_0x34f6dd,{'stdio':'inherit'});const _0x375b68='dist/widgets/'+_0x34f6dd;tar[a0_0x3f44('0x53')](_0x321253)['pipe'](fs[a0_0x3f44('0x3c')](_0x5d9146));tar[a0_0x3f44('0x53')](_0x375b68)[a0_0x3f44('0x69')](fs[a0_0x3f44('0x3c')](_0x20b993));connectFtpServer(function(_0x1569f1){const _0x246702=ora(a0_0x3f44('0x2f'));_0x246702[a0_0x3f44('0x36')]();const _0x256fc0=fs[a0_0x3f44('0x45')](_0x5d9146);const _0x2edcfb=fs['statSync'](_0x5d9146)[a0_0x3f44('0x10')];_0x1569f1[a0_0x3f44('0x31')](_0x256fc0,_0x822cb1,function(_0x46182c){if(_0x46182c){_0x246702[a0_0x3f44('0xa')]();console[a0_0x3f44('0x59')](symbols['error'],chalk[a0_0x3f44('0x5a')](_0x46182c));throw _0x46182c;}_0x1569f1[a0_0x3f44('0x32')]();_0x246702[a0_0x3f44('0x74')](a0_0x3f44('0x2f'));console['log'](symbols[a0_0x3f44('0x12')],chalk[a0_0x3f44('0x18')](a0_0x3f44('0x7')));console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x18')](a0_0x3f44('0x58')+_0x58e897));});let _0x29c4cf=0x0;_0x256fc0['on']('data',function(_0xddfdb4){_0x29c4cf+=_0xddfdb4['length'];_0x246702[a0_0x3f44('0x6c')]=a0_0x3f44('0x7f')+((_0x29c4cf/_0x2edcfb*0x64)[a0_0x3f44('0x83')](0x2)+'%');});});}else{console[a0_0x3f44('0x59')](symbols['error'],chalk['red'](a0_0x3f44('0x47')+_0x34f6dd+a0_0x3f44('0x67')));}}catch(_0x41a9c5){console[a0_0x3f44('0x59')](symbols['error'],chalk[a0_0x3f44('0x5a')](_0x41a9c5));}});});program['parse'](process[a0_0x3f44('0x7e')]);function createWidget(_0x724f3e,_0x1994e2,_0xce5c7d,_0x5836cd){if(!_0x724f3e||!_0x1994e2||!_0xce5c7d){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](a0_0x3f44('0x21')));return![];}console[a0_0x3f44('0x59')](symbols['info'],chalk[a0_0x3f44('0x18')](a0_0x3f44('0x17')+_0x724f3e+a0_0x3f44('0x4')));try{const _0x2f236a=a0_0x3f44('0x73')+_0x724f3e;const _0xf4126e=a0_0x3f44('0x7d');if(!fs[a0_0x3f44('0x72')](_0xf4126e)){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](a0_0x3f44('0x50')));return![];}if(fs[a0_0x3f44('0x72')](_0x2f236a)){console['log'](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](a0_0x3f44('0x47')+_0x724f3e+'已存在'));return![];}copydir[a0_0x3f44('0x3f')](_0xf4126e,_0x2f236a);const _0x29ad4c=_0x2f236a+a0_0x3f44('0x35');let _0x3c5231=fs[a0_0x3f44('0x2e')](_0x29ad4c)['toString']();const _0x2f8e6c=JSON[a0_0x3f44('0x1d')](_0x3c5231);_0x2f8e6c['id']=_0x724f3e;_0x2f8e6c['name']=_0x1994e2;_0x2f8e6c[a0_0x3f44('0x6b')]=_0xce5c7d;_0x2f8e6c['author']=_0x5836cd;_0x3c5231=JSON['stringify'](_0x2f8e6c,null,0x2);fs[a0_0x3f44('0x4f')](_0x29ad4c,_0x3c5231);const _0x2b8f54='src/widgets/widgets.json';let _0x488e2e=fs[a0_0x3f44('0x2e')](_0x2b8f54)[a0_0x3f44('0x63')]();const _0x10bd40=JSON[a0_0x3f44('0x1d')](_0x488e2e);_0x10bd40['version']=getNextVersion(_0x10bd40[a0_0x3f44('0x30')]);for(let _0x577456 of _0x10bd40['widgets']){_0x577456[a0_0x3f44('0x60')]=![];}_0x10bd40[a0_0x3f44('0x5')][a0_0x3f44('0x26')]({'group':'测试','tag':a0_0x3f44('0x19'),'path':_0x724f3e,'enable':!![]});_0x488e2e=JSON[a0_0x3f44('0x24')](_0x10bd40,null,0x2);fs[a0_0x3f44('0x4f')](_0x2b8f54,_0x488e2e);console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x18')]('完成创建Widget:'+_0x724f3e+a0_0x3f44('0x4')));}catch(_0x589a6a){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](_0x589a6a));}return!![];}function getNextVersion(_0x1ed779){if(_0x1ed779){const _0x39df96=_0x1ed779[a0_0x3f44('0x82')](/(.*\.)(\d+)$/);if(_0x39df96&&_0x39df96[0x1]&&_0x39df96[0x2]){return''+_0x39df96[0x1]+(parseInt(_0x39df96[0x2])+0x1);}}return _0x1ed779;}function getWidgetsList(){const _0x4261a8=[];try{const _0x265cff=a0_0x3f44('0x1c');if(fs[a0_0x3f44('0x72')](_0x265cff)){const _0x2853e3=fs['readFileSync'](_0x265cff)[a0_0x3f44('0x63')]();const _0x49a0ee=JSON[a0_0x3f44('0x1d')](_0x2853e3);for(let _0x9feb18 of _0x49a0ee[a0_0x3f44('0x5')]){try{const _0x50480d=a0_0x3f44('0x73')+_0x9feb18[a0_0x3f44('0x39')];const _0x175a04=_0x50480d+'/manifest.json';if(fs[a0_0x3f44('0x72')](_0x175a04)){let _0x407581=fs[a0_0x3f44('0x2e')](_0x175a04)[a0_0x3f44('0x63')]();const _0x228374=JSON['parse'](_0x407581);_0x4261a8[a0_0x3f44('0x26')]({'value':_0x228374['id'],'name':a0_0x3f44('0x54')+_0x228374['id']+a0_0x3f44('0x4a')+_0x228374[a0_0x3f44('0x9')]+a0_0x3f44('0x42')+_0x228374[a0_0x3f44('0x30')]});}}catch(_0x1f596b){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](_0x9feb18[a0_0x3f44('0x39')]+'读取失败'));console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](_0x1f596b));}}}}catch(_0x56a73b){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk['red'](a0_0x3f44('0xb')));console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](_0x56a73b));}return _0x4261a8;}function startProxyServer(_0x5a463b,_0x2e3065){console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x1a')](a0_0x3f44('0x71')));var _0x1d95c5=express();_0x1d95c5['use']('/',proxy({'target':_0x5a463b,'changeOrigin':!![],'pathRewrite':{'/core/widgets':a0_0x3f44('0x0')},'router':{'/core/widgets':widgetDebugUrl}}));_0x1d95c5[a0_0x3f44('0xd')](proxyServerPort,function(){console['log'](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x1a')](a0_0x3f44('0x33')));console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x1a')](a0_0x3f44('0x16')));console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk['green']('如浏览器启动失败，请通过如下命令行手工启动：'));console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x2a')](a0_0x3f44('0x62')));console['log'](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x2a')](a0_0x3f44('0xf')));console['log'](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x2a')](a0_0x3f44('0x13')));ChromeLauncher[a0_0x3f44('0x7a')]({'startingUrl':a0_0x3f44('0x40')+proxyServerPort,'chromeFlags':['--disable-web-security',a0_0x3f44('0x76')]})[a0_0x3f44('0x77')](_0x36f317=>{console['log'](symbols['info'],chalk['blue'](a0_0x3f44('0x65')));});if(_0x2e3065){_0x2e3065();}});}function connectFtpServer(_0x7090e4){const _0x471afe=new Client();const _0x9669ee=ora(a0_0x3f44('0x41'));_0x9669ee[a0_0x3f44('0x36')]();_0x471afe['on'](a0_0x3f44('0x3d'),function(){_0x9669ee[a0_0x3f44('0x74')]();console[a0_0x3f44('0x59')](symbols[a0_0x3f44('0x3')],chalk[a0_0x3f44('0x18')](a0_0x3f44('0x3e')));if(_0x7090e4){_0x7090e4(_0x471afe);}});_0x471afe['on'](a0_0x3f44('0x3b'),function(_0x198a84){_0x9669ee[a0_0x3f44('0xa')]();console['log'](symbols[a0_0x3f44('0x3b')],chalk[a0_0x3f44('0x5a')](_0x198a84));});_0x471afe[a0_0x3f44('0x48')]({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}