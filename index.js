#!/usr/bin/env node

const a0_0x31ea=['6K+36L6T5YWlZGF0YWNvbG91cuW5s+WPsOacjeWKoeWcsOWdgO+8jOm7mOiupOiwg+eUqOWFrOWFseacjeWKoQ==','dG9JU09TdHJpbmc=','5q2j5Zyo5ZCv5Yqo5Luj55CG5pyN5YqhLi4u','ZW5k','cHVzaA==','Y2hhbGs=','cGFja2FnZS5qc29u','LnRhcg==','LS1kaXNhYmxlLXdlYi1zZWN1cml0eQ==','LOeJiOacrDo=','L3dpZGdldHM=','YnVpbGQ=','Ymx1ZQ==','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','aW5oZXJpdA==','cmVwbGFjZQ==','Y29weS1kaXI=','d2lkZ2V0cy5qc29u6K+75Y+W5aSx6LSl','cmVhZHk=','ZG93bmxvYWQtZ2l0LXJlcG8=','LXYsIC0tdmVyc2lvbg==','ZGVzY3JpcHRpb24=','c3JjL3dpZGdldHMv','aHR0cC1wcm94eS1taWRkbGV3YXJl','cHV0','c3RyaW5naWZ5','ZnRw','dGV4dA==','ZGF0YQ==','6LC35q2M5rWP6KeI5Zmo5ZCv5Yqo5oiQ5YqfLi4u','Y2hpbGRfcHJvY2Vzcw==','dXNl','5a6M5oiQ5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','ZXhlY1N5bmM=','6YOo5Lu25q2j5Zyo5Y+R5biD5LitLi4u','cHJvbXB0','5byA5aeL5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','V2lkZ2V0Og==','cmVzb2x2ZQ==','6K+36L6T5YWlV2lkZ2V055qE5o+P6L+w77yM6KaB5rGC566A55+t55qE5Lit5paH5o+P6L+w5L+h5oGv','6K+36YCJ5oup6KaB6LCD6K+V55qEV2lkZ2V0','c3VjY2VlZA==','ZmFpbA==','6LCD6K+V5LiA5LiqV2lkZ2V0','LOWQjeensDo=','5Y+R5biD5LiA5LiqV2lkZ2V0','cmF3bGlzdA==','c3Bhd24=','6K+36L6T5YWl5L2c6ICF5ZCN56ew77yM5aaC77yaRnJlZXplU291bDxmcmVlemVzb3VsQGdtYWlsLmNvbT4=','d2hpdGU=','6K+36L6T5YWlV2lkZ2V055qE5ZCN56ew77yM6KaB5rGC566A55+t55qE5Lit5paH5ZCN56ew5a6a5LmJ','5byA5aeL5bu656uL5pyN5Yqh5Zmo6L+e5o6lLi4u','bnBt','Y29ubmVjdA==','5LiN5a2Y5Zyo','5p6E5bu65omA5pyJV2lkZ2V0cw==','c3Rkb3V0','T1NYOiBvcGVuIC1uIC1hIC9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSAtLWFyZ3MgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9Ii90bXAvY2hyb21lX3RtcCI=','Y29tbWFuZA==','aW5xdWlyZXI=','dmFsdWU=','dGFyLWZz','c3RhcnQ=','5Luj55CG5pyN5Yqh5Zmo5bey5ZCv5YqoLi4u','Y29tbWFuZGVy','c3JjL3dpZGdldHMvd2lkZ2V0','6K+36L6T5YWlV2lkZ2V055qE5qCH6K+G77yM6KaB5rGC6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/','aHR0cDovLzEyNy4wLjAuMTo4MDg4Lw==','LS0gLS1uYW1lPQ==','5ZCv5Yqo6LC35q2M5rWP6KeI5Zmo6LCD6K+VLi4u','dG9TdHJpbmc=','5q2j5Zyo5LiL6L29V2lkZ2V05qih5p2/Li4u','YnVpbGQv','5Yid5aeL5YyWV2lkZ2V06aG555uu','5pyN5Yqh5Zmo6L+e5o6l5bey5bu656uLLi4u','dGhlbg==','bmFtZQ==','5bey5a2Y5Zyo','L21hbmlmZXN0Lmpzb24=','6aG555uu5Yid5aeL5YyW5a6M5oiQ','b3Jh','cGFjaw==','ZXhpc3RzU3luYw==','cGF0aA==','cGlwZQ==','ZGVidWc=','bGlzdA==','6K+36YCJ5oup6KaB5Y+R5biD55qEV2lkZ2V0','c3luYw==','c3RkZXJy','5Yib5bu65LiA5LiqV2lkZ2V0','5YiX5Ye65omA5pyJV2lkZ2V0','6YOo5Lu25bey5oiQ5Yqf5Y+R5biDLi4u','bGF1bmNo','c3RhdFN5bmM=','V2lkZ2V05Yib5bu65oiQ5Yqf','Y3JlYXRlUmVhZFN0cmVhbQ==','5bey57uP5a2Y5ZyoV2lkZ2V0Og==','6K+75Y+W5aSx6LSl','Y3JlYXRl','aW5mbw==','YWN0aW9u','YXV0aG9y','c3RhcnQtd2lkZ2V0','d3JpdGVGaWxlU3luYw==','Li4u','cGFyc2U=','d2lkZ2V0cw==','5aaC5rWP6KeI5Zmo5ZCv5Yqo5aSx6LSl77yM6K+36YCa6L+H5aaC5LiL5ZG95Luk6KGM5omL5bel5ZCv5Yqo77ya','aG9zdA==','YnVpbGRBbGw=','c3VjY2Vzcw==','cnVu','ZW5hYmxl','YXJndg==','ZXhwcmVzcw==','aHR0cDovLzM5LjEwMS4xMzguNDM6ODA4MA==','bG9n','ZXJyb3I=','aHR0cDovLzEyNy4wLjAuMTo=','ZGF0YWNvbG91cg==','cmVk','5Yid5aeL5YyW5LiA5LiqV2lkZ2V0','6K+35o+Q5L6b5a6M5pW055qEV2lkZ2V05L+h5oGv','cmVhZEZpbGVTeW5j','Z3JlZW4=','cHVibGlzaA==','Y2hkaXI=','bGVuZ3Ro','5a6M5oiQ5p6E5bu6V2lkZ2V077ya','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','aW5pdCA8bmFtZT4=','5qCH6K+GOg==','RnJlZXplU291bC9EYXRhQ29sb3VyV2lkZ2V0VGVtcGxhdGUjbWFzdGVy','dmVyc2lvbg=='];(function(_0x556735,_0x4e1405){const _0x31b11e=function(_0x2ab91e){while(--_0x2ab91e){_0x556735['push'](_0x556735['shift']());}};_0x31b11e(++_0x4e1405);}(a0_0x31ea,0x18c));const a0_0x1d60=function(_0x556735,_0x4e1405){_0x556735=_0x556735-0x0;let _0x31b11e=a0_0x31ea[_0x556735];if(a0_0x1d60['YvdiyM']===undefined){(function(){let _0x3af4ae;try{const _0x1600f5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3af4ae=_0x1600f5();}catch(_0xc3626b){_0x3af4ae=window;}const _0x247462='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x3af4ae['atob']||(_0x3af4ae['atob']=function(_0x1e5510){const _0x3df4e6=String(_0x1e5510)['replace'](/=+$/,'');let _0x32392c='';for(let _0x5b1e9c=0x0,_0x5729d2,_0x2d9d8c,_0x229308=0x0;_0x2d9d8c=_0x3df4e6['charAt'](_0x229308++);~_0x2d9d8c&&(_0x5729d2=_0x5b1e9c%0x4?_0x5729d2*0x40+_0x2d9d8c:_0x2d9d8c,_0x5b1e9c++%0x4)?_0x32392c+=String['fromCharCode'](0xff&_0x5729d2>>(-0x2*_0x5b1e9c&0x6)):0x0){_0x2d9d8c=_0x247462['indexOf'](_0x2d9d8c);}return _0x32392c;});}());a0_0x1d60['yqQIby']=function(_0x1de60b){const _0x4d277e=atob(_0x1de60b);let _0x360055=[];for(let _0x16a300=0x0,_0x1e4367=_0x4d277e['length'];_0x16a300<_0x1e4367;_0x16a300++){_0x360055+='%'+('00'+_0x4d277e['charCodeAt'](_0x16a300)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x360055);};a0_0x1d60['vaMCCl']={};a0_0x1d60['YvdiyM']=!![];}const _0x2ab91e=a0_0x1d60['vaMCCl'][_0x556735];if(_0x2ab91e===undefined){_0x31b11e=a0_0x1d60['yqQIby'](_0x31b11e);a0_0x1d60['vaMCCl'][_0x556735]=_0x31b11e;}else{_0x31b11e=_0x2ab91e;}return _0x31b11e;};const fs=require('fs');const fse=require('fs-extra');const path=require(a0_0x1d60('0x5c'));const ora=require(a0_0x1d60('0x59'));const tar=require(a0_0x1d60('0x46'));const Client=require(a0_0x1d60('0x23'));const chalk=require(a0_0x1d60('0xe'));const express=require(a0_0x1d60('0x7c'));const copydir=require(a0_0x1d60('0x19'));const program=require(a0_0x1d60('0x49'));const inquirer=require(a0_0x1d60('0x44'));const symbols=require('log-symbols');const handlebars=require('handlebars');const proxy=require(a0_0x1d60('0x20'));const download=require(a0_0x1d60('0x1c'));const child_process=require(a0_0x1d60('0x27'));const ChromeLauncher=require('chrome-launcher');const githublink=a0_0x1d60('0x7');const dcServerAddress=a0_0x1d60('0x7d');const widgetDebugUrl=a0_0x1d60('0x4c');const ftpServerAddress='ftp.datacolour.cn';const ftpServerUserName=a0_0x1d60('0x81');const ftpServerPassword='datacolour';const proxyServerPort=0x270f;try{const packagePath=path[a0_0x1d60('0x2f')](__dirname,a0_0x1d60('0xf'));if(fs[a0_0x1d60('0x5b')](packagePath)){const pjson=require(packagePath);const version=pjson[a0_0x1d60('0x8')];program[a0_0x1d60('0x8')](version,a0_0x1d60('0x1d'));}}catch(a0_0x1fdcf3){}program[a0_0x1d60('0x43')](a0_0x1d60('0x5'))[a0_0x1d60('0x1e')](a0_0x1d60('0x52'))['action'](_0x25a531=>{if(!fs[a0_0x1d60('0x5b')](_0x25a531)){console['log'](symbols[a0_0x1d60('0x6d')],chalk['white']('初始化Widget项目'));const _0x4b2610=ora(a0_0x1d60('0x50'));_0x4b2610[a0_0x1d60('0x47')]();download(githublink,_0x25a531,{'clone':![]},_0xb98b81=>{if(_0xb98b81){_0x4b2610['fail']();console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](_0xb98b81));}else{_0x4b2610['succeed']();process[a0_0x1d60('0x1')](_0x25a531);console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x3a')](a0_0x1d60('0x2d')));child_process[a0_0x1d60('0x2a')]('npm\x20install',{'stdio':a0_0x1d60('0x17')});console[a0_0x1d60('0x7e')](symbols['info'],chalk[a0_0x1d60('0x3a')](a0_0x1d60('0x29')));console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x3a')](a0_0x1d60('0x83')));inquirer[a0_0x1d60('0x2c')]([{'name':'id','message':'请输入Widget的标识，要求英文、数字、下划线'},{'name':'name','message':a0_0x1d60('0x3b')},{'name':a0_0x1d60('0x1e'),'message':a0_0x1d60('0x30')},{'name':a0_0x1d60('0x6f'),'message':a0_0x1d60('0x39')}])[a0_0x1d60('0x54')](_0x4c052f=>{try{const _0xa6ceeb=_0x4c052f['id'];const _0x1adbee=_0x4c052f[a0_0x1d60('0x55')];const _0x542aed=_0x4c052f['description'];const _0x128d34=_0x4c052f[a0_0x1d60('0x6f')];const _0x4615f7=createWidget(_0xa6ceeb,_0x1adbee,_0x542aed,_0x128d34);if(_0x4615f7){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x78')],chalk[a0_0x1d60('0x86')](a0_0x1d60('0x58')));}}catch(_0x40c0d4){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](_0x40c0d4));}});}});}else{console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')]('项目'+_0x25a531+a0_0x1d60('0x56')));}});program[a0_0x1d60('0x43')](a0_0x1d60('0x5f'))[a0_0x1d60('0x1e')](a0_0x1d60('0x64'))['action'](()=>{try{const _0x398474=a0_0x1d60('0x4');if(fs[a0_0x1d60('0x5b')](_0x398474)){const _0x34d513=fs[a0_0x1d60('0x85')](_0x398474)['toString']();const _0x37a833=JSON[a0_0x1d60('0x73')](_0x34d513);for(let _0x3be71c of _0x37a833[a0_0x1d60('0x74')]){const _0x437c48=a0_0x1d60('0x1f')+_0x3be71c[a0_0x1d60('0x5c')];const _0x1acc4d=_0x437c48+a0_0x1d60('0x57');if(fs[a0_0x1d60('0x5b')](_0x1acc4d)){let _0x598571=fs['readFileSync'](_0x1acc4d)['toString']();const _0x56f54a=JSON[a0_0x1d60('0x73')](_0x598571);console['log'](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x3a')](a0_0x1d60('0x6')+_0x56f54a['id']+a0_0x1d60('0x35')+_0x56f54a['name']+',版本:'+_0x56f54a[a0_0x1d60('0x8')]));}}}}catch(_0x5b01f1){console['log'](symbols['error'],chalk[a0_0x1d60('0x82')](_0x5b01f1));}});program[a0_0x1d60('0x43')](a0_0x1d60('0x6c'))[a0_0x1d60('0x1e')](a0_0x1d60('0x63'))['action'](()=>{inquirer[a0_0x1d60('0x2c')]([{'name':'id','message':a0_0x1d60('0x4b')},{'name':a0_0x1d60('0x55'),'message':a0_0x1d60('0x3b')},{'name':a0_0x1d60('0x1e'),'message':a0_0x1d60('0x30')},{'name':a0_0x1d60('0x6f'),'message':a0_0x1d60('0x39')}])[a0_0x1d60('0x54')](_0x2dccb5=>{try{const _0x3b6caa=_0x2dccb5['id'];const _0x4db29f=_0x2dccb5[a0_0x1d60('0x55')];const _0x5d8f21=_0x2dccb5['description'];const _0x3bcd51=_0x2dccb5[a0_0x1d60('0x6f')];const _0x3f84ea=a0_0x1d60('0x1f')+_0x3b6caa;if(!fs['existsSync'](_0x3f84ea)){const _0x355d8e=createWidget(_0x3b6caa,_0x4db29f,_0x5d8f21,_0x3bcd51);if(_0x355d8e){console[a0_0x1d60('0x7e')](symbols['success'],chalk[a0_0x1d60('0x86')](a0_0x1d60('0x68')));}}else{console[a0_0x1d60('0x7e')](symbols['error'],chalk[a0_0x1d60('0x82')](a0_0x1d60('0x6a')+_0x3b6caa));}}catch(_0x4b6f5e){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](_0x4b6f5e));}});});program[a0_0x1d60('0x43')](a0_0x1d60('0x5e'))[a0_0x1d60('0x1e')](a0_0x1d60('0x34'))[a0_0x1d60('0x6e')](()=>{inquirer['prompt']([{'name':'id','message':a0_0x1d60('0x31'),'type':a0_0x1d60('0x37'),'choices':getWidgetsList()},{'name':a0_0x1d60('0x76'),'message':a0_0x1d60('0x9')}])[a0_0x1d60('0x54')](_0x32fdcf=>{try{const _0x269472=_0x32fdcf['id'];const _0xa7b418=_0x32fdcf[a0_0x1d60('0x76')]?_0x32fdcf[a0_0x1d60('0x76')]:dcServerAddress;const _0x2e961c='src/widgets/'+_0x269472+a0_0x1d60('0x57');if(fs[a0_0x1d60('0x5b')](_0x2e961c)){const _0x84fca1=a0_0x1d60('0x4');let _0x492220=fs['readFileSync'](_0x84fca1)['toString']();const _0x454ef8=JSON['parse'](_0x492220);_0x454ef8[a0_0x1d60('0x8')]=getNextVersion(_0x454ef8[a0_0x1d60('0x8')]);for(let _0xd36c1f of _0x454ef8[a0_0x1d60('0x74')]){_0xd36c1f[a0_0x1d60('0x7a')]=_0xd36c1f[a0_0x1d60('0x5c')]===_0x269472;}_0x492220=JSON[a0_0x1d60('0x22')](_0x454ef8,null,0x2);fs[a0_0x1d60('0x71')](_0x84fca1,_0x492220);let _0x14d8c0=fs[a0_0x1d60('0x85')](_0x2e961c)['toString']();const _0x1bdda5=JSON[a0_0x1d60('0x73')](_0x14d8c0);_0x1bdda5[a0_0x1d60('0x8')]=getNextVersion(_0x1bdda5[a0_0x1d60('0x8')]);_0x14d8c0=JSON[a0_0x1d60('0x22')](_0x1bdda5,null,0x2);fs[a0_0x1d60('0x71')](_0x2e961c,_0x14d8c0);console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk['white'](a0_0x1d60('0x16')+_0x1bdda5[a0_0x1d60('0x8')]));startProxyServer(_0xa7b418,function(){const _0x3c85cf=child_process[a0_0x1d60('0x38')](a0_0x1d60('0x3d'),[a0_0x1d60('0x79'),a0_0x1d60('0x70'),a0_0x1d60('0x4d')+_0x269472],{'shell':!![]});_0x3c85cf[a0_0x1d60('0x41')]['on'](a0_0x1d60('0x25'),function(_0x17bf76){console[a0_0x1d60('0x7e')](_0x17bf76[a0_0x1d60('0x4f')]());});_0x3c85cf[a0_0x1d60('0x62')]['on'](a0_0x1d60('0x25'),function(_0x307f82){console[a0_0x1d60('0x7e')](_0x307f82[a0_0x1d60('0x4f')]());});});}else{console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](a0_0x1d60('0x2e')+_0x269472+a0_0x1d60('0x3f')));}}catch(_0x45323f){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk['red'](_0x45323f));}});});program[a0_0x1d60('0x43')](a0_0x1d60('0x14'))[a0_0x1d60('0x1e')]('构建一个Widget')[a0_0x1d60('0x6e')](()=>{inquirer[a0_0x1d60('0x2c')]([{'name':'id','message':'请选择要构建的Widget','type':a0_0x1d60('0x37'),'choices':getWidgetsList()}])[a0_0x1d60('0x54')](_0x3f37cd=>{try{const _0x44b6ea=_0x3f37cd['id'];const _0x531ad3=a0_0x1d60('0x1f')+_0x44b6ea+a0_0x1d60('0x57');if(fs[a0_0x1d60('0x5b')](_0x531ad3)){let _0x2ea6ed=fs[a0_0x1d60('0x85')](_0x531ad3)[a0_0x1d60('0x4f')]();const _0x44267d=JSON['parse'](_0x2ea6ed);_0x44267d[a0_0x1d60('0x8')]=getNextVersion(_0x44267d[a0_0x1d60('0x8')]);_0x2ea6ed=JSON[a0_0x1d60('0x22')](_0x44267d,null,0x2);fs[a0_0x1d60('0x71')](_0x531ad3,_0x2ea6ed);console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x3a')](a0_0x1d60('0x16')+_0x44267d[a0_0x1d60('0x8')]));child_process[a0_0x1d60('0x2a')]('npm\x20run\x20build-widget:pro\x20--\x20--name='+_0x44b6ea,{'stdio':a0_0x1d60('0x17')});}else{console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](a0_0x1d60('0x2e')+_0x44b6ea+a0_0x1d60('0x3f')));}}catch(_0x14959d){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](_0x14959d));}});});program[a0_0x1d60('0x43')](a0_0x1d60('0x77'))[a0_0x1d60('0x1e')](a0_0x1d60('0x40'))[a0_0x1d60('0x6e')](()=>{try{const _0x564f2d=getWidgetsList();for(let _0xe91b1b of _0x564f2d){const _0x1405ef=_0xe91b1b[a0_0x1d60('0x45')];const _0x3ea5a6=a0_0x1d60('0x1f')+_0x1405ef+'/manifest.json';if(fs['existsSync'](_0x3ea5a6)){let _0x4db585=fs[a0_0x1d60('0x85')](_0x3ea5a6)['toString']();const _0x1734f7=JSON['parse'](_0x4db585);_0x1734f7[a0_0x1d60('0x8')]=getNextVersion(_0x1734f7[a0_0x1d60('0x8')]);_0x4db585=JSON[a0_0x1d60('0x22')](_0x1734f7,null,0x2);fs['writeFileSync'](_0x3ea5a6,_0x4db585);console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk['white'](a0_0x1d60('0x16')+_0x1734f7['version']));child_process['execSync']('npm\x20run\x20build-widget:pro\x20--\x20--name='+_0x1405ef,{'stdio':a0_0x1d60('0x17')});console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x78')],chalk[a0_0x1d60('0x86')](a0_0x1d60('0x3')+_0x1734f7[a0_0x1d60('0x8')]));const _0xeb6a68='dist/widgets/'+_0x1405ef;const _0x3cab21=a0_0x1d60('0x51')+_0x1405ef;if(fs[a0_0x1d60('0x5b')](_0xeb6a68)){fse['moveSync'](_0xeb6a68,_0x3cab21);}}else{console[a0_0x1d60('0x7e')](symbols['error'],chalk[a0_0x1d60('0x82')](a0_0x1d60('0x2e')+_0x1405ef+'不存在'));}}}catch(_0x1a8ce3){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk['red'](_0x1a8ce3));}});program[a0_0x1d60('0x43')](a0_0x1d60('0x0'))[a0_0x1d60('0x1e')](a0_0x1d60('0x36'))[a0_0x1d60('0x6e')](()=>{inquirer[a0_0x1d60('0x2c')]([{'name':'id','message':a0_0x1d60('0x60'),'type':a0_0x1d60('0x37'),'choices':getWidgetsList()}])[a0_0x1d60('0x54')](_0x44c520=>{try{const _0x474e41=_0x44c520['id'];const _0x2eec97=a0_0x1d60('0x1f')+_0x474e41;const _0x3d7d47=_0x2eec97+a0_0x1d60('0x57');const _0x2a9fd8=new Date()[a0_0x1d60('0xa')]()[a0_0x1d60('0x18')](/T/,'')[a0_0x1d60('0x18')](/\..+/,'')[a0_0x1d60('0x18')](/-/g,'')[a0_0x1d60('0x18')](/:/g,'');const _0x561abb=''+_0x474e41+_0x2a9fd8;const _0x10e781=a0_0x1d60('0x51')+_0x561abb+a0_0x1d60('0x10');if(fs[a0_0x1d60('0x5b')](_0x3d7d47)){tar[a0_0x1d60('0x5a')](_0x2eec97)[a0_0x1d60('0x5d')](fs['createWriteStream'](_0x10e781));connectFtpServer(function(_0xf1e551){const _0x596971=ora(a0_0x1d60('0x2b'));_0x596971[a0_0x1d60('0x47')]();const _0x455a24=fs[a0_0x1d60('0x69')](_0x10e781);const _0x15bf34=fs[a0_0x1d60('0x67')](_0x10e781)['size'];_0xf1e551[a0_0x1d60('0x21')](_0x455a24,_0x10e781,function(_0x3c046e){if(_0x3c046e){_0x596971['fail']();console[a0_0x1d60('0x7e')](symbols['error'],chalk[a0_0x1d60('0x82')](_0x3c046e));throw _0x3c046e;}_0xf1e551[a0_0x1d60('0xc')]();_0x596971[a0_0x1d60('0x32')]('部件正在发布中...');console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x78')],chalk[a0_0x1d60('0x3a')](a0_0x1d60('0x65')));console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x3a')]('请反馈发布序号:'+_0x561abb));});let _0x13a908=0x0;_0x455a24['on'](a0_0x1d60('0x25'),function(_0xbc6768){_0x13a908+=_0xbc6768[a0_0x1d60('0x2')];_0x596971[a0_0x1d60('0x24')]='部件正在发布中...\x09'+((_0x13a908/_0x15bf34*0x64)['toFixed'](0x2)+'%');});});}else{console[a0_0x1d60('0x7e')](symbols['error'],chalk[a0_0x1d60('0x82')]('Widget:'+_0x474e41+a0_0x1d60('0x3f')));}}catch(_0x3af72a){console['log'](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](_0x3af72a));}});});program['parse'](process[a0_0x1d60('0x7b')]);function createWidget(_0x387641,_0x1807f7,_0x41b3d5,_0x55a965){if(!_0x387641||!_0x1807f7||!_0x41b3d5){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](a0_0x1d60('0x84')));return![];}console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x3a')]('正在创建Widget:'+_0x387641+a0_0x1d60('0x72')));try{const _0x56ad06=a0_0x1d60('0x1f')+_0x387641;const _0x47fe77=a0_0x1d60('0x4a');if(!fs[a0_0x1d60('0x5b')](_0x47fe77)){console['log'](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')]('Widget模板文件夹不存在'));return![];}if(fs[a0_0x1d60('0x5b')](_0x56ad06)){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](a0_0x1d60('0x2e')+_0x387641+a0_0x1d60('0x56')));return![];}copydir[a0_0x1d60('0x61')](_0x47fe77,_0x56ad06);const _0x22a0c5=_0x56ad06+'/manifest.json';let _0x4c17b2=fs[a0_0x1d60('0x85')](_0x22a0c5)[a0_0x1d60('0x4f')]();const _0x3a96e6=JSON[a0_0x1d60('0x73')](_0x4c17b2);_0x3a96e6['id']=_0x387641;_0x3a96e6[a0_0x1d60('0x55')]=_0x1807f7;_0x3a96e6[a0_0x1d60('0x1e')]=_0x41b3d5;_0x3a96e6[a0_0x1d60('0x6f')]=_0x55a965;_0x4c17b2=JSON['stringify'](_0x3a96e6,null,0x2);fs[a0_0x1d60('0x71')](_0x22a0c5,_0x4c17b2);const _0x51a30c=a0_0x1d60('0x4');let _0x1db7f4=fs['readFileSync'](_0x51a30c)[a0_0x1d60('0x4f')]();const _0x3b68c6=JSON[a0_0x1d60('0x73')](_0x1db7f4);_0x3b68c6[a0_0x1d60('0x8')]=getNextVersion(_0x3b68c6[a0_0x1d60('0x8')]);for(let _0x3f0786 of _0x3b68c6['widgets']){_0x3f0786[a0_0x1d60('0x7a')]=![];}_0x3b68c6['widgets'][a0_0x1d60('0xd')]({'group':'测试','tag':'Test','path':_0x387641,'enable':!![]});_0x1db7f4=JSON['stringify'](_0x3b68c6,null,0x2);fs['writeFileSync'](_0x51a30c,_0x1db7f4);console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x3a')]('完成创建Widget:'+_0x387641+a0_0x1d60('0x72')));}catch(_0xbe31a6){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](_0xbe31a6));}return!![];}function getNextVersion(_0x16fcf2){if(_0x16fcf2){const _0x282280=_0x16fcf2['match'](/(.*\.)(\d+)$/);if(_0x282280&&_0x282280[0x1]&&_0x282280[0x2]){return''+_0x282280[0x1]+(parseInt(_0x282280[0x2])+0x1);}}return _0x16fcf2;}function getWidgetsList(){const _0x19892d=[];try{const _0x5ba622=a0_0x1d60('0x4');if(fs[a0_0x1d60('0x5b')](_0x5ba622)){const _0x2939d2=fs[a0_0x1d60('0x85')](_0x5ba622)[a0_0x1d60('0x4f')]();const _0x1d7e86=JSON[a0_0x1d60('0x73')](_0x2939d2);for(let _0x2476b1 of _0x1d7e86[a0_0x1d60('0x74')]){try{const _0x25f237=a0_0x1d60('0x1f')+_0x2476b1['path'];const _0x2eedbc=_0x25f237+a0_0x1d60('0x57');if(fs[a0_0x1d60('0x5b')](_0x2eedbc)){let _0x217a4b=fs[a0_0x1d60('0x85')](_0x2eedbc)[a0_0x1d60('0x4f')]();const _0xfd122b=JSON[a0_0x1d60('0x73')](_0x217a4b);_0x19892d[a0_0x1d60('0xd')]({'value':_0xfd122b['id'],'name':a0_0x1d60('0x6')+_0xfd122b['id']+a0_0x1d60('0x35')+_0xfd122b[a0_0x1d60('0x55')]+a0_0x1d60('0x12')+_0xfd122b[a0_0x1d60('0x8')]});}}catch(_0x42c3f2){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](_0x2476b1[a0_0x1d60('0x5c')]+a0_0x1d60('0x6b')));console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](_0x42c3f2));}}}}catch(_0x46682b){console[a0_0x1d60('0x7e')](symbols['error'],chalk['red'](a0_0x1d60('0x1a')));console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x7f')],chalk['red'](_0x46682b));}return _0x19892d;}function startProxyServer(_0x4cad2f,_0x298032){console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x15')](a0_0x1d60('0xb')));var _0x20e87e=express();_0x20e87e[a0_0x1d60('0x28')]('/',proxy({'target':_0x4cad2f,'changeOrigin':!![],'pathRewrite':{'/core/widgets':a0_0x1d60('0x13')},'router':{'/core/widgets':widgetDebugUrl}}));_0x20e87e['listen'](proxyServerPort,function(){console['log'](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x15')](a0_0x1d60('0x48')));console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk['blue'](a0_0x1d60('0x4e')));console[a0_0x1d60('0x7e')](symbols['info'],chalk[a0_0x1d60('0x86')](a0_0x1d60('0x75')));console[a0_0x1d60('0x7e')](symbols['info'],chalk['green']('Window:\x20\x22C:Program\x20Files\x20(x86)GoogleChromeApplicationchrome.exe\x22\x20--disable-web-security\x20--user-data-dir=~/chrome_tmp'));console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x86')]('Linux:\x20/opt/google/chrome/chrome\x20--disable-web-security\x20--user-data-dir=/tmp/chrome_tmp'));console[a0_0x1d60('0x7e')](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x86')](a0_0x1d60('0x42')));ChromeLauncher[a0_0x1d60('0x66')]({'startingUrl':a0_0x1d60('0x80')+proxyServerPort,'chromeFlags':[a0_0x1d60('0x11'),'--user-data-dir=./chrome_tmp']})['then'](_0x9324b5=>{console[a0_0x1d60('0x7e')](symbols['info'],chalk[a0_0x1d60('0x15')](a0_0x1d60('0x26')));});if(_0x298032){_0x298032();}});}function connectFtpServer(_0x2cd61c){const _0x18828c=new Client();const _0x19442a=ora(a0_0x1d60('0x3c'));_0x19442a[a0_0x1d60('0x47')]();_0x18828c['on'](a0_0x1d60('0x1b'),function(){_0x19442a[a0_0x1d60('0x32')]();console['log'](symbols[a0_0x1d60('0x6d')],chalk[a0_0x1d60('0x3a')](a0_0x1d60('0x53')));if(_0x2cd61c){_0x2cd61c(_0x18828c);}});_0x18828c['on'](a0_0x1d60('0x7f'),function(_0x2124bc){_0x19442a[a0_0x1d60('0x33')]();console['log'](symbols[a0_0x1d60('0x7f')],chalk[a0_0x1d60('0x82')](_0x2124bc));});_0x18828c[a0_0x1d60('0x3e')]({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}