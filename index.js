#!/usr/bin/env node

const a0_0x438f=['c3Rkb3V0','6K+36YCJ5oup6KaB5Y+R5biD55qEV2lkZ2V0','cmVk','YXV0aG9y','TGludXg6IC9vcHQvZ29vZ2xlL2Nocm9tZS9jaHJvbWUgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9L3RtcC9jaHJvbWVfdG1w','bGlzdGVu','bnBt','c3RkZXJy','cGFyc2U=','6K+36L6T5YWlZGF0YWNvbG91cuW5s+WPsOacjeWKoeWcsOWdgO+8jOm7mOiupOiwg+eUqOWFrOWFseacjeWKoQ==','ZmFpbA==','aHR0cC1wcm94eS1taWRkbGV3YXJl','V2lkZ2V05Yib5bu65oiQ5Yqf','aHR0cDovLzEyNy4wLjAuMTo=','d2lkZ2V0cw==','ZnRwLmRhdGFjb2xvdXIuY24=','cHVzaA==','cGlwZQ==','Y2hkaXI=','5byA5aeL5bu656uL5pyN5Yqh5Zmo6L+e5o6lLi4u','RnJlZXplU291bC9EYXRhQ29sb3VyV2lkZ2V0VGVtcGxhdGUjbWFzdGVy','cHVibGlzaA==','V2lkZ2V05qih5p2/5paH5Lu25aS55LiN5a2Y5Zyo','5bey5a2Y5Zyo','YXJndg==','ZXhlY1N5bmM=','cmVzb2x2ZQ==','c3RhcnQtd2lkZ2V0','6K+36L6T5YWlV2lkZ2V055qE5qCH6K+G77yM6KaB5rGC6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/','cmVwbGFjZQ==','5pyN5Yqh5Zmo6L+e5o6l5bey5bu656uLLi4u','dmVyc2lvbg==','LS0gLS1uYW1lPQ==','c3VjY2Vzcw==','c3VjY2VlZA==','Li4u','5b2T5YmNV2lkZ2V054mI5pys5Y+377ya','aG9zdA==','6YOo5Lu25q2j5Zyo5Y+R5biD5LitLi4u','5aaC5rWP6KeI5Zmo5ZCv5Yqo5aSx6LSl77yM6K+36YCa6L+H5aaC5LiL5ZG95Luk6KGM5omL5bel5ZCv5Yqo77ya','cHJvbXB0','Z3JlZW4=','d2hpdGU=','5a6M5oiQ5a6J6KOF5L6d6LWW6YOo5Lu2Li4u','c3RhcnQ=','6K+36L6T5YWlV2lkZ2V055qE5o+P6L+w77yM6KaB5rGC566A55+t55qE5Lit5paH5o+P6L+w5L+h5oGv','6K+35Y+N6aaI5Y+R5biD5bqP5Y+3Og==','Y3JlYXRlV3JpdGVTdHJlYW0=','5qCH6K+GOg==','ZGF0YQ==','L21hbmlmZXN0Lmpzb24=','dGhlbg==','aW5pdCA8bmFtZT4=','5Yib5bu65LiA5LiqV2lkZ2V0','aW5oZXJpdA==','cGFjaw==','c3JjL3dpZGdldHMvd2lkZ2V0','dG9GaXhlZA==','6K+36YCJ5oup6KaB6LCD6K+V55qEV2lkZ2V0','cmVhZEZpbGVTeW5j','Y2hyb21lLWxhdW5jaGVy','V2lkZ2V0Og==','LnRhcg==','ZW5k','c3JjL3dpZGdldHMvd2lkZ2V0cy5qc29u','aGFuZGxlYmFycw==','cmF3bGlzdA==','bmFtZQ==','aW5mbw==','YWN0aW9u','ZnRw','Y29tbWFuZGVy','ZG93bmxvYWQtZ2l0LXJlcG8=','V2luZG93OiAiQzpQcm9ncmFtIEZpbGVzICh4ODYpR29vZ2xlQ2hyb21lQXBwbGljYXRpb25jaHJvbWUuZXhlIiAtLWRpc2FibGUtd2ViLXNlY3VyaXR5IC0tdXNlci1kYXRhLWRpcj1+L2Nocm9tZV90bXA=','c2l6ZQ==','6K+75Y+W5aSx6LSl','5Y+R5biD5LiA5LiqV2lkZ2V0','dXNl','cHV0','bnBtIHJ1biBidWlsZC13aWRnZXQ6cHJvIC0tIC0tbmFtZT0=','c3JjL3dpZGdldHMv','5Yid5aeL5YyW5LiA5LiqV2lkZ2V0','LOeJiOacrDo=','6YOo5Lu25bey5oiQ5Yqf5Y+R5biDLi4u','6K+36L6T5YWl5L2c6ICF5ZCN56ew77yM5aaC77yaRnJlZXplU291bDxmcmVlemVzb3VsQGdtYWlsLmNvbT4=','b3Jh','LOWQjeensDo=','bWF0Y2g=','bGlzdA==','6aG555uu5Yid5aeL5YyW5a6M5oiQ','5q2j5Zyo5ZCv5Yqo5Luj55CG5pyN5YqhLi4u','6LC35q2M5rWP6KeI5Zmo5ZCv5Yqo5oiQ5YqfLi4u','5q2j5Zyo5Yib5bu6V2lkZ2V0Og==','Y2hpbGRfcHJvY2Vzcw==','d3JpdGVGaWxlU3luYw==','bGF1bmNo','T1NYOiBvcGVuIC1uIC1hIC9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSAtLWFyZ3MgLS1kaXNhYmxlLXdlYi1zZWN1cml0eSAtLXVzZXItZGF0YS1kaXI9Ii90bXAvY2hyb21lX3RtcCI=','cGF0aA==','Ymx1ZQ==','5a6M5oiQ5Yib5bu6V2lkZ2V0Og==','Y3JlYXRl','ZXJyb3I=','5Yid5aeL5YyWV2lkZ2V06aG555uu','c3Bhd24=','bG9nLXN5bWJvbHM=','ZW5hYmxl','VGVzdA==','Y2hhbGs=','5LiN5a2Y5Zyo','ZGF0YWNvbG91cg==','Y3JlYXRlUmVhZFN0cmVhbQ==','Y29ubmVjdA==','bG9n','LS11c2VyLWRhdGEtZGlyPS4vY2hyb21lX3RtcA==','aHR0cDovLzM5LjEwMS4xMzguNDM6ODA4MA==','6YOo5Lu25q2j5Zyo5Y+R5biD5LitLi4uCQ==','ZGVzY3JpcHRpb24=','cGFja2FnZS5qc29u','ZXhpc3RzU3luYw==','dG9TdHJpbmc=','c3RyaW5naWZ5','Y29tbWFuZA=='];(function(_0x50ae8f,_0x1f6e9b){const _0x30b266=function(_0x546786){while(--_0x546786){_0x50ae8f['push'](_0x50ae8f['shift']());}};_0x30b266(++_0x1f6e9b);}(a0_0x438f,0x8f));const a0_0x1123=function(_0x50ae8f,_0x1f6e9b){_0x50ae8f=_0x50ae8f-0x0;let _0x30b266=a0_0x438f[_0x50ae8f];if(a0_0x1123['wtrksw']===undefined){(function(){const _0x20da93=function(){let _0x5b85a0;try{_0x5b85a0=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x141f96){_0x5b85a0=window;}return _0x5b85a0;};const _0x4474b1=_0x20da93();const _0x534bac='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x4474b1['atob']||(_0x4474b1['atob']=function(_0x518e5f){const _0x45e60b=String(_0x518e5f)['replace'](/=+$/,'');let _0x209bf6='';for(let _0x25e1f6=0x0,_0x30f6de,_0xaf92ac,_0x44fd5e=0x0;_0xaf92ac=_0x45e60b['charAt'](_0x44fd5e++);~_0xaf92ac&&(_0x30f6de=_0x25e1f6%0x4?_0x30f6de*0x40+_0xaf92ac:_0xaf92ac,_0x25e1f6++%0x4)?_0x209bf6+=String['fromCharCode'](0xff&_0x30f6de>>(-0x2*_0x25e1f6&0x6)):0x0){_0xaf92ac=_0x534bac['indexOf'](_0xaf92ac);}return _0x209bf6;});}());a0_0x1123['CKOkDR']=function(_0x33589d){const _0x42e66e=atob(_0x33589d);let _0x4f3102=[];for(let _0x5753cc=0x0,_0x4f5a00=_0x42e66e['length'];_0x5753cc<_0x4f5a00;_0x5753cc++){_0x4f3102+='%'+('00'+_0x42e66e['charCodeAt'](_0x5753cc)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4f3102);};a0_0x1123['GgVZtl']={};a0_0x1123['wtrksw']=!![];}const _0x546786=a0_0x1123['GgVZtl'][_0x50ae8f];if(_0x546786===undefined){_0x30b266=a0_0x1123['CKOkDR'](_0x30b266);a0_0x1123['GgVZtl'][_0x50ae8f]=_0x30b266;}else{_0x30b266=_0x546786;}return _0x30b266;};const fs=require('fs');const path=require(a0_0x1123('0x4c'));const ora=require(a0_0x1123('0x40'));const tar=require('tar-fs');const Client=require(a0_0x1123('0x31'));const chalk=require(a0_0x1123('0x56'));const express=require('express');const copydir=require('copy-dir');const program=require(a0_0x1123('0x32'));const inquirer=require('inquirer');const symbols=require(a0_0x1123('0x53'));const handlebars=require(a0_0x1123('0x2c'));const proxy=require(a0_0x1123('0x70'));const download=require(a0_0x1123('0x33'));const child_process=require(a0_0x1123('0x48'));const ChromeLauncher=require(a0_0x1123('0x27'));const githublink=a0_0x1123('0x79');const dcServerAddress=a0_0x1123('0x5d');const widgetDebugUrl='http://127.0.0.1:8088/';const ftpServerAddress=a0_0x1123('0x74');const ftpServerUserName='datacolour';const ftpServerPassword=a0_0x1123('0x58');const proxyServerPort=0x270f;try{const packagePath=path[a0_0x1123('0x5')](__dirname,a0_0x1123('0x60'));if(fs[a0_0x1123('0x61')](packagePath)){const pjson=require(packagePath);const version=pjson[a0_0x1123('0xa')];program[a0_0x1123('0xa')](version,'-v,\x20--version');}}catch(a0_0x475b6e){}program['command'](a0_0x1123('0x1f'))[a0_0x1123('0x5f')](a0_0x1123('0x51'))[a0_0x1123('0x30')](_0x3d1950=>{if(!fs[a0_0x1123('0x61')](_0x3d1950)){console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk['white'](a0_0x1123('0x51')));const _0x39bb49=ora('正在下载Widget模板...');_0x39bb49[a0_0x1123('0x17')]();download(githublink,_0x3d1950,{'clone':![]},_0x19caa7=>{if(_0x19caa7){_0x39bb49[a0_0x1123('0x6f')]();console['log'](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](_0x19caa7));}else{_0x39bb49['succeed']();process[a0_0x1123('0x77')](_0x3d1950);console['log'](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x15')]('开始安装依赖部件...'));child_process[a0_0x1123('0x4')]('npm\x20install',{'stdio':a0_0x1123('0x21')});console['log'](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x15')](a0_0x1123('0x16')));console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x15')](a0_0x1123('0x3c')));inquirer[a0_0x1123('0x13')]([{'name':'id','message':a0_0x1123('0x7')},{'name':a0_0x1123('0x2e'),'message':'请输入Widget的名称，要求简短的中文名称定义'},{'name':'description','message':a0_0x1123('0x18')},{'name':'author','message':a0_0x1123('0x3f')}])[a0_0x1123('0x1e')](_0x29a4b7=>{try{const _0x521ae2=_0x29a4b7['id'];const _0x502175=_0x29a4b7[a0_0x1123('0x2e')];const _0x323859=_0x29a4b7[a0_0x1123('0x5f')];const _0xc723fd=_0x29a4b7[a0_0x1123('0x68')];const _0x253c03=createWidget(_0x521ae2,_0x502175,_0x323859,_0xc723fd);if(_0x253c03){console[a0_0x1123('0x5b')](symbols['success'],chalk[a0_0x1123('0x14')](a0_0x1123('0x44')));}}catch(_0x24306b){console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](_0x24306b));}});}});}else{console['log'](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')]('项目'+_0x3d1950+a0_0x1123('0x2')));}});program[a0_0x1123('0x64')](a0_0x1123('0x43'))[a0_0x1123('0x5f')]('列出所有Widget')[a0_0x1123('0x30')](()=>{try{const _0x10f9da=a0_0x1123('0x2b');if(fs['existsSync'](_0x10f9da)){const _0x53b5fa=fs[a0_0x1123('0x26')](_0x10f9da)[a0_0x1123('0x62')]();const _0x40ec37=JSON[a0_0x1123('0x6d')](_0x53b5fa);for(let _0x2f5157 of _0x40ec37['widgets']){const _0x28760d='src/widgets/'+_0x2f5157[a0_0x1123('0x4c')];const _0x58c472=_0x28760d+a0_0x1123('0x1d');if(fs[a0_0x1123('0x61')](_0x58c472)){let _0xaab9c4=fs[a0_0x1123('0x26')](_0x58c472)[a0_0x1123('0x62')]();const _0x3d5344=JSON['parse'](_0xaab9c4);console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x15')](a0_0x1123('0x1b')+_0x3d5344['id']+',名称:'+_0x3d5344[a0_0x1123('0x2e')]+a0_0x1123('0x3d')+_0x3d5344[a0_0x1123('0xa')]));}}}}catch(_0x495a23){console['log'](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](_0x495a23));}});program['command'](a0_0x1123('0x4f'))[a0_0x1123('0x5f')](a0_0x1123('0x20'))['action'](()=>{inquirer[a0_0x1123('0x13')]([{'name':'id','message':a0_0x1123('0x7')},{'name':a0_0x1123('0x2e'),'message':'请输入Widget的名称，要求简短的中文名称定义'},{'name':a0_0x1123('0x5f'),'message':a0_0x1123('0x18')},{'name':a0_0x1123('0x68'),'message':a0_0x1123('0x3f')}])[a0_0x1123('0x1e')](_0x761975=>{try{const _0x17b329=_0x761975['id'];const _0x588d41=_0x761975[a0_0x1123('0x2e')];const _0x4ef85b=_0x761975[a0_0x1123('0x5f')];const _0x112c31=_0x761975['author'];const _0x1e07c5=a0_0x1123('0x3b')+_0x17b329;if(!fs[a0_0x1123('0x61')](_0x1e07c5)){const _0x1859bd=createWidget(_0x17b329,_0x588d41,_0x4ef85b,_0x112c31);if(_0x1859bd){console['log'](symbols[a0_0x1123('0xc')],chalk[a0_0x1123('0x14')](a0_0x1123('0x71')));}}else{console[a0_0x1123('0x5b')](symbols['error'],chalk['red']('已经存在Widget:'+_0x17b329));}}catch(_0x5ca6dd){console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](_0x5ca6dd));}});});program['command']('debug')[a0_0x1123('0x5f')]('调试一个Widget')[a0_0x1123('0x30')](()=>{inquirer[a0_0x1123('0x13')]([{'name':'id','message':a0_0x1123('0x25'),'type':a0_0x1123('0x2d'),'choices':getWidgetIdList()},{'name':a0_0x1123('0x10'),'message':a0_0x1123('0x6e')}])[a0_0x1123('0x1e')](_0x3b531b=>{try{const _0xa706cb=_0x3b531b['id'];const _0x698e10=_0x3b531b[a0_0x1123('0x10')]?_0x3b531b[a0_0x1123('0x10')]:dcServerAddress;const _0x18e6e9=a0_0x1123('0x3b')+_0xa706cb+a0_0x1123('0x1d');if(fs[a0_0x1123('0x61')](_0x18e6e9)){const _0xb736b9=a0_0x1123('0x2b');let _0x18b639=fs['readFileSync'](_0xb736b9)[a0_0x1123('0x62')]();const _0xbbea5=JSON[a0_0x1123('0x6d')](_0x18b639);_0xbbea5['version']=getNextVersion(_0xbbea5[a0_0x1123('0xa')]);for(let _0x3e1ffd of _0xbbea5[a0_0x1123('0x73')]){_0x3e1ffd['enable']=_0x3e1ffd[a0_0x1123('0x4c')]===_0xa706cb;}_0x18b639=JSON[a0_0x1123('0x63')](_0xbbea5,null,0x2);fs['writeFileSync'](_0xb736b9,_0x18b639);let _0x5ce3c0=fs['readFileSync'](_0x18e6e9)[a0_0x1123('0x62')]();const _0x184cb6=JSON[a0_0x1123('0x6d')](_0x5ce3c0);_0x184cb6[a0_0x1123('0xa')]=getNextVersion(_0x184cb6[a0_0x1123('0xa')]);_0x5ce3c0=JSON['stringify'](_0x184cb6,null,0x2);fs[a0_0x1123('0x49')](_0x18e6e9,_0x5ce3c0);console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x15')](a0_0x1123('0xf')+_0x184cb6['version']));startProxyServer(_0x698e10,function(){const _0x4f5aa1=child_process[a0_0x1123('0x52')](a0_0x1123('0x6b'),['run',a0_0x1123('0x6'),a0_0x1123('0xb')+_0xa706cb],{'shell':!![]});_0x4f5aa1[a0_0x1123('0x65')]['on'](a0_0x1123('0x1c'),function(_0x71e6d6){console[a0_0x1123('0x5b')](_0x71e6d6[a0_0x1123('0x62')]());});_0x4f5aa1[a0_0x1123('0x6c')]['on'](a0_0x1123('0x1c'),function(_0x9ec65f){console[a0_0x1123('0x5b')](_0x9ec65f[a0_0x1123('0x62')]());});});}else{console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')]('Widget:'+_0xa706cb+'不存在'));}}catch(_0x25d928){console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](_0x25d928));}});});program[a0_0x1123('0x64')]('build')['description']('构建一个Widget')['action'](()=>{inquirer['prompt']([{'name':'id','message':'请选择要构建的Widget','type':a0_0x1123('0x2d'),'choices':getWidgetIdList()}])[a0_0x1123('0x1e')](_0x5e513b=>{try{const _0x5bb2e0=_0x5e513b['id'];const _0x502575='src/widgets/'+_0x5bb2e0+a0_0x1123('0x1d');if(fs[a0_0x1123('0x61')](_0x502575)){let _0x416884=fs['readFileSync'](_0x502575)[a0_0x1123('0x62')]();const _0x189c35=JSON[a0_0x1123('0x6d')](_0x416884);_0x189c35[a0_0x1123('0xa')]=getNextVersion(_0x189c35['version']);_0x416884=JSON[a0_0x1123('0x63')](_0x189c35,null,0x2);fs[a0_0x1123('0x49')](_0x502575,_0x416884);console['log'](symbols['info'],chalk[a0_0x1123('0x15')](a0_0x1123('0xf')+_0x189c35[a0_0x1123('0xa')]));child_process['execSync'](a0_0x1123('0x3a')+_0x5bb2e0,{'stdio':a0_0x1123('0x21')});}else{console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](a0_0x1123('0x28')+_0x5bb2e0+a0_0x1123('0x57')));}}catch(_0x4fab4d){console['log'](symbols[a0_0x1123('0x50')],chalk['red'](_0x4fab4d));}});});program[a0_0x1123('0x64')](a0_0x1123('0x0'))[a0_0x1123('0x5f')](a0_0x1123('0x37'))[a0_0x1123('0x30')](()=>{inquirer[a0_0x1123('0x13')]([{'name':'id','message':a0_0x1123('0x66'),'type':a0_0x1123('0x2d'),'choices':getWidgetIdList()}])[a0_0x1123('0x1e')](_0x511854=>{try{const _0x1df0db=_0x511854['id'];const _0x6ea2e1=a0_0x1123('0x3b')+_0x1df0db;const _0xa065bc=_0x6ea2e1+'/manifest.json';const _0xca2047=new Date()['toISOString']()[a0_0x1123('0x8')](/T/,'')[a0_0x1123('0x8')](/\..+/,'')[a0_0x1123('0x8')](/-/g,'')[a0_0x1123('0x8')](/:/g,'');const _0x493ea1=''+_0x1df0db+_0xca2047;const _0x305d5e=_0x493ea1+a0_0x1123('0x29');if(fs[a0_0x1123('0x61')](_0xa065bc)){tar[a0_0x1123('0x22')](_0x6ea2e1)[a0_0x1123('0x76')](fs[a0_0x1123('0x1a')](_0x305d5e));connectFtpServer(function(_0x183574){const _0x139aac=ora(a0_0x1123('0x11'));_0x139aac[a0_0x1123('0x17')]();const _0x382075=fs[a0_0x1123('0x59')](_0x305d5e);const _0x4de920=fs['statSync'](_0x305d5e)[a0_0x1123('0x35')];_0x183574[a0_0x1123('0x39')](_0x382075,_0x305d5e,function(_0x618f07){if(_0x618f07){_0x139aac[a0_0x1123('0x6f')]();console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](_0x618f07));throw _0x618f07;}_0x183574[a0_0x1123('0x2a')]();_0x139aac['succeed'](a0_0x1123('0x11'));console[a0_0x1123('0x5b')](symbols['success'],chalk[a0_0x1123('0x15')](a0_0x1123('0x3e')));console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk['white'](a0_0x1123('0x19')+_0x493ea1));});let _0x257f87=0x0;_0x382075['on'](a0_0x1123('0x1c'),function(_0x1c37aa){_0x257f87+=_0x1c37aa['length'];_0x139aac['text']=a0_0x1123('0x5e')+((_0x257f87/_0x4de920*0x64)[a0_0x1123('0x24')](0x2)+'%');});});}else{console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](a0_0x1123('0x28')+_0x1df0db+a0_0x1123('0x57')));}}catch(_0x100058){console['log'](symbols[a0_0x1123('0x50')],chalk['red'](_0x100058));}});});program[a0_0x1123('0x6d')](process[a0_0x1123('0x3')]);function createWidget(_0x22cd5d,_0x542436,_0x24e034,_0x137561){if(!_0x22cd5d||!_0x542436||!_0x24e034){console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')]('请提供完整的Widget信息'));return![];}console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x15')](a0_0x1123('0x47')+_0x22cd5d+a0_0x1123('0xe')));try{const _0x3ee639=a0_0x1123('0x3b')+_0x22cd5d;const _0x1350bf=a0_0x1123('0x23');if(!fs[a0_0x1123('0x61')](_0x1350bf)){console[a0_0x1123('0x5b')](symbols['error'],chalk['red'](a0_0x1123('0x1')));return![];}if(fs[a0_0x1123('0x61')](_0x3ee639)){console[a0_0x1123('0x5b')](symbols['error'],chalk[a0_0x1123('0x67')](a0_0x1123('0x28')+_0x22cd5d+a0_0x1123('0x2')));return![];}copydir['sync'](_0x1350bf,_0x3ee639);const _0x16dad7=_0x3ee639+'/manifest.json';let _0x1845af=fs[a0_0x1123('0x26')](_0x16dad7)[a0_0x1123('0x62')]();const _0x40faba=JSON['parse'](_0x1845af);_0x40faba['id']=_0x22cd5d;_0x40faba[a0_0x1123('0x2e')]=_0x542436;_0x40faba[a0_0x1123('0x5f')]=_0x24e034;_0x40faba['author']=_0x137561;_0x1845af=JSON[a0_0x1123('0x63')](_0x40faba,null,0x2);fs[a0_0x1123('0x49')](_0x16dad7,_0x1845af);const _0x58183e=a0_0x1123('0x2b');let _0x1d4e69=fs[a0_0x1123('0x26')](_0x58183e)['toString']();const _0x396f82=JSON[a0_0x1123('0x6d')](_0x1d4e69);_0x396f82[a0_0x1123('0xa')]=getNextVersion(_0x396f82[a0_0x1123('0xa')]);for(let _0x554788 of _0x396f82[a0_0x1123('0x73')]){_0x554788[a0_0x1123('0x54')]=![];}_0x396f82['widgets']['push']({'group':'测试','tag':a0_0x1123('0x55'),'path':_0x22cd5d,'enable':!![]});_0x1d4e69=JSON[a0_0x1123('0x63')](_0x396f82,null,0x2);fs[a0_0x1123('0x49')](_0x58183e,_0x1d4e69);console[a0_0x1123('0x5b')](symbols['info'],chalk[a0_0x1123('0x15')](a0_0x1123('0x4e')+_0x22cd5d+a0_0x1123('0xe')));}catch(_0x34961f){console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](_0x34961f));}return!![];}function getNextVersion(_0x41d3c0){if(_0x41d3c0){const _0x115c7b=_0x41d3c0[a0_0x1123('0x42')](/(.*\.)(\d+)$/);if(_0x115c7b&&_0x115c7b[0x1]&&_0x115c7b[0x2]){return''+_0x115c7b[0x1]+(parseInt(_0x115c7b[0x2])+0x1);}}return _0x41d3c0;}function getWidgetIdList(){const _0x47ef27=[];try{const _0x27df4d='src/widgets/widgets.json';if(fs[a0_0x1123('0x61')](_0x27df4d)){const _0x438859=fs['readFileSync'](_0x27df4d)[a0_0x1123('0x62')]();const _0x2d3d7e=JSON[a0_0x1123('0x6d')](_0x438859);for(let _0xfcaa3e of _0x2d3d7e[a0_0x1123('0x73')]){try{const _0x39aaa7=a0_0x1123('0x3b')+_0xfcaa3e['path'];const _0x4e90ce=_0x39aaa7+'/manifest.json';if(fs[a0_0x1123('0x61')](_0x4e90ce)){let _0x32e9ff=fs[a0_0x1123('0x26')](_0x4e90ce)[a0_0x1123('0x62')]();const _0x1bba45=JSON[a0_0x1123('0x6d')](_0x32e9ff);_0x47ef27[a0_0x1123('0x75')]({'value':_0x1bba45['id'],'name':'标识:'+_0x1bba45['id']+a0_0x1123('0x41')+_0x1bba45[a0_0x1123('0x2e')]+a0_0x1123('0x3d')+_0x1bba45['version']});}}catch(_0x48cf00){console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x50')],chalk['red'](_0xfcaa3e['path']+a0_0x1123('0x36')));console['log'](symbols[a0_0x1123('0x50')],chalk[a0_0x1123('0x67')](_0x48cf00));}}}}catch(_0x1188bb){console[a0_0x1123('0x5b')](symbols['error'],chalk[a0_0x1123('0x67')]('widgets.json读取失败'));console['log'](symbols['error'],chalk[a0_0x1123('0x67')](_0x1188bb));}return _0x47ef27;}function startProxyServer(_0x2abbdd,_0x51d17f){console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk['blue'](a0_0x1123('0x45')));var _0x416090=express();_0x416090[a0_0x1123('0x38')]('/',proxy({'target':_0x2abbdd,'changeOrigin':!![],'pathRewrite':{'/core/widgets':'/widgets'},'router':{'/core/widgets':widgetDebugUrl}}));_0x416090[a0_0x1123('0x6a')](proxyServerPort,function(){console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk['blue']('代理服务器已启动...'));console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x4d')]('启动谷歌浏览器调试...'));console['log'](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x14')](a0_0x1123('0x12')));console['log'](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x14')](a0_0x1123('0x34')));console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x14')](a0_0x1123('0x69')));console['log'](symbols[a0_0x1123('0x2f')],chalk['green'](a0_0x1123('0x4b')));ChromeLauncher[a0_0x1123('0x4a')]({'startingUrl':a0_0x1123('0x72')+proxyServerPort,'chromeFlags':['--disable-web-security',a0_0x1123('0x5c')]})[a0_0x1123('0x1e')](_0x2c7576=>{console[a0_0x1123('0x5b')](symbols[a0_0x1123('0x2f')],chalk[a0_0x1123('0x4d')](a0_0x1123('0x46')));});if(_0x51d17f){_0x51d17f();}});}function connectFtpServer(_0xc8c5b2){const _0x53af44=new Client();const _0x406967=ora(a0_0x1123('0x78'));_0x406967[a0_0x1123('0x17')]();_0x53af44['on']('ready',function(){_0x406967[a0_0x1123('0xd')]();console[a0_0x1123('0x5b')](symbols['info'],chalk[a0_0x1123('0x15')](a0_0x1123('0x9')));if(_0xc8c5b2){_0xc8c5b2(_0x53af44);}});_0x53af44['on'](a0_0x1123('0x50'),function(_0x4ae35a){_0x406967[a0_0x1123('0x6f')]();console[a0_0x1123('0x5b')](symbols['error'],chalk[a0_0x1123('0x67')](_0x4ae35a));});_0x53af44[a0_0x1123('0x5a')]({'host':ftpServerAddress,'user':ftpServerUserName,'password':ftpServerPassword});}